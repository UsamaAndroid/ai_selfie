"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/uploadthing";
exports.ids = ["vendor-chunks/uploadthing"];
exports.modules = {

/***/ "(rsc)/./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js":
/*!****************************************************************!*\
  !*** ./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logDeprecationWarning: () => (/* binding */ logDeprecationWarning)\n/* harmony export */ });\n//#region src/_internal/deprecations.ts\nconst logDeprecationWarning = (message) => {\n\tconsole.warn(`⚠️ [uploadthing][deprecated] ${message}`);\n};\n\n//#endregion\n\n//# sourceMappingURL=deprecations-pLmw6Ytd.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9kZXByZWNhdGlvbnMtcExtdzZZdGQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQSw4Q0FBOEMsUUFBUTtBQUN0RDs7QUFFQTtBQUNpQztBQUNqQyIsInNvdXJjZXMiOlsiL1VzZXJzL3VzYW1hL0RvY3VtZW50cy9HaXRIdWIvYWlfc2VsZmllL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L2RlcHJlY2F0aW9ucy1wTG13Nll0ZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL19pbnRlcm5hbC9kZXByZWNhdGlvbnMudHNcbmNvbnN0IGxvZ0RlcHJlY2F0aW9uV2FybmluZyA9IChtZXNzYWdlKSA9PiB7XG5cdGNvbnNvbGUud2Fybihg4pqg77iPIFt1cGxvYWR0aGluZ11bZGVwcmVjYXRlZF0gJHttZXNzYWdlfWApO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBsb2dEZXByZWNhdGlvbldhcm5pbmcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlcHJlY2F0aW9ucy1wTG13Nll0ZC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/package-Beb-iarE.js":
/*!***********************************************************!*\
  !*** ./node_modules/uploadthing/dist/package-Beb-iarE.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n//#region package.json\nvar version = \"7.7.3\";\n\n//#endregion\n\n//# sourceMappingURL=package-Beb-iarE.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9wYWNrYWdlLUJlYi1pYXJFLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBOztBQUVBO0FBQ21CO0FBQ25CIiwic291cmNlcyI6WyIvVXNlcnMvdXNhbWEvRG9jdW1lbnRzL0dpdEh1Yi9haV9zZWxmaWUvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvcGFja2FnZS1CZWItaWFyRS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gcGFja2FnZS5qc29uXG52YXIgdmVyc2lvbiA9IFwiNy43LjNcIjtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB2ZXJzaW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWNrYWdlLUJlYi1pYXJFLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/package-Beb-iarE.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/shared-schemas-BIFDoqPF.js":
/*!******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/shared-schemas-BIFDoqPF.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ActionType: () => (/* binding */ ActionType),\n/* harmony export */   CallbackResultResponse: () => (/* binding */ CallbackResultResponse),\n/* harmony export */   MetadataFetchResponse: () => (/* binding */ MetadataFetchResponse),\n/* harmony export */   MetadataFetchStreamPart: () => (/* binding */ MetadataFetchStreamPart),\n/* harmony export */   UploadActionPayload: () => (/* binding */ UploadActionPayload),\n/* harmony export */   UploadThingHook: () => (/* binding */ UploadThingHook),\n/* harmony export */   UploadThingToken$1: () => (/* binding */ UploadThingToken),\n/* harmony export */   UploadedFileData$1: () => (/* binding */ UploadedFileData)\n/* harmony export */ });\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n\n\n\n//#region src/_internal/shared-schemas.ts\nconst ContentDispositionSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(..._uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.ValidContentDispositions);\nconst ACLSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(..._uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.ValidACLs);\n/**\n* Valid options for the `?actionType` query param\n*/\nconst ActionType = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(\"upload\");\n/**\n* Valid options for the `uploadthing-hook` header\n* for requests coming from UT server\n*/\nconst UploadThingHook = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(\"callback\", \"error\");\n/**\n* =============================================================================\n* =========================== Configuration ===================================\n* =============================================================================\n*/\nconst DecodeString = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.transform(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromSelf, effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String, {\n\tdecode: (data) => new TextDecoder().decode(data),\n\tencode: (data) => new TextEncoder().encode(data)\n});\nconst ParsedToken = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Struct({\n\tapiKey: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Redacted(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.startsWith(\"sk_\"))),\n\tappId: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tregions: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonEmptyArray(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String),\n\tingestHost: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optionalWith({ default: () => \"ingest.uploadthing.com\" }))\n});\nconst UploadThingToken = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromBase64.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.compose(DecodeString), effect_Schema__WEBPACK_IMPORTED_MODULE_0__.compose(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.parseJson(ParsedToken)));\n/**\n* =============================================================================\n* ======================== File Type Hierarchy ===============================\n* =============================================================================\n*/\n/**\n* Properties from the web File object, this is what the client sends when initiating an upload\n*/\nvar FileUploadData = class extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"FileUploadData\")({\n\tname: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tsize: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Number,\n\ttype: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tlastModified: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Number.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optional)\n}) {};\n/**\n* `.middleware()` can add a customId to the incoming file data\n*/\nvar FileUploadDataWithCustomId = class extends FileUploadData.extend(\"FileUploadDataWithCustomId\")({ customId: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NullOr(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String) }) {};\n/**\n* When files are uploaded, we get back\n* - a key\n* - URLs for the file\n* - the hash (md5-hex) of the uploaded file's contents\n*/\nvar UploadedFileData = class extends FileUploadDataWithCustomId.extend(\"UploadedFileData\")({\n\tkey: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\turl: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tappUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tufsUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tfileHash: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String\n}) {};\nvar MetadataFetchStreamPart = class extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"MetadataFetchStreamPart\")({\n\tpayload: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\tsignature: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n\thook: UploadThingHook\n}) {};\nvar MetadataFetchResponse = class extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"MetadataFetchResponse\")({ ok: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Boolean }) {};\nvar CallbackResultResponse = class extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"CallbackResultResponse\")({ ok: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Boolean }) {};\n/**\n* =============================================================================\n* ======================== Client Action Payloads ============================\n* =============================================================================\n*/\nvar UploadActionPayload = class extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"UploadActionPayload\")({\n\tfiles: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Array(FileUploadData),\n\tinput: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Unknown\n}) {};\n\n//#endregion\n\n//# sourceMappingURL=shared-schemas-BIFDoqPF.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9zaGFyZWQtc2NoZW1hcy1CSUZEb3FQRi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQTBFO0FBQ3ZDOztBQUVuQztBQUNBLGlDQUFpQyxrREFBUyxJQUFJLHlFQUF3QjtBQUN0RSxrQkFBa0Isa0RBQVMsSUFBSSwwREFBUztBQUN4QztBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVM7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0RBQVM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixvREFBVyxDQUFDLDZEQUFvQixFQUFFLGlEQUFRO0FBQy9EO0FBQ0E7QUFDQSxDQUFDO0FBQ0Qsb0JBQW9CLGlEQUFRO0FBQzVCLFNBQVMsbURBQVUsQ0FBQyxpREFBUSxNQUFNLHFEQUFZO0FBQzlDLFFBQVEsaURBQVE7QUFDaEIsVUFBVSx3REFBZSxDQUFDLGlEQUFRO0FBQ2xDLGFBQWEsaURBQVEsTUFBTSx1REFBYyxHQUFHLHlDQUF5QztBQUNyRixDQUFDO0FBQ0QseUJBQXlCLCtEQUFzQixNQUFNLGtEQUFTLGdCQUFnQixrREFBUyxDQUFDLG9EQUFXO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsZ0RBQU87QUFDMUMsT0FBTyxpREFBUTtBQUNmLE9BQU8saURBQVE7QUFDZixPQUFPLGlEQUFRO0FBQ2YsZUFBZSxpREFBUSxNQUFNLG1EQUFVO0FBQ3ZDLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxxR0FBcUcsVUFBVSxpREFBUSxDQUFDLGlEQUFRLEdBQUc7QUFDbkk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGlEQUFRO0FBQ2QsTUFBTSxpREFBUTtBQUNkLFNBQVMsaURBQVE7QUFDakIsU0FBUyxpREFBUTtBQUNqQixXQUFXLGlEQUFRO0FBQ25CLENBQUM7QUFDRCw0Q0FBNEMsZ0RBQU87QUFDbkQsVUFBVSxpREFBUTtBQUNsQixZQUFZLGlEQUFRO0FBQ3BCO0FBQ0EsQ0FBQztBQUNELDBDQUEwQyxnREFBTyw0QkFBNEIsSUFBSSxrREFBUyxFQUFFO0FBQzVGLDJDQUEyQyxnREFBTyw2QkFBNkIsSUFBSSxrREFBUyxFQUFFO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsZ0RBQU87QUFDL0MsUUFBUSxnREFBTztBQUNmLFFBQVEsa0RBQVM7QUFDakIsQ0FBQzs7QUFFRDtBQUNvTjtBQUNwTiIsInNvdXJjZXMiOlsiL1VzZXJzL3VzYW1hL0RvY3VtZW50cy9HaXRIdWIvYWlfc2VsZmllL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L3NoYXJlZC1zY2hlbWFzLUJJRkRvcVBGLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZhbGlkQUNMcywgVmFsaWRDb250ZW50RGlzcG9zaXRpb25zIH0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcbmltcG9ydCAqIGFzIFMgZnJvbSBcImVmZmVjdC9TY2hlbWFcIjtcblxuLy8jcmVnaW9uIHNyYy9faW50ZXJuYWwvc2hhcmVkLXNjaGVtYXMudHNcbmNvbnN0IENvbnRlbnREaXNwb3NpdGlvblNjaGVtYSA9IFMuTGl0ZXJhbCguLi5WYWxpZENvbnRlbnREaXNwb3NpdGlvbnMpO1xuY29uc3QgQUNMU2NoZW1hID0gUy5MaXRlcmFsKC4uLlZhbGlkQUNMcyk7XG4vKipcbiogVmFsaWQgb3B0aW9ucyBmb3IgdGhlIGA/YWN0aW9uVHlwZWAgcXVlcnkgcGFyYW1cbiovXG5jb25zdCBBY3Rpb25UeXBlID0gUy5MaXRlcmFsKFwidXBsb2FkXCIpO1xuLyoqXG4qIFZhbGlkIG9wdGlvbnMgZm9yIHRoZSBgdXBsb2FkdGhpbmctaG9va2AgaGVhZGVyXG4qIGZvciByZXF1ZXN0cyBjb21pbmcgZnJvbSBVVCBzZXJ2ZXJcbiovXG5jb25zdCBVcGxvYWRUaGluZ0hvb2sgPSBTLkxpdGVyYWwoXCJjYWxsYmFja1wiLCBcImVycm9yXCIpO1xuLyoqXG4qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qID09PT09PT09PT09PT09PT09PT09PT09PT09PSBDb25maWd1cmF0aW9uID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qL1xuY29uc3QgRGVjb2RlU3RyaW5nID0gUy50cmFuc2Zvcm0oUy5VaW50OEFycmF5RnJvbVNlbGYsIFMuU3RyaW5nLCB7XG5cdGRlY29kZTogKGRhdGEpID0+IG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShkYXRhKSxcblx0ZW5jb2RlOiAoZGF0YSkgPT4gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGRhdGEpXG59KTtcbmNvbnN0IFBhcnNlZFRva2VuID0gUy5TdHJ1Y3Qoe1xuXHRhcGlLZXk6IFMuUmVkYWN0ZWQoUy5TdHJpbmcucGlwZShTLnN0YXJ0c1dpdGgoXCJza19cIikpKSxcblx0YXBwSWQ6IFMuU3RyaW5nLFxuXHRyZWdpb25zOiBTLk5vbkVtcHR5QXJyYXkoUy5TdHJpbmcpLFxuXHRpbmdlc3RIb3N0OiBTLlN0cmluZy5waXBlKFMub3B0aW9uYWxXaXRoKHsgZGVmYXVsdDogKCkgPT4gXCJpbmdlc3QudXBsb2FkdGhpbmcuY29tXCIgfSkpXG59KTtcbmNvbnN0IFVwbG9hZFRoaW5nVG9rZW4gPSBTLlVpbnQ4QXJyYXlGcm9tQmFzZTY0LnBpcGUoUy5jb21wb3NlKERlY29kZVN0cmluZyksIFMuY29tcG9zZShTLnBhcnNlSnNvbihQYXJzZWRUb2tlbikpKTtcbi8qKlxuKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKiA9PT09PT09PT09PT09PT09PT09PT09PT0gRmlsZSBUeXBlIEhpZXJhcmNoeSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4qL1xuLyoqXG4qIFByb3BlcnRpZXMgZnJvbSB0aGUgd2ViIEZpbGUgb2JqZWN0LCB0aGlzIGlzIHdoYXQgdGhlIGNsaWVudCBzZW5kcyB3aGVuIGluaXRpYXRpbmcgYW4gdXBsb2FkXG4qL1xudmFyIEZpbGVVcGxvYWREYXRhID0gY2xhc3MgZXh0ZW5kcyBTLkNsYXNzKFwiRmlsZVVwbG9hZERhdGFcIikoe1xuXHRuYW1lOiBTLlN0cmluZyxcblx0c2l6ZTogUy5OdW1iZXIsXG5cdHR5cGU6IFMuU3RyaW5nLFxuXHRsYXN0TW9kaWZpZWQ6IFMuTnVtYmVyLnBpcGUoUy5vcHRpb25hbClcbn0pIHt9O1xuLyoqXG4qIGAubWlkZGxld2FyZSgpYCBjYW4gYWRkIGEgY3VzdG9tSWQgdG8gdGhlIGluY29taW5nIGZpbGUgZGF0YVxuKi9cbnZhciBGaWxlVXBsb2FkRGF0YVdpdGhDdXN0b21JZCA9IGNsYXNzIGV4dGVuZHMgRmlsZVVwbG9hZERhdGEuZXh0ZW5kKFwiRmlsZVVwbG9hZERhdGFXaXRoQ3VzdG9tSWRcIikoeyBjdXN0b21JZDogUy5OdWxsT3IoUy5TdHJpbmcpIH0pIHt9O1xuLyoqXG4qIFdoZW4gZmlsZXMgYXJlIHVwbG9hZGVkLCB3ZSBnZXQgYmFja1xuKiAtIGEga2V5XG4qIC0gVVJMcyBmb3IgdGhlIGZpbGVcbiogLSB0aGUgaGFzaCAobWQ1LWhleCkgb2YgdGhlIHVwbG9hZGVkIGZpbGUncyBjb250ZW50c1xuKi9cbnZhciBVcGxvYWRlZEZpbGVEYXRhID0gY2xhc3MgZXh0ZW5kcyBGaWxlVXBsb2FkRGF0YVdpdGhDdXN0b21JZC5leHRlbmQoXCJVcGxvYWRlZEZpbGVEYXRhXCIpKHtcblx0a2V5OiBTLlN0cmluZyxcblx0dXJsOiBTLlN0cmluZyxcblx0YXBwVXJsOiBTLlN0cmluZyxcblx0dWZzVXJsOiBTLlN0cmluZyxcblx0ZmlsZUhhc2g6IFMuU3RyaW5nXG59KSB7fTtcbnZhciBNZXRhZGF0YUZldGNoU3RyZWFtUGFydCA9IGNsYXNzIGV4dGVuZHMgUy5DbGFzcyhcIk1ldGFkYXRhRmV0Y2hTdHJlYW1QYXJ0XCIpKHtcblx0cGF5bG9hZDogUy5TdHJpbmcsXG5cdHNpZ25hdHVyZTogUy5TdHJpbmcsXG5cdGhvb2s6IFVwbG9hZFRoaW5nSG9va1xufSkge307XG52YXIgTWV0YWRhdGFGZXRjaFJlc3BvbnNlID0gY2xhc3MgZXh0ZW5kcyBTLkNsYXNzKFwiTWV0YWRhdGFGZXRjaFJlc3BvbnNlXCIpKHsgb2s6IFMuQm9vbGVhbiB9KSB7fTtcbnZhciBDYWxsYmFja1Jlc3VsdFJlc3BvbnNlID0gY2xhc3MgZXh0ZW5kcyBTLkNsYXNzKFwiQ2FsbGJhY2tSZXN1bHRSZXNwb25zZVwiKSh7IG9rOiBTLkJvb2xlYW4gfSkge307XG4vKipcbiogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiogPT09PT09PT09PT09PT09PT09PT09PT09IENsaWVudCBBY3Rpb24gUGF5bG9hZHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuKi9cbnZhciBVcGxvYWRBY3Rpb25QYXlsb2FkID0gY2xhc3MgZXh0ZW5kcyBTLkNsYXNzKFwiVXBsb2FkQWN0aW9uUGF5bG9hZFwiKSh7XG5cdGZpbGVzOiBTLkFycmF5KEZpbGVVcGxvYWREYXRhKSxcblx0aW5wdXQ6IFMuVW5rbm93blxufSkge307XG5cbi8vI2VuZHJlZ2lvblxuZXhwb3J0IHsgQWN0aW9uVHlwZSwgQ2FsbGJhY2tSZXN1bHRSZXNwb25zZSwgTWV0YWRhdGFGZXRjaFJlc3BvbnNlLCBNZXRhZGF0YUZldGNoU3RyZWFtUGFydCwgVXBsb2FkQWN0aW9uUGF5bG9hZCwgVXBsb2FkVGhpbmdIb29rLCBVcGxvYWRUaGluZ1Rva2VuIGFzIFVwbG9hZFRoaW5nVG9rZW4kMSwgVXBsb2FkZWRGaWxlRGF0YSBhcyBVcGxvYWRlZEZpbGVEYXRhJDEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNoYXJlZC1zY2hlbWFzLUJJRkRvcVBGLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/shared-schemas-BIFDoqPF.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/upload-builder-e0_p9NOT.js":
/*!******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/upload-builder-e0_p9NOT.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdapterArguments: () => (/* binding */ AdapterArguments),\n/* harmony export */   ApiUrl: () => (/* binding */ ApiUrl),\n/* harmony export */   IngestUrl: () => (/* binding */ IngestUrl),\n/* harmony export */   UTFiles$1: () => (/* binding */ UTFiles),\n/* harmony export */   UTRegion$1: () => (/* binding */ UTRegion),\n/* harmony export */   UTToken: () => (/* binding */ UTToken),\n/* harmony export */   UfsAppIdLocation: () => (/* binding */ UfsAppIdLocation),\n/* harmony export */   UfsHost: () => (/* binding */ UfsHost),\n/* harmony export */   configProvider: () => (/* binding */ configProvider),\n/* harmony export */   createBuilder: () => (/* binding */ createBuilder),\n/* harmony export */   createRequestHandler: () => (/* binding */ createRequestHandler),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig),\n/* harmony export */   logHttpClientError: () => (/* binding */ logHttpClientError),\n/* harmony export */   logHttpClientResponse: () => (/* binding */ logHttpClientResponse),\n/* harmony export */   makeAdapterHandler: () => (/* binding */ makeAdapterHandler),\n/* harmony export */   makeRuntime: () => (/* binding */ makeRuntime)\n/* harmony export */ });\n/* harmony import */ var _package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./package-Beb-iarE.js */ \"(rsc)/./node_modules/uploadthing/dist/package-Beb-iarE.js\");\n/* harmony import */ var _deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./deprecations-pLmw6Ytd.js */ \"(rsc)/./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js\");\n/* harmony import */ var _shared_schemas_BIFDoqPF_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shared-schemas-BIFDoqPF.js */ \"(rsc)/./node_modules/uploadthing/dist/shared-schemas-BIFDoqPF.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _effect_platform_HttpApp__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! @effect/platform/HttpApp */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpApp.js\");\n/* harmony import */ var _effect_platform_HttpBody__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! @effect/platform/HttpBody */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpBody.js\");\n/* harmony import */ var _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! @effect/platform/HttpClient */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClient.js\");\n/* harmony import */ var _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! @effect/platform/HttpClientRequest */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientRequest.js\");\n/* harmony import */ var _effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! @effect/platform/HttpClientResponse */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpIncomingMessage.js\");\n/* harmony import */ var _effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! @effect/platform/HttpClientResponse */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientResponse.js\");\n/* harmony import */ var _effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @effect/platform/HttpRouter */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpRouter.js\");\n/* harmony import */ var _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! @effect/platform/HttpServerRequest */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpServerRequest.js\");\n/* harmony import */ var _effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! @effect/platform/HttpServerResponse */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpServerResponse.js\");\n/* harmony import */ var effect_Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Config */ \"(rsc)/./node_modules/effect/dist/esm/Config.js\");\n/* harmony import */ var effect_Context__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! effect/Context */ \"(rsc)/./node_modules/effect/dist/esm/Context.js\");\n/* harmony import */ var effect_Match__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! effect/Match */ \"(rsc)/./node_modules/effect/dist/esm/Match.js\");\n/* harmony import */ var effect_Redacted__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! effect/Redacted */ \"(rsc)/./node_modules/effect/dist/esm/Redacted.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/ConfigProvider */ \"(rsc)/./node_modules/effect/dist/esm/ConfigProvider.js\");\n/* harmony import */ var effect_Stream__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! effect/Stream */ \"(rsc)/./node_modules/effect/dist/esm/Stream.js\");\n/* harmony import */ var effect_ConfigError__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! effect/ConfigError */ \"(rsc)/./node_modules/effect/dist/esm/ConfigError.js\");\n/* harmony import */ var effect_Either__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! effect/Either */ \"(rsc)/./node_modules/effect/dist/esm/Either.js\");\n/* harmony import */ var effect_Layer__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! effect/Layer */ \"(rsc)/./node_modules/effect/dist/esm/Layer.js\");\n/* harmony import */ var effect_Logger__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! effect/Logger */ \"(rsc)/./node_modules/effect/dist/esm/Logger.js\");\n/* harmony import */ var effect_LogLevel__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! effect/LogLevel */ \"(rsc)/./node_modules/effect/dist/esm/LogLevel.js\");\n/* harmony import */ var effect_Cause__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! effect/Cause */ \"(rsc)/./node_modules/effect/dist/esm/Cause.js\");\n/* harmony import */ var effect_Data__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! effect/Data */ \"(rsc)/./node_modules/effect/dist/esm/Data.js\");\n/* harmony import */ var effect_Runtime__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! effect/Runtime */ \"(rsc)/./node_modules/effect/dist/esm/Runtime.js\");\n/* harmony import */ var _effect_platform_FetchHttpClient__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @effect/platform/FetchHttpClient */ \"(rsc)/./node_modules/@effect/platform/dist/esm/FetchHttpClient.js\");\n/* harmony import */ var _effect_platform_Headers__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @effect/platform/Headers */ \"(rsc)/./node_modules/@effect/platform/dist/esm/Headers.js\");\n/* harmony import */ var effect_FiberRef__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! effect/FiberRef */ \"(rsc)/./node_modules/effect/dist/esm/FiberRef.js\");\n/* harmony import */ var effect_ManagedRuntime__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! effect/ManagedRuntime */ \"(rsc)/./node_modules/effect/dist/esm/ManagedRuntime.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/_internal/config.ts\n/**\n* Merge in `import.meta.env` to the built-in `process.env` provider\n* Prefix keys with `UPLOADTHING_` so we can reference just the name.\n* @example\n* process.env.UPLOADTHING_TOKEN = \"foo\"\n* Config.string(\"token\"); // Config<\"foo\">\n*/\nconst envProvider = effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromEnv().pipe(effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.orElse(() => effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromMap(new Map(Object.entries((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.filterDefinedObjectValues)( null ?? {}))), { pathDelim: \"_\" })), effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.nested(\"uploadthing\"), effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.constantCase);\n/**\n* Config provider that merges the options from the object\n* and environment variables prefixed with `UPLOADTHING_`.\n* @remarks Options take precedence over environment variables.\n*/\nconst configProvider = (options) => effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromJson(options ?? {}).pipe(effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.orElse(() => envProvider));\nconst IsDevelopment = effect_Config__WEBPACK_IMPORTED_MODULE_2__.boolean(\"isDev\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.orElse(() => effect_Config__WEBPACK_IMPORTED_MODULE_2__.succeed(typeof process !== \"undefined\" ? \"development\" : void 0).pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((_) => _ === \"development\"))), effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(false));\nconst UTToken = effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Config(\"token\", _shared_schemas_BIFDoqPF_js__WEBPACK_IMPORTED_MODULE_4__.UploadThingToken$1).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTags({ ConfigError: (e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\tcode: e._op === \"InvalidData\" ? \"INVALID_SERVER_CONFIG\" : \"MISSING_ENV\",\n\tmessage: e._op === \"InvalidData\" ? \"Invalid token. A token is a base64 encoded JSON object matching { apiKey: string, appId: string, regions: string[] }.\" : \"Missing token. Please set the `UPLOADTHING_TOKEN` environment variable or provide a token manually through config.\",\n\tcause: e\n}) }));\nconst ApiUrl = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"apiUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"https://api.uploadthing.com\"), effect_Config__WEBPACK_IMPORTED_MODULE_2__.mapAttempt((_) => new URL(_)), effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((url) => url.href.replace(/\\/$/, \"\")));\nconst IngestUrl = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fn(function* (preferredRegion) {\n\tconst { regions, ingestHost } = yield* UTToken;\n\tconst region = preferredRegion ? regions.find((r) => r === preferredRegion) ?? regions[0] : regions[0];\n\treturn yield* effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"ingestUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(`https://${region}.${ingestHost}`), effect_Config__WEBPACK_IMPORTED_MODULE_2__.mapAttempt((_) => new URL(_)), effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((url) => url.href.replace(/\\/$/, \"\")));\n});\nconst UtfsHost = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"utfsHost\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"utfs.io\"));\nconst UfsHost = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"ufsHost\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"ufs.sh\"));\nconst UfsAppIdLocation = effect_Config__WEBPACK_IMPORTED_MODULE_2__.literal(\"subdomain\", \"path\")(\"ufsAppIdLocation\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"subdomain\"));\n\n//#endregion\n//#region src/_internal/error-formatter.ts\nfunction defaultErrorFormatter(error) {\n\treturn { message: error.message };\n}\nfunction formatError(error, router) {\n\tconst firstSlug = Object.keys(router)[0];\n\tconst errorFormatter = firstSlug ? router[firstSlug]?.errorFormatter ?? defaultErrorFormatter : defaultErrorFormatter;\n\treturn errorFormatter(error);\n}\n\n//#endregion\n//#region src/_internal/jsonl.ts\nconst handleJsonLineStream = (schema, onChunk) => (stream) => {\n\tlet buf = \"\";\n\treturn stream.pipe(effect_Stream__WEBPACK_IMPORTED_MODULE_6__.decodeText(), effect_Stream__WEBPACK_IMPORTED_MODULE_6__.mapEffect((chunk) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\tbuf += chunk;\n\t\tconst parts = buf.split(\"\\n\");\n\t\tconst validChunks = [];\n\t\tfor (const part of parts) try {\n\t\t\tvalidChunks.push(JSON.parse(part));\n\t\t\tbuf = buf.slice(part.length + 1);\n\t\t} catch {}\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Received chunks\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"chunk\", chunk), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"parsedChunks\", validChunks), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"buf\", buf));\n\t\treturn validChunks;\n\t})), effect_Stream__WEBPACK_IMPORTED_MODULE_6__.mapEffect(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Array(schema))), effect_Stream__WEBPACK_IMPORTED_MODULE_6__.mapEffect(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach((part) => onChunk(part))), effect_Stream__WEBPACK_IMPORTED_MODULE_6__.runDrain, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"handleJsonLineStream\"));\n};\n\n//#endregion\n//#region src/_internal/logger.ts\n/**\n* Config.logLevel counter-intuitively accepts LogLevel[\"label\"]\n* instead of a literal, ripping it and changing to accept literal\n* Effect 4.0 will change this to accept a literal and then we can\n* remove this and go back to the built-in validator.\n*/\nconst ConfigLogLevel = (name) => {\n\tconst config = effect_Config__WEBPACK_IMPORTED_MODULE_2__.mapOrFail(effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(), (literal) => {\n\t\tconst level = effect_LogLevel__WEBPACK_IMPORTED_MODULE_7__.allLevels.find((level$1) => level$1._tag === literal);\n\t\treturn level === void 0 ? effect_Either__WEBPACK_IMPORTED_MODULE_8__.left(effect_ConfigError__WEBPACK_IMPORTED_MODULE_9__.InvalidData([], `Expected a log level but received ${literal}`)) : effect_Either__WEBPACK_IMPORTED_MODULE_8__.right(level);\n\t});\n\treturn name === void 0 ? config : effect_Config__WEBPACK_IMPORTED_MODULE_2__.nested(config, name);\n};\nconst withMinimalLogLevel = ConfigLogLevel(\"logLevel\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(effect_LogLevel__WEBPACK_IMPORTED_MODULE_7__.Info), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.andThen((level) => effect_Logger__WEBPACK_IMPORTED_MODULE_10__.minimumLogLevel(level)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapError((e) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(\"Invalid log level\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"error\", e))), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ConfigError\", (e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\tcode: \"INVALID_SERVER_CONFIG\",\n\tmessage: \"Invalid server configuration\",\n\tcause: e\n})), effect_Layer__WEBPACK_IMPORTED_MODULE_11__.unwrapEffect);\nconst LogFormat = effect_Config__WEBPACK_IMPORTED_MODULE_2__.literal(\"json\", \"logFmt\", \"structured\", \"pretty\")(\"logFormat\");\nconst withLogFormat = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst isDev = yield* IsDevelopment;\n\tconst logFormat = yield* LogFormat.pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(isDev ? \"pretty\" : \"json\"));\n\treturn effect_Logger__WEBPACK_IMPORTED_MODULE_10__[logFormat];\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ConfigError\", (e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\tcode: \"INVALID_SERVER_CONFIG\",\n\tmessage: \"Invalid server configuration\",\n\tcause: e\n})), effect_Layer__WEBPACK_IMPORTED_MODULE_11__.unwrapEffect);\nconst logHttpClientResponse = (message, opts) => {\n\tconst mixin = opts?.mixin ?? \"json\";\n\tconst level = effect_LogLevel__WEBPACK_IMPORTED_MODULE_7__.fromLiteral(opts?.level ?? \"Debug\");\n\treturn (response) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(mixin !== \"None\" ? response[mixin] : effect_Effect__WEBPACK_IMPORTED_MODULE_5__[\"void\"], () => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logWithLevel(level, `${message} (${response.status})`).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"response\", response)));\n};\nconst logHttpClientError = (message) => (err) => err._tag === \"ResponseError\" ? logHttpClientResponse(message, { level: \"Error\" })(err.response) : effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(message).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"error\", err));\n\n//#endregion\n//#region src/_internal/parser.ts\nvar ParserError = class extends effect_Data__WEBPACK_IMPORTED_MODULE_12__.TaggedError(\"ParserError\") {\n\tmessage = \"Input validation failed. The original error with it's validation issues is in the error cause.\";\n};\nfunction getParseFn(parser) {\n\tif (\"parseAsync\" in parser && typeof parser.parseAsync === \"function\")\n /**\n\t* Zod\n\t* TODO (next major): Consider wrapping ZodError in ParserError\n\t*/\n\treturn parser.parseAsync;\n\tif (effect_Schema__WEBPACK_IMPORTED_MODULE_3__.isSchema(parser))\n /**\n\t* Effect Schema\n\t*/\n\treturn (value) => effect_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknownPromise(parser)(value).catch((error) => {\n\t\tthrow new ParserError({ cause: effect_Cause__WEBPACK_IMPORTED_MODULE_13__.squash(error[effect_Runtime__WEBPACK_IMPORTED_MODULE_14__.FiberFailureCauseId]) });\n\t});\n\tif (\"~standard\" in parser)\n /**\n\t* Standard Schema\n\t* TODO (next major): Consider moving this to the top of the function\n\t*/\n\treturn async (value) => {\n\t\tconst result = await parser[\"~standard\"].validate(value);\n\t\tif (result.issues) throw new ParserError({ cause: result.issues });\n\t\treturn result.value;\n\t};\n\tthrow new Error(\"Invalid parser\");\n}\n\n//#endregion\n//#region src/_internal/route-config.ts\nvar FileSizeMismatch = class extends effect_Data__WEBPACK_IMPORTED_MODULE_12__.Error {\n\t_tag = \"FileSizeMismatch\";\n\tname = \"FileSizeMismatchError\";\n\tconstructor(type, max, actual) {\n\t\tconst reason = `You uploaded a ${type} file that was ${(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.bytesToFileSize)(actual)}, but the limit for that type is ${max}`;\n\t\tsuper({ reason });\n\t}\n};\nvar FileCountMismatch = class extends effect_Data__WEBPACK_IMPORTED_MODULE_12__.Error {\n\t_tag = \"FileCountMismatch\";\n\tname = \"FileCountMismatchError\";\n\tconstructor(type, boundtype, bound, actual) {\n\t\tconst reason = `You uploaded ${actual} file(s) of type '${type}', but the ${boundtype} for that type is ${bound}`;\n\t\tsuper({ reason });\n\t}\n};\nconst assertFilesMeetConfig = (files, routeConfig) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst counts = {};\n\tfor (const file of files) {\n\t\tconst type = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(routeConfig));\n\t\tcounts[type] = (counts[type] ?? 0) + 1;\n\t\tconst sizeLimit = routeConfig[type]?.maxFileSize;\n\t\tif (!sizeLimit) return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.InvalidRouteConfigError(type, \"maxFileSize\");\n\t\tconst sizeLimitBytes = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fileSizeToBytes)(sizeLimit);\n\t\tif (file.size > sizeLimitBytes) return yield* new FileSizeMismatch(type, sizeLimit, file.size);\n\t}\n\tfor (const _key in counts) {\n\t\tconst key = _key;\n\t\tconst config = routeConfig[key];\n\t\tif (!config) return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.InvalidRouteConfigError(key);\n\t\tconst count = counts[key];\n\t\tconst min = config.minFileCount;\n\t\tconst max = config.maxFileCount;\n\t\tif (min > max) return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Invalid config during file count - minFileCount > maxFileCount\",\n\t\t\tcause: `minFileCount must be less than maxFileCount for key ${key}. got: ${min} > ${max}`\n\t\t});\n\t\tif (count != null && count < min) return yield* new FileCountMismatch(key, \"minimum\", min, count);\n\t\tif (count != null && count > max) return yield* new FileCountMismatch(key, \"maximum\", max, count);\n\t}\n\treturn null;\n});\nconst extractRouterConfig = (router) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(router), (slug) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fillInputRouteConfig)(router[slug].routerConfig), (config) => ({\n\tslug,\n\tconfig\n})));\n\n//#endregion\n//#region src/_internal/runtime.ts\nconst makeRuntime = (fetch, config) => {\n\tconst fetchHttpClient = effect_Layer__WEBPACK_IMPORTED_MODULE_11__.provideMerge(_effect_platform_FetchHttpClient__WEBPACK_IMPORTED_MODULE_15__.layer, effect_Layer__WEBPACK_IMPORTED_MODULE_11__.succeed(_effect_platform_FetchHttpClient__WEBPACK_IMPORTED_MODULE_15__.Fetch, fetch));\n\tconst withRedactedHeaders = effect_Layer__WEBPACK_IMPORTED_MODULE_11__.effectDiscard(effect_FiberRef__WEBPACK_IMPORTED_MODULE_16__.update(_effect_platform_Headers__WEBPACK_IMPORTED_MODULE_17__.currentRedactedNames, (_) => _.concat([\"x-uploadthing-api-key\"])));\n\tconst layer = effect_Layer__WEBPACK_IMPORTED_MODULE_11__.provide(effect_Layer__WEBPACK_IMPORTED_MODULE_11__.mergeAll(withLogFormat, withMinimalLogLevel, fetchHttpClient, withRedactedHeaders), effect_Layer__WEBPACK_IMPORTED_MODULE_11__.setConfigProvider(configProvider(config)));\n\treturn effect_ManagedRuntime__WEBPACK_IMPORTED_MODULE_18__.make(layer);\n};\n\n//#endregion\n//#region src/_internal/types.ts\n/**\n* Marker used to select the region based on the incoming request\n*/\nconst UTRegion = Symbol(\"uploadthing-region-symbol\");\n/**\n* Marker used to append a `customId` to the incoming file data in `.middleware()`\n* @example\n* ```ts\n* .middleware((opts) => {\n*   return {\n*     [UTFiles]: opts.files.map((file) => ({\n*       ...file,\n*       customId: generateId(),\n*     }))\n*   };\n* })\n* ```\n*/\nconst UTFiles = Symbol(\"uploadthing-custom-id-symbol\");\n\n//#endregion\n//#region src/_internal/handler.ts\nvar AdapterArguments = class extends effect_Context__WEBPACK_IMPORTED_MODULE_19__.Tag(\"uploadthing/AdapterArguments\")() {};\n/**\n* Create a request handler adapter for any framework or server library.\n* Refer to the existing adapters for examples on how to use this function.\n* @public\n*\n* @param makeAdapterArgs - Function that takes the args from your framework and returns an Effect that resolves to the adapter args.\n* These args are passed to the `.middleware`, `.onUploadComplete`, and `.onUploadError` hooks.\n* @param toRequest - Function that takes the args from your framework and returns an Effect that resolves to a web Request object.\n* @param opts - The router config and other options that are normally passed to `createRequestHandler` of official adapters\n* @param beAdapter - [Optional] The adapter name of the adapter, used for telemetry purposes\n* @returns A function that takes the args from your framework and returns a promise that resolves to a Response object.\n*/\nconst makeAdapterHandler = (makeAdapterArgs, toRequest, opts, beAdapter) => {\n\tconst managed = makeRuntime(opts.config?.fetch, opts.config);\n\tconst handle = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.promise(() => managed.runtime().then(_effect_platform_HttpApp__WEBPACK_IMPORTED_MODULE_20__.toWebHandlerRuntime));\n\tconst app = (...args) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.promise(() => managed.runPromise(createRequestHandler(opts, beAdapter ?? \"custom\"))), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.provideServiceEffect(AdapterArguments, makeAdapterArgs(...args)));\n\treturn async (...args) => {\n\t\tconst result = await handle.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.ap(app(...args)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.ap(toRequest(...args)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"requestHandler\"), managed.runPromise);\n\t\treturn result;\n\t};\n};\nconst createRequestHandler = (opts, beAdapter) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst isDevelopment = yield* IsDevelopment;\n\tconst routerConfig = yield* extractRouterConfig(opts.router);\n\tconst handleDaemon = (() => {\n\t\tif (opts.config?.handleDaemonPromise) return opts.config.handleDaemonPromise;\n\t\treturn isDevelopment ? \"void\" : \"await\";\n\t})();\n\tif (isDevelopment && handleDaemon === \"await\") return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\tcode: \"INVALID_SERVER_CONFIG\",\n\t\tmessage: \"handleDaemonPromise: \\\"await\\\" is forbidden in development.\"\n\t});\n\tconst GET = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\treturn yield* _effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__.json(routerConfig);\n\t});\n\tconst POST = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\tconst { \"uploadthing-hook\": uploadthingHook, \"x-uploadthing-package\": fePackage, \"x-uploadthing-version\": clientVersion } = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.schemaHeaders(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n\t\t\t\"uploadthing-hook\": _shared_schemas_BIFDoqPF_js__WEBPACK_IMPORTED_MODULE_4__.UploadThingHook.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.optional),\n\t\t\t\"x-uploadthing-package\": effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.optionalWith({ default: () => \"unknown\" })),\n\t\t\t\"x-uploadthing-version\": effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.optionalWith({ default: () => _package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_23__.version }))\n\t\t}));\n\t\tif (clientVersion !== _package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_23__.version) {\n\t\t\tconst serverVersion = _package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_23__.version;\n\t\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logWarning(\"Client version mismatch. Things may not work as expected, please sync your versions to ensure compatibility.\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs({\n\t\t\t\tclientVersion,\n\t\t\t\tserverVersion\n\t\t\t}));\n\t\t}\n\t\tconst { slug, actionType } = yield* _effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__.schemaParams(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n\t\t\tactionType: _shared_schemas_BIFDoqPF_js__WEBPACK_IMPORTED_MODULE_4__.ActionType.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.optional),\n\t\t\tslug: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String\n\t\t}));\n\t\tconst uploadable = opts.router[slug];\n\t\tif (!uploadable) {\n\t\t\tconst msg = `No file route found for slug ${slug}`;\n\t\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(msg);\n\t\t\treturn yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\t\tcode: \"NOT_FOUND\",\n\t\t\t\tmessage: msg\n\t\t\t});\n\t\t}\n\t\tconst { body, fiber } = yield* effect_Match__WEBPACK_IMPORTED_MODULE_25__.value({\n\t\t\tactionType,\n\t\t\tuploadthingHook\n\t\t}).pipe(effect_Match__WEBPACK_IMPORTED_MODULE_25__.when({\n\t\t\tactionType: \"upload\",\n\t\t\tuploadthingHook: void 0\n\t\t}, () => handleUploadAction({\n\t\t\tuploadable,\n\t\t\tfePackage,\n\t\t\tbeAdapter,\n\t\t\tslug\n\t\t})), effect_Match__WEBPACK_IMPORTED_MODULE_25__.when({\n\t\t\tactionType: void 0,\n\t\t\tuploadthingHook: \"callback\"\n\t\t}, () => handleCallbackRequest({\n\t\t\tuploadable,\n\t\t\tfePackage,\n\t\t\tbeAdapter\n\t\t})), effect_Match__WEBPACK_IMPORTED_MODULE_25__.when({\n\t\t\tactionType: void 0,\n\t\t\tuploadthingHook: \"error\"\n\t\t}, () => handleErrorRequest({ uploadable })), effect_Match__WEBPACK_IMPORTED_MODULE_25__.orElse(() => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.succeed({\n\t\t\tbody: null,\n\t\t\tfiber: null\n\t\t})));\n\t\tif (fiber) {\n\t\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Running fiber as daemon\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"handleDaemon\", handleDaemon));\n\t\t\tif (handleDaemon === \"void\") {} else if (handleDaemon === \"await\") yield* fiber.await;\n\t\t\telse if (typeof handleDaemon === \"function\") handleDaemon(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.runPromise(fiber.await));\n\t\t}\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Sending response\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"body\", body));\n\t\treturn yield* _effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__.json(body);\n\t}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTags({\n\t\tParseError: (e) => _effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__.json(formatError(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Invalid input\",\n\t\t\tcause: e.message\n\t\t}), opts.router), { status: 400 }),\n\t\tUploadThingError: (e) => _effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__.json(formatError(e, opts.router), { status: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.getStatusCodeFromError)(e) })\n\t}));\n\tconst appendResponseHeaders = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map(_effect_platform_HttpServerResponse__WEBPACK_IMPORTED_MODULE_21__.setHeader(\"x-uploadthing-version\", _package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_23__.version));\n\treturn _effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__.empty.pipe(_effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__.get(\"*\", GET), _effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__.post(\"*\", POST), _effect_platform_HttpRouter__WEBPACK_IMPORTED_MODULE_24__.use(appendResponseHeaders));\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"createRequestHandler\"));\nconst handleErrorRequest = (opts) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst { uploadable } = opts;\n\tconst request = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.HttpServerRequest;\n\tconst { apiKey } = yield* UTToken;\n\tconst verified = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.verifySignature)(yield* request.text, request.headers[\"x-uploadthing-signature\"] ?? null, apiKey);\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(`Signature verified: ${verified}`);\n\tif (!verified) {\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(\"Invalid signature\");\n\t\treturn yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Invalid signature\"\n\t\t});\n\t}\n\tconst requestInput = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.schemaBodyJson(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n\t\tfileKey: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n\t\terror: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String\n\t}));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Handling error callback request with input:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"json\", requestInput));\n\tconst adapterArgs = yield* AdapterArguments;\n\tconst fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tryPromise({\n\t\ttry: async () => uploadable.onUploadError({\n\t\t\t...adapterArgs,\n\t\t\terror: new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\t\tcode: \"UPLOAD_FAILED\",\n\t\t\t\tmessage: `Upload failed for ${requestInput.fileKey}: ${requestInput.error}`\n\t\t\t}),\n\t\t\tfileKey: requestInput.fileKey\n\t\t}),\n\t\tcatch: (error) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"INTERNAL_SERVER_ERROR\",\n\t\t\tmessage: \"Failed to run onUploadError\",\n\t\t\tcause: error\n\t\t})\n\t}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapError((error) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(\"Failed to run onUploadError. You probably shouldn't be throwing errors here.\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"error\", error)))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forkDaemon);\n\treturn {\n\t\tbody: null,\n\t\tfiber\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"handleErrorRequest\"));\nconst handleCallbackRequest = (opts) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst { uploadable, fePackage, beAdapter } = opts;\n\tconst request = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.HttpServerRequest;\n\tconst { apiKey } = yield* UTToken;\n\tconst verified = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.verifySignature)(yield* request.text, request.headers[\"x-uploadthing-signature\"] ?? null, apiKey);\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(`Signature verified: ${verified}`);\n\tif (!verified) {\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(\"Invalid signature\");\n\t\treturn yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Invalid signature\"\n\t\t});\n\t}\n\tconst requestInput = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.schemaBodyJson(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({\n\t\tstatus: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n\t\tfile: _shared_schemas_BIFDoqPF_js__WEBPACK_IMPORTED_MODULE_4__.UploadedFileData$1,\n\t\torigin: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n\t\tmetadata: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Record({\n\t\t\tkey: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.String,\n\t\t\tvalue: effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Unknown\n\t\t})\n\t}));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Handling callback request with input:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"json\", requestInput));\n\t/**\n\t* Run `.onUploadComplete` as a daemon to prevent the\n\t* request from UT to potentially timeout.\n\t*/\n\tconst fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\tconst adapterArgs = yield* AdapterArguments;\n\t\tconst serverData = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tryPromise({\n\t\t\ttry: async () => uploadable.onUploadComplete({\n\t\t\t\t...adapterArgs,\n\t\t\t\tfile: {\n\t\t\t\t\t...requestInput.file,\n\t\t\t\t\tget url() {\n\t\t\t\t\t\t(0,_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_26__.logDeprecationWarning)(\"`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n\t\t\t\t\t\treturn requestInput.file.url;\n\t\t\t\t\t},\n\t\t\t\t\tget appUrl() {\n\t\t\t\t\t\t(0,_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_26__.logDeprecationWarning)(\"`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n\t\t\t\t\t\treturn requestInput.file.appUrl;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmetadata: requestInput.metadata\n\t\t\t}),\n\t\t\tcatch: (error) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\t\tcode: \"INTERNAL_SERVER_ERROR\",\n\t\t\t\tmessage: \"Failed to run onUploadComplete. You probably shouldn't be throwing errors here.\",\n\t\t\t\tcause: error\n\t\t\t})\n\t\t});\n\t\tconst payload = {\n\t\t\tfileKey: requestInput.file.key,\n\t\t\tcallbackData: serverData ?? null\n\t\t};\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"'onUploadComplete' callback finished. Sending response to UploadThing:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"callbackData\", payload));\n\t\tconst httpClient = (yield* _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_27__.HttpClient).pipe(_effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_27__.filterStatusOk);\n\t\tyield* _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.post(`/callback-result`).pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.prependUrl(requestInput.origin), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.setHeaders({\n\t\t\t\"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_29__.value(apiKey),\n\t\t\t\"x-uploadthing-version\": _package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_23__.version,\n\t\t\t\"x-uploadthing-be-adapter\": beAdapter,\n\t\t\t\"x-uploadthing-fe-package\": fePackage\n\t\t}), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.bodyJson(payload), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(httpClient.execute), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapError(logHttpClientError(\"Failed to register callback result\")), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(_effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_30__.schemaBodyJson(_shared_schemas_BIFDoqPF_js__WEBPACK_IMPORTED_MODULE_4__.CallbackResultResponse)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tap(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.log(\"Sent callback result to UploadThing\")), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.scoped);\n\t}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forkDaemon);\n\treturn {\n\t\tbody: null,\n\t\tfiber\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"handleCallbackRequest\"));\nconst runRouteMiddleware = (opts) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst { json: { files, input }, uploadable } = opts;\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Running middleware\");\n\tconst adapterArgs = yield* AdapterArguments;\n\tconst metadata = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tryPromise({\n\t\ttry: async () => uploadable.middleware({\n\t\t\t...adapterArgs,\n\t\t\tinput,\n\t\t\tfiles\n\t\t}),\n\t\tcatch: (error) => error instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError ? error : new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"INTERNAL_SERVER_ERROR\",\n\t\t\tmessage: \"Failed to run middleware\",\n\t\t\tcause: error\n\t\t})\n\t});\n\tif (metadata[UTFiles] && metadata[UTFiles].length !== files.length) {\n\t\tconst msg = `Expected files override to have the same length as original files, got ${metadata[UTFiles].length} but expected ${files.length}`;\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(msg);\n\t\treturn yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Files override must have the same length as files\",\n\t\t\tcause: msg\n\t\t});\n\t}\n\tconst filesWithCustomIds = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach(files, (file, idx) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\tconst theirs = metadata[UTFiles]?.[idx];\n\t\tif (theirs && theirs.size !== file.size) yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logWarning(\"File size mismatch. Reverting to original size\");\n\t\treturn {\n\t\t\tname: theirs?.name ?? file.name,\n\t\t\tsize: file.size,\n\t\t\ttype: file.type,\n\t\t\tcustomId: theirs?.customId,\n\t\t\tlastModified: theirs?.lastModified ?? Date.now()\n\t\t};\n\t}));\n\treturn {\n\t\tmetadata,\n\t\tfilesWithCustomIds,\n\t\tpreferredRegion: metadata[UTRegion]\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"runRouteMiddleware\"));\nconst handleUploadAction = (opts) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\tconst httpClient = (yield* _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_27__.HttpClient).pipe(_effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_27__.filterStatusOk);\n\tconst { uploadable, fePackage, beAdapter, slug } = opts;\n\tconst json = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.schemaBodyJson(_shared_schemas_BIFDoqPF_js__WEBPACK_IMPORTED_MODULE_4__.UploadActionPayload);\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Handling upload request\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"json\", json));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Parsing user input\");\n\tconst parsedInput = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tryPromise({\n\t\ttry: () => getParseFn(uploadable.inputParser)(json.input),\n\t\tcatch: (error) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Invalid input\",\n\t\t\tcause: error\n\t\t})\n\t});\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Input parsed successfully\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"input\", parsedInput));\n\tconst { metadata, filesWithCustomIds, preferredRegion } = yield* runRouteMiddleware({\n\t\tjson: {\n\t\t\tinput: parsedInput,\n\t\t\tfiles: json.files\n\t\t},\n\t\tuploadable\n\t});\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Parsing route config\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"routerConfig\", uploadable.routerConfig));\n\tconst parsedConfig = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fillInputRouteConfig)(uploadable.routerConfig).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"InvalidRouteConfig\", (err) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\tcode: \"BAD_REQUEST\",\n\t\tmessage: \"Invalid route config\",\n\t\tcause: err\n\t})));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Route config parsed successfully\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"routeConfig\", parsedConfig));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Validating files meet the config requirements\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"files\", json.files));\n\tyield* assertFilesMeetConfig(json.files, parsedConfig).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.mapError((e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n\t\tcode: \"BAD_REQUEST\",\n\t\tmessage: `Invalid config: ${e._tag}`,\n\t\tcause: \"reason\" in e ? e.reason : e.message\n\t})));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Files validated.\");\n\tconst fileUploadRequests = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach(filesWithCustomIds, (file) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(parsedConfig)), (type) => ({\n\t\tname: file.name,\n\t\tsize: file.size,\n\t\ttype: file.type || type,\n\t\tlastModified: file.lastModified,\n\t\tcustomId: file.customId,\n\t\tcontentDisposition: parsedConfig[type]?.contentDisposition ?? \"inline\",\n\t\tacl: parsedConfig[type]?.acl\n\t}))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTags({\n\t\tInvalidFileType: (e) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.die(e),\n\t\tUnknownFileType: (e) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.die(e)\n\t}));\n\tconst routeOptions = uploadable.routeOptions;\n\tconst { apiKey, appId } = yield* UTToken;\n\tconst ingestUrl = yield* IngestUrl(preferredRegion);\n\tconst isDev = yield* IsDevelopment;\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logDebug(\"Generating presigned URLs\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"fileUploadRequests\", fileUploadRequests), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"ingestUrl\", ingestUrl));\n\tconst presignedUrls = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forEach(fileUploadRequests, (file) => effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function* () {\n\t\tconst key = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.generateKey)(file, appId, routeOptions.getFileHashParts);\n\t\tconst url = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.generateSignedURL)(`${ingestUrl}/${key}`, apiKey, {\n\t\t\tttlInSeconds: routeOptions.presignedURLTTL,\n\t\t\tdata: {\n\t\t\t\t\"x-ut-identifier\": appId,\n\t\t\t\t\"x-ut-file-name\": file.name,\n\t\t\t\t\"x-ut-file-size\": file.size,\n\t\t\t\t\"x-ut-file-type\": file.type,\n\t\t\t\t\"x-ut-slug\": slug,\n\t\t\t\t\"x-ut-custom-id\": file.customId,\n\t\t\t\t\"x-ut-content-disposition\": file.contentDisposition,\n\t\t\t\t\"x-ut-acl\": file.acl\n\t\t\t}\n\t\t});\n\t\treturn {\n\t\t\turl,\n\t\t\tkey\n\t\t};\n\t}), { concurrency: \"unbounded\" });\n\tconst serverReq = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.HttpServerRequest;\n\tconst requestUrl = yield* _effect_platform_HttpServerRequest__WEBPACK_IMPORTED_MODULE_22__.toURL(serverReq);\n\tconst devHookRequest = yield* effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"callbackUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(requestUrl.origin + requestUrl.pathname), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.map((url) => _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.post(url).pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.appendUrlParam(\"slug\", slug))));\n\tconst metadataRequest = _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.post(\"/route-metadata\").pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.prependUrl(ingestUrl), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.setHeaders({\n\t\t\"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_29__.value(apiKey),\n\t\t\"x-uploadthing-version\": _package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_23__.version,\n\t\t\"x-uploadthing-be-adapter\": beAdapter,\n\t\t\"x-uploadthing-fe-package\": fePackage\n\t}), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.bodyJson({\n\t\tfileKeys: presignedUrls.map(({ key }) => key),\n\t\tmetadata,\n\t\tisDev,\n\t\tcallbackUrl: devHookRequest.url,\n\t\tcallbackSlug: slug,\n\t\tawaitServerData: routeOptions.awaitServerData ?? true\n\t}), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(httpClient.execute));\n\tconst handleDevStreamError = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.fn(\"handleDevStreamError\")(function* (err, chunk) {\n\t\tconst schema = effect_Schema__WEBPACK_IMPORTED_MODULE_3__.parseJson(effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Struct({ file: _shared_schemas_BIFDoqPF_js__WEBPACK_IMPORTED_MODULE_4__.UploadedFileData$1 }));\n\t\tconst parsedChunk = yield* effect_Schema__WEBPACK_IMPORTED_MODULE_3__.decodeUnknown(schema)(chunk);\n\t\tconst key = parsedChunk.file.key;\n\t\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logError(\"Failed to forward callback request from dev stream\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs({\n\t\t\tfileKey: key,\n\t\t\terror: err.message\n\t\t}));\n\t\tconst httpResponse = yield* _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.post(\"/callback-result\").pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.prependUrl(ingestUrl), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.setHeaders({\n\t\t\t\"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_29__.value(apiKey),\n\t\t\t\"x-uploadthing-version\": _package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_23__.version,\n\t\t\t\"x-uploadthing-be-adapter\": beAdapter,\n\t\t\t\"x-uploadthing-fe-package\": fePackage\n\t\t}), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.bodyJson({\n\t\t\tfileKey: key,\n\t\t\terror: `Failed to forward callback request from dev stream: ${err.message}`\n\t\t}), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(httpClient.execute));\n\t\tyield* logHttpClientResponse(\"Reported callback error to UploadThing\")(httpResponse);\n\t});\n\tconst fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__[\"if\"](isDev, {\n\t\tonTrue: () => metadataRequest.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapBoth({\n\t\t\tonSuccess: logHttpClientResponse(\"Registered metadata\", { mixin: \"None\" }),\n\t\t\tonFailure: logHttpClientError(\"Failed to register metadata\")\n\t\t}), _effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_31__.stream, handleJsonLineStream(_shared_schemas_BIFDoqPF_js__WEBPACK_IMPORTED_MODULE_4__.MetadataFetchStreamPart, (chunk) => devHookRequest.pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.setHeaders({\n\t\t\t\"uploadthing-hook\": chunk.hook,\n\t\t\t\"x-uploadthing-signature\": chunk.signature\n\t\t}), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_28__.setBody(_effect_platform_HttpBody__WEBPACK_IMPORTED_MODULE_32__.text(chunk.payload, \"application/json\")), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tap(logHttpClientResponse(\"Successfully forwarded callback request from dev stream\")), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTag(\"ResponseError\", (err) => handleDevStreamError(err, chunk.payload)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(chunk), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.asVoid, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_5__.scoped))),\n\t\tonFalse: () => metadataRequest.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.tapBoth({\n\t\t\tonSuccess: logHttpClientResponse(\"Registered metadata\"),\n\t\t\tonFailure: logHttpClientError(\"Failed to register metadata\")\n\t\t}), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.flatMap(_effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_30__.schemaBodyJson(_shared_schemas_BIFDoqPF_js__WEBPACK_IMPORTED_MODULE_4__.MetadataFetchResponse)), effect_Effect__WEBPACK_IMPORTED_MODULE_5__.scoped)\n\t}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.forkDaemon);\n\tconst presigneds = presignedUrls.map((p, i) => ({\n\t\turl: p.url,\n\t\tkey: p.key,\n\t\tname: fileUploadRequests[i].name,\n\t\tcustomId: fileUploadRequests[i].customId ?? null\n\t}));\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_5__.logInfo(\"Sending presigned URLs to client\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.annotateLogs(\"presignedUrls\", presigneds));\n\treturn {\n\t\tbody: presigneds,\n\t\tfiber\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.withLogSpan(\"handleUploadAction\"));\n\n//#endregion\n//#region src/_internal/upload-builder.ts\nfunction internalCreateBuilder(initDef = {}) {\n\tconst _def = {\n\t\t$types: {},\n\t\trouterConfig: { image: { maxFileSize: \"4MB\" } },\n\t\trouteOptions: { awaitServerData: true },\n\t\tinputParser: {\n\t\t\tparseAsync: () => Promise.resolve(void 0),\n\t\t\t_input: void 0,\n\t\t\t_output: void 0\n\t\t},\n\t\tmiddleware: () => ({}),\n\t\tonUploadError: () => {},\n\t\tonUploadComplete: () => void 0,\n\t\terrorFormatter: initDef.errorFormatter ?? defaultErrorFormatter,\n\t\t...initDef\n\t};\n\treturn {\n\t\tinput(userParser) {\n\t\t\treturn internalCreateBuilder({\n\t\t\t\t..._def,\n\t\t\t\tinputParser: userParser\n\t\t\t});\n\t\t},\n\t\tmiddleware(userMiddleware) {\n\t\t\treturn internalCreateBuilder({\n\t\t\t\t..._def,\n\t\t\t\tmiddleware: userMiddleware\n\t\t\t});\n\t\t},\n\t\tonUploadComplete(userUploadComplete) {\n\t\t\treturn {\n\t\t\t\t..._def,\n\t\t\t\tonUploadComplete: userUploadComplete\n\t\t\t};\n\t\t},\n\t\tonUploadError(userOnUploadError) {\n\t\t\treturn internalCreateBuilder({\n\t\t\t\t..._def,\n\t\t\t\tonUploadError: userOnUploadError\n\t\t\t});\n\t\t}\n\t};\n}\n/**\n* Create a builder for your backend adapter.\n* Refer to the existing adapters for examples on how to use this function.\n* @public\n*\n* @param opts - Options for the builder\n* @returns A file route builder for making UploadThing file routes\n*/\nfunction createBuilder(opts) {\n\treturn (input, config) => {\n\t\treturn internalCreateBuilder({\n\t\t\trouterConfig: input,\n\t\t\trouteOptions: config ?? {},\n\t\t\t...opts\n\t\t});\n\t};\n}\n\n//#endregion\n\n//# sourceMappingURL=upload-builder-e0_p9NOT.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC91cGxvYWQtYnVpbGRlci1lMF9wOU5PVC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWdEO0FBQ21CO0FBQ3FMO0FBQ2U7QUFDN047QUFDQTtBQUNBO0FBQ0E7QUFDRjtBQUNZO0FBQ0U7QUFDSTtBQUNjO0FBQ0U7QUFDaEI7QUFDYztBQUNFO0FBQ2hDO0FBQ0E7QUFDRjtBQUNFO0FBQ0o7QUFDTTtBQUNQO0FBQ0Y7QUFDTztBQUNBO0FBQ2M7QUFDaEI7QUFDVTtBQUNSO0FBQ0Y7QUFDRjtBQUNFO0FBQ0k7QUFDTjtBQUNBO0FBQ0Y7QUFDTTtBQUMwQjtBQUNoQjtBQUNSO0FBQ1k7O0FBRXhEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBLG9CQUFvQiwwREFBc0IsUUFBUSx5REFBcUIsT0FBTywwREFBc0Isd0JBQXdCLDhFQUF5QixDQUFDLEtBQWdCLE1BQU0sT0FBTyxnQkFBZ0IsSUFBSSx5REFBcUIsaUJBQWlCLCtEQUEyQjtBQUN4UTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDJEQUF1QixjQUFjLE9BQU8seURBQXFCO0FBQ3JHLHNCQUFzQixrREFBZ0IsZUFBZSxpREFBZSxPQUFPLGtEQUFnQixrQ0FBa0MsYUFBb0IsZ0JBQWdCLDhDQUFZLGdDQUFnQyxzREFBb0I7QUFDak8sZ0JBQWdCLGlEQUFVLFVBQVUsMkVBQWdCLE9BQU8sb0RBQWtCLEdBQUcsd0JBQXdCLGlFQUFnQjtBQUN4SDtBQUNBLHVHQUF1RyxrREFBa0Q7QUFDeko7QUFDQSxDQUFDLEdBQUc7QUFDSixlQUFlLGlEQUFlLGdCQUFnQixzREFBb0IsaUNBQWlDLHFEQUFtQixxQkFBcUIsOENBQVk7QUFDdkosa0JBQWtCLDZDQUFXO0FBQzdCLFNBQVMsc0JBQXNCO0FBQy9CO0FBQ0EsZUFBZSxp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SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ3VSO0FBQ3ZSIiwic291cmNlcyI6WyIvVXNlcnMvdXNhbWEvRG9jdW1lbnRzL0dpdEh1Yi9haV9zZWxmaWUvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvdXBsb2FkLWJ1aWxkZXItZTBfcDlOT1QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gXCIuL3BhY2thZ2UtQmViLWlhckUuanNcIjtcbmltcG9ydCB7IGxvZ0RlcHJlY2F0aW9uV2FybmluZyB9IGZyb20gXCIuL2RlcHJlY2F0aW9ucy1wTG13Nll0ZC5qc1wiO1xuaW1wb3J0IHsgQWN0aW9uVHlwZSwgQ2FsbGJhY2tSZXN1bHRSZXNwb25zZSwgTWV0YWRhdGFGZXRjaFJlc3BvbnNlLCBNZXRhZGF0YUZldGNoU3RyZWFtUGFydCwgVXBsb2FkQWN0aW9uUGF5bG9hZCwgVXBsb2FkVGhpbmdIb29rLCBVcGxvYWRUaGluZ1Rva2VuJDEgYXMgVXBsb2FkVGhpbmdUb2tlbiwgVXBsb2FkZWRGaWxlRGF0YSQxIGFzIFVwbG9hZGVkRmlsZURhdGEgfSBmcm9tIFwiLi9zaGFyZWQtc2NoZW1hcy1CSUZEb3FQRi5qc1wiO1xuaW1wb3J0IHsgSW52YWxpZFJvdXRlQ29uZmlnRXJyb3IsIFVwbG9hZFRoaW5nRXJyb3IsIGJ5dGVzVG9GaWxlU2l6ZSwgZmlsZVNpemVUb0J5dGVzLCBmaWxsSW5wdXRSb3V0ZUNvbmZpZywgZmlsdGVyRGVmaW5lZE9iamVjdFZhbHVlcywgZ2VuZXJhdGVLZXksIGdlbmVyYXRlU2lnbmVkVVJMLCBnZXRTdGF0dXNDb2RlRnJvbUVycm9yLCBtYXRjaEZpbGVUeXBlLCBvYmplY3RLZXlzLCB2ZXJpZnlTaWduYXR1cmUgfSBmcm9tIFwiQHVwbG9hZHRoaW5nL3NoYXJlZFwiO1xuaW1wb3J0ICogYXMgRWZmZWN0JDQgZnJvbSBcImVmZmVjdC9FZmZlY3RcIjtcbmltcG9ydCAqIGFzIEVmZmVjdCQzIGZyb20gXCJlZmZlY3QvRWZmZWN0XCI7XG5pbXBvcnQgKiBhcyBFZmZlY3QkMiBmcm9tIFwiZWZmZWN0L0VmZmVjdFwiO1xuaW1wb3J0ICogYXMgRWZmZWN0JDEgZnJvbSBcImVmZmVjdC9FZmZlY3RcIjtcbmltcG9ydCAqIGFzIEVmZmVjdCBmcm9tIFwiZWZmZWN0L0VmZmVjdFwiO1xuaW1wb3J0ICogYXMgSHR0cEFwcCBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwQXBwXCI7XG5pbXBvcnQgKiBhcyBIdHRwQm9keSBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwQm9keVwiO1xuaW1wb3J0ICogYXMgSHR0cENsaWVudCBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwQ2xpZW50XCI7XG5pbXBvcnQgKiBhcyBIdHRwQ2xpZW50UmVxdWVzdCBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwQ2xpZW50UmVxdWVzdFwiO1xuaW1wb3J0ICogYXMgSHR0cENsaWVudFJlc3BvbnNlIGZyb20gXCJAZWZmZWN0L3BsYXRmb3JtL0h0dHBDbGllbnRSZXNwb25zZVwiO1xuaW1wb3J0ICogYXMgSHR0cFJvdXRlciBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwUm91dGVyXCI7XG5pbXBvcnQgKiBhcyBIdHRwU2VydmVyUmVxdWVzdCBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwU2VydmVyUmVxdWVzdFwiO1xuaW1wb3J0ICogYXMgSHR0cFNlcnZlclJlc3BvbnNlIGZyb20gXCJAZWZmZWN0L3BsYXRmb3JtL0h0dHBTZXJ2ZXJSZXNwb25zZVwiO1xuaW1wb3J0ICogYXMgQ29uZmlnJDIgZnJvbSBcImVmZmVjdC9Db25maWdcIjtcbmltcG9ydCAqIGFzIENvbmZpZyQxIGZyb20gXCJlZmZlY3QvQ29uZmlnXCI7XG5pbXBvcnQgKiBhcyBDb25maWcgZnJvbSBcImVmZmVjdC9Db25maWdcIjtcbmltcG9ydCAqIGFzIENvbnRleHQgZnJvbSBcImVmZmVjdC9Db250ZXh0XCI7XG5pbXBvcnQgKiBhcyBNYXRjaCBmcm9tIFwiZWZmZWN0L01hdGNoXCI7XG5pbXBvcnQgKiBhcyBSZWRhY3RlZCBmcm9tIFwiZWZmZWN0L1JlZGFjdGVkXCI7XG5pbXBvcnQgKiBhcyBTJDEgZnJvbSBcImVmZmVjdC9TY2hlbWFcIjtcbmltcG9ydCAqIGFzIFMgZnJvbSBcImVmZmVjdC9TY2hlbWFcIjtcbmltcG9ydCAqIGFzIFNjaGVtYSQyIGZyb20gXCJlZmZlY3QvU2NoZW1hXCI7XG5pbXBvcnQgKiBhcyBTY2hlbWEkMSBmcm9tIFwiZWZmZWN0L1NjaGVtYVwiO1xuaW1wb3J0ICogYXMgQ29uZmlnUHJvdmlkZXIgZnJvbSBcImVmZmVjdC9Db25maWdQcm92aWRlclwiO1xuaW1wb3J0ICogYXMgU3RyZWFtIGZyb20gXCJlZmZlY3QvU3RyZWFtXCI7XG5pbXBvcnQgKiBhcyBDb25maWdFcnJvciBmcm9tIFwiZWZmZWN0L0NvbmZpZ0Vycm9yXCI7XG5pbXBvcnQgKiBhcyBFaXRoZXIkMSBmcm9tIFwiZWZmZWN0L0VpdGhlclwiO1xuaW1wb3J0ICogYXMgTGF5ZXIkMSBmcm9tIFwiZWZmZWN0L0xheWVyXCI7XG5pbXBvcnQgKiBhcyBMYXllciBmcm9tIFwiZWZmZWN0L0xheWVyXCI7XG5pbXBvcnQgKiBhcyBMb2dnZXIgZnJvbSBcImVmZmVjdC9Mb2dnZXJcIjtcbmltcG9ydCAqIGFzIExvZ0xldmVsIGZyb20gXCJlZmZlY3QvTG9nTGV2ZWxcIjtcbmltcG9ydCAqIGFzIENhdXNlIGZyb20gXCJlZmZlY3QvQ2F1c2VcIjtcbmltcG9ydCAqIGFzIERhdGEkMSBmcm9tIFwiZWZmZWN0L0RhdGFcIjtcbmltcG9ydCAqIGFzIERhdGEgZnJvbSBcImVmZmVjdC9EYXRhXCI7XG5pbXBvcnQgKiBhcyBSdW50aW1lIGZyb20gXCJlZmZlY3QvUnVudGltZVwiO1xuaW1wb3J0ICogYXMgRmV0Y2hIdHRwQ2xpZW50IGZyb20gXCJAZWZmZWN0L3BsYXRmb3JtL0ZldGNoSHR0cENsaWVudFwiO1xuaW1wb3J0ICogYXMgSGVhZGVycyBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IZWFkZXJzXCI7XG5pbXBvcnQgKiBhcyBGaWJlclJlZiBmcm9tIFwiZWZmZWN0L0ZpYmVyUmVmXCI7XG5pbXBvcnQgKiBhcyBNYW5hZ2VkUnVudGltZSBmcm9tIFwiZWZmZWN0L01hbmFnZWRSdW50aW1lXCI7XG5cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL2NvbmZpZy50c1xuLyoqXG4qIE1lcmdlIGluIGBpbXBvcnQubWV0YS5lbnZgIHRvIHRoZSBidWlsdC1pbiBgcHJvY2Vzcy5lbnZgIHByb3ZpZGVyXG4qIFByZWZpeCBrZXlzIHdpdGggYFVQTE9BRFRISU5HX2Agc28gd2UgY2FuIHJlZmVyZW5jZSBqdXN0IHRoZSBuYW1lLlxuKiBAZXhhbXBsZVxuKiBwcm9jZXNzLmVudi5VUExPQURUSElOR19UT0tFTiA9IFwiZm9vXCJcbiogQ29uZmlnLnN0cmluZyhcInRva2VuXCIpOyAvLyBDb25maWc8XCJmb29cIj5cbiovXG5jb25zdCBlbnZQcm92aWRlciA9IENvbmZpZ1Byb3ZpZGVyLmZyb21FbnYoKS5waXBlKENvbmZpZ1Byb3ZpZGVyLm9yRWxzZSgoKSA9PiBDb25maWdQcm92aWRlci5mcm9tTWFwKG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoZmlsdGVyRGVmaW5lZE9iamVjdFZhbHVlcyhpbXBvcnQubWV0YT8uZW52ID8/IHt9KSkpLCB7IHBhdGhEZWxpbTogXCJfXCIgfSkpLCBDb25maWdQcm92aWRlci5uZXN0ZWQoXCJ1cGxvYWR0aGluZ1wiKSwgQ29uZmlnUHJvdmlkZXIuY29uc3RhbnRDYXNlKTtcbi8qKlxuKiBDb25maWcgcHJvdmlkZXIgdGhhdCBtZXJnZXMgdGhlIG9wdGlvbnMgZnJvbSB0aGUgb2JqZWN0XG4qIGFuZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgcHJlZml4ZWQgd2l0aCBgVVBMT0FEVEhJTkdfYC5cbiogQHJlbWFya3MgT3B0aW9ucyB0YWtlIHByZWNlZGVuY2Ugb3ZlciBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXG4qL1xuY29uc3QgY29uZmlnUHJvdmlkZXIgPSAob3B0aW9ucykgPT4gQ29uZmlnUHJvdmlkZXIuZnJvbUpzb24ob3B0aW9ucyA/PyB7fSkucGlwZShDb25maWdQcm92aWRlci5vckVsc2UoKCkgPT4gZW52UHJvdmlkZXIpKTtcbmNvbnN0IElzRGV2ZWxvcG1lbnQgPSBDb25maWckMi5ib29sZWFuKFwiaXNEZXZcIikucGlwZShDb25maWckMi5vckVsc2UoKCkgPT4gQ29uZmlnJDIuc3VjY2VlZCh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiA/IHByb2Nlc3MuZW52Lk5PREVfRU5WIDogdm9pZCAwKS5waXBlKENvbmZpZyQyLm1hcCgoXykgPT4gXyA9PT0gXCJkZXZlbG9wbWVudFwiKSkpLCBDb25maWckMi53aXRoRGVmYXVsdChmYWxzZSkpO1xuY29uc3QgVVRUb2tlbiA9IFMkMS5Db25maWcoXCJ0b2tlblwiLCBVcGxvYWRUaGluZ1Rva2VuKS5waXBlKEVmZmVjdCQ0LmNhdGNoVGFncyh7IENvbmZpZ0Vycm9yOiAoZSkgPT4gbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRjb2RlOiBlLl9vcCA9PT0gXCJJbnZhbGlkRGF0YVwiID8gXCJJTlZBTElEX1NFUlZFUl9DT05GSUdcIiA6IFwiTUlTU0lOR19FTlZcIixcblx0bWVzc2FnZTogZS5fb3AgPT09IFwiSW52YWxpZERhdGFcIiA/IFwiSW52YWxpZCB0b2tlbi4gQSB0b2tlbiBpcyBhIGJhc2U2NCBlbmNvZGVkIEpTT04gb2JqZWN0IG1hdGNoaW5nIHsgYXBpS2V5OiBzdHJpbmcsIGFwcElkOiBzdHJpbmcsIHJlZ2lvbnM6IHN0cmluZ1tdIH0uXCIgOiBcIk1pc3NpbmcgdG9rZW4uIFBsZWFzZSBzZXQgdGhlIGBVUExPQURUSElOR19UT0tFTmAgZW52aXJvbm1lbnQgdmFyaWFibGUgb3IgcHJvdmlkZSBhIHRva2VuIG1hbnVhbGx5IHRocm91Z2ggY29uZmlnLlwiLFxuXHRjYXVzZTogZVxufSkgfSkpO1xuY29uc3QgQXBpVXJsID0gQ29uZmlnJDIuc3RyaW5nKFwiYXBpVXJsXCIpLnBpcGUoQ29uZmlnJDIud2l0aERlZmF1bHQoXCJodHRwczovL2FwaS51cGxvYWR0aGluZy5jb21cIiksIENvbmZpZyQyLm1hcEF0dGVtcHQoKF8pID0+IG5ldyBVUkwoXykpLCBDb25maWckMi5tYXAoKHVybCkgPT4gdXJsLmhyZWYucmVwbGFjZSgvXFwvJC8sIFwiXCIpKSk7XG5jb25zdCBJbmdlc3RVcmwgPSBFZmZlY3QkNC5mbihmdW5jdGlvbiogKHByZWZlcnJlZFJlZ2lvbikge1xuXHRjb25zdCB7IHJlZ2lvbnMsIGluZ2VzdEhvc3QgfSA9IHlpZWxkKiBVVFRva2VuO1xuXHRjb25zdCByZWdpb24gPSBwcmVmZXJyZWRSZWdpb24gPyByZWdpb25zLmZpbmQoKHIpID0+IHIgPT09IHByZWZlcnJlZFJlZ2lvbikgPz8gcmVnaW9uc1swXSA6IHJlZ2lvbnNbMF07XG5cdHJldHVybiB5aWVsZCogQ29uZmlnJDIuc3RyaW5nKFwiaW5nZXN0VXJsXCIpLnBpcGUoQ29uZmlnJDIud2l0aERlZmF1bHQoYGh0dHBzOi8vJHtyZWdpb259LiR7aW5nZXN0SG9zdH1gKSwgQ29uZmlnJDIubWFwQXR0ZW1wdCgoXykgPT4gbmV3IFVSTChfKSksIENvbmZpZyQyLm1hcCgodXJsKSA9PiB1cmwuaHJlZi5yZXBsYWNlKC9cXC8kLywgXCJcIikpKTtcbn0pO1xuY29uc3QgVXRmc0hvc3QgPSBDb25maWckMi5zdHJpbmcoXCJ1dGZzSG9zdFwiKS5waXBlKENvbmZpZyQyLndpdGhEZWZhdWx0KFwidXRmcy5pb1wiKSk7XG5jb25zdCBVZnNIb3N0ID0gQ29uZmlnJDIuc3RyaW5nKFwidWZzSG9zdFwiKS5waXBlKENvbmZpZyQyLndpdGhEZWZhdWx0KFwidWZzLnNoXCIpKTtcbmNvbnN0IFVmc0FwcElkTG9jYXRpb24gPSBDb25maWckMi5saXRlcmFsKFwic3ViZG9tYWluXCIsIFwicGF0aFwiKShcInVmc0FwcElkTG9jYXRpb25cIikucGlwZShDb25maWckMi53aXRoRGVmYXVsdChcInN1YmRvbWFpblwiKSk7XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9faW50ZXJuYWwvZXJyb3ItZm9ybWF0dGVyLnRzXG5mdW5jdGlvbiBkZWZhdWx0RXJyb3JGb3JtYXR0ZXIoZXJyb3IpIHtcblx0cmV0dXJuIHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9O1xufVxuZnVuY3Rpb24gZm9ybWF0RXJyb3IoZXJyb3IsIHJvdXRlcikge1xuXHRjb25zdCBmaXJzdFNsdWcgPSBPYmplY3Qua2V5cyhyb3V0ZXIpWzBdO1xuXHRjb25zdCBlcnJvckZvcm1hdHRlciA9IGZpcnN0U2x1ZyA/IHJvdXRlcltmaXJzdFNsdWddPy5lcnJvckZvcm1hdHRlciA/PyBkZWZhdWx0RXJyb3JGb3JtYXR0ZXIgOiBkZWZhdWx0RXJyb3JGb3JtYXR0ZXI7XG5cdHJldHVybiBlcnJvckZvcm1hdHRlcihlcnJvcik7XG59XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9faW50ZXJuYWwvanNvbmwudHNcbmNvbnN0IGhhbmRsZUpzb25MaW5lU3RyZWFtID0gKHNjaGVtYSwgb25DaHVuaykgPT4gKHN0cmVhbSkgPT4ge1xuXHRsZXQgYnVmID0gXCJcIjtcblx0cmV0dXJuIHN0cmVhbS5waXBlKFN0cmVhbS5kZWNvZGVUZXh0KCksIFN0cmVhbS5tYXBFZmZlY3QoKGNodW5rKSA9PiBFZmZlY3QkMy5nZW4oZnVuY3Rpb24qICgpIHtcblx0XHRidWYgKz0gY2h1bms7XG5cdFx0Y29uc3QgcGFydHMgPSBidWYuc3BsaXQoXCJcXG5cIik7XG5cdFx0Y29uc3QgdmFsaWRDaHVua3MgPSBbXTtcblx0XHRmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMpIHRyeSB7XG5cdFx0XHR2YWxpZENodW5rcy5wdXNoKEpTT04ucGFyc2UocGFydCkpO1xuXHRcdFx0YnVmID0gYnVmLnNsaWNlKHBhcnQubGVuZ3RoICsgMSk7XG5cdFx0fSBjYXRjaCB7fVxuXHRcdHlpZWxkKiBFZmZlY3QkMy5sb2dEZWJ1ZyhcIlJlY2VpdmVkIGNodW5rc1wiKS5waXBlKEVmZmVjdCQzLmFubm90YXRlTG9ncyhcImNodW5rXCIsIGNodW5rKSwgRWZmZWN0JDMuYW5ub3RhdGVMb2dzKFwicGFyc2VkQ2h1bmtzXCIsIHZhbGlkQ2h1bmtzKSwgRWZmZWN0JDMuYW5ub3RhdGVMb2dzKFwiYnVmXCIsIGJ1ZikpO1xuXHRcdHJldHVybiB2YWxpZENodW5rcztcblx0fSkpLCBTdHJlYW0ubWFwRWZmZWN0KFMuZGVjb2RlVW5rbm93bihTLkFycmF5KHNjaGVtYSkpKSwgU3RyZWFtLm1hcEVmZmVjdChFZmZlY3QkMy5mb3JFYWNoKChwYXJ0KSA9PiBvbkNodW5rKHBhcnQpKSksIFN0cmVhbS5ydW5EcmFpbiwgRWZmZWN0JDMud2l0aExvZ1NwYW4oXCJoYW5kbGVKc29uTGluZVN0cmVhbVwiKSk7XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL2xvZ2dlci50c1xuLyoqXG4qIENvbmZpZy5sb2dMZXZlbCBjb3VudGVyLWludHVpdGl2ZWx5IGFjY2VwdHMgTG9nTGV2ZWxbXCJsYWJlbFwiXVxuKiBpbnN0ZWFkIG9mIGEgbGl0ZXJhbCwgcmlwcGluZyBpdCBhbmQgY2hhbmdpbmcgdG8gYWNjZXB0IGxpdGVyYWxcbiogRWZmZWN0IDQuMCB3aWxsIGNoYW5nZSB0aGlzIHRvIGFjY2VwdCBhIGxpdGVyYWwgYW5kIHRoZW4gd2UgY2FuXG4qIHJlbW92ZSB0aGlzIGFuZCBnbyBiYWNrIHRvIHRoZSBidWlsdC1pbiB2YWxpZGF0b3IuXG4qL1xuY29uc3QgQ29uZmlnTG9nTGV2ZWwgPSAobmFtZSkgPT4ge1xuXHRjb25zdCBjb25maWcgPSBDb25maWckMS5tYXBPckZhaWwoQ29uZmlnJDEuc3RyaW5nKCksIChsaXRlcmFsKSA9PiB7XG5cdFx0Y29uc3QgbGV2ZWwgPSBMb2dMZXZlbC5hbGxMZXZlbHMuZmluZCgobGV2ZWwkMSkgPT4gbGV2ZWwkMS5fdGFnID09PSBsaXRlcmFsKTtcblx0XHRyZXR1cm4gbGV2ZWwgPT09IHZvaWQgMCA/IEVpdGhlciQxLmxlZnQoQ29uZmlnRXJyb3IuSW52YWxpZERhdGEoW10sIGBFeHBlY3RlZCBhIGxvZyBsZXZlbCBidXQgcmVjZWl2ZWQgJHtsaXRlcmFsfWApKSA6IEVpdGhlciQxLnJpZ2h0KGxldmVsKTtcblx0fSk7XG5cdHJldHVybiBuYW1lID09PSB2b2lkIDAgPyBjb25maWcgOiBDb25maWckMS5uZXN0ZWQoY29uZmlnLCBuYW1lKTtcbn07XG5jb25zdCB3aXRoTWluaW1hbExvZ0xldmVsID0gQ29uZmlnTG9nTGV2ZWwoXCJsb2dMZXZlbFwiKS5waXBlKENvbmZpZyQxLndpdGhEZWZhdWx0KExvZ0xldmVsLkluZm8pLCBFZmZlY3QkMi5hbmRUaGVuKChsZXZlbCkgPT4gTG9nZ2VyLm1pbmltdW1Mb2dMZXZlbChsZXZlbCkpLCBFZmZlY3QkMi50YXBFcnJvcigoZSkgPT4gRWZmZWN0JDIubG9nRXJyb3IoXCJJbnZhbGlkIGxvZyBsZXZlbFwiKS5waXBlKEVmZmVjdCQyLmFubm90YXRlTG9ncyhcImVycm9yXCIsIGUpKSksIEVmZmVjdCQyLmNhdGNoVGFnKFwiQ29uZmlnRXJyb3JcIiwgKGUpID0+IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0Y29kZTogXCJJTlZBTElEX1NFUlZFUl9DT05GSUdcIixcblx0bWVzc2FnZTogXCJJbnZhbGlkIHNlcnZlciBjb25maWd1cmF0aW9uXCIsXG5cdGNhdXNlOiBlXG59KSksIExheWVyJDEudW53cmFwRWZmZWN0KTtcbmNvbnN0IExvZ0Zvcm1hdCA9IENvbmZpZyQxLmxpdGVyYWwoXCJqc29uXCIsIFwibG9nRm10XCIsIFwic3RydWN0dXJlZFwiLCBcInByZXR0eVwiKShcImxvZ0Zvcm1hdFwiKTtcbmNvbnN0IHdpdGhMb2dGb3JtYXQgPSBFZmZlY3QkMi5nZW4oZnVuY3Rpb24qICgpIHtcblx0Y29uc3QgaXNEZXYgPSB5aWVsZCogSXNEZXZlbG9wbWVudDtcblx0Y29uc3QgbG9nRm9ybWF0ID0geWllbGQqIExvZ0Zvcm1hdC5waXBlKENvbmZpZyQxLndpdGhEZWZhdWx0KGlzRGV2ID8gXCJwcmV0dHlcIiA6IFwianNvblwiKSk7XG5cdHJldHVybiBMb2dnZXJbbG9nRm9ybWF0XTtcbn0pLnBpcGUoRWZmZWN0JDIuY2F0Y2hUYWcoXCJDb25maWdFcnJvclwiLCAoZSkgPT4gbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRjb2RlOiBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiLFxuXHRtZXNzYWdlOiBcIkludmFsaWQgc2VydmVyIGNvbmZpZ3VyYXRpb25cIixcblx0Y2F1c2U6IGVcbn0pKSwgTGF5ZXIkMS51bndyYXBFZmZlY3QpO1xuY29uc3QgbG9nSHR0cENsaWVudFJlc3BvbnNlID0gKG1lc3NhZ2UsIG9wdHMpID0+IHtcblx0Y29uc3QgbWl4aW4gPSBvcHRzPy5taXhpbiA/PyBcImpzb25cIjtcblx0Y29uc3QgbGV2ZWwgPSBMb2dMZXZlbC5mcm9tTGl0ZXJhbChvcHRzPy5sZXZlbCA/PyBcIkRlYnVnXCIpO1xuXHRyZXR1cm4gKHJlc3BvbnNlKSA9PiBFZmZlY3QkMi5mbGF0TWFwKG1peGluICE9PSBcIk5vbmVcIiA/IHJlc3BvbnNlW21peGluXSA6IEVmZmVjdCQyLnZvaWQsICgpID0+IEVmZmVjdCQyLmxvZ1dpdGhMZXZlbChsZXZlbCwgYCR7bWVzc2FnZX0gKCR7cmVzcG9uc2Uuc3RhdHVzfSlgKS5waXBlKEVmZmVjdCQyLmFubm90YXRlTG9ncyhcInJlc3BvbnNlXCIsIHJlc3BvbnNlKSkpO1xufTtcbmNvbnN0IGxvZ0h0dHBDbGllbnRFcnJvciA9IChtZXNzYWdlKSA9PiAoZXJyKSA9PiBlcnIuX3RhZyA9PT0gXCJSZXNwb25zZUVycm9yXCIgPyBsb2dIdHRwQ2xpZW50UmVzcG9uc2UobWVzc2FnZSwgeyBsZXZlbDogXCJFcnJvclwiIH0pKGVyci5yZXNwb25zZSkgOiBFZmZlY3QkMi5sb2dFcnJvcihtZXNzYWdlKS5waXBlKEVmZmVjdCQyLmFubm90YXRlTG9ncyhcImVycm9yXCIsIGVycikpO1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL3BhcnNlci50c1xudmFyIFBhcnNlckVycm9yID0gY2xhc3MgZXh0ZW5kcyBEYXRhJDEuVGFnZ2VkRXJyb3IoXCJQYXJzZXJFcnJvclwiKSB7XG5cdG1lc3NhZ2UgPSBcIklucHV0IHZhbGlkYXRpb24gZmFpbGVkLiBUaGUgb3JpZ2luYWwgZXJyb3Igd2l0aCBpdCdzIHZhbGlkYXRpb24gaXNzdWVzIGlzIGluIHRoZSBlcnJvciBjYXVzZS5cIjtcbn07XG5mdW5jdGlvbiBnZXRQYXJzZUZuKHBhcnNlcikge1xuXHRpZiAoXCJwYXJzZUFzeW5jXCIgaW4gcGFyc2VyICYmIHR5cGVvZiBwYXJzZXIucGFyc2VBc3luYyA9PT0gXCJmdW5jdGlvblwiKVxuIC8qKlxuXHQqIFpvZFxuXHQqIFRPRE8gKG5leHQgbWFqb3IpOiBDb25zaWRlciB3cmFwcGluZyBab2RFcnJvciBpbiBQYXJzZXJFcnJvclxuXHQqL1xuXHRyZXR1cm4gcGFyc2VyLnBhcnNlQXN5bmM7XG5cdGlmIChTY2hlbWEkMi5pc1NjaGVtYShwYXJzZXIpKVxuIC8qKlxuXHQqIEVmZmVjdCBTY2hlbWFcblx0Ki9cblx0cmV0dXJuICh2YWx1ZSkgPT4gU2NoZW1hJDIuZGVjb2RlVW5rbm93blByb21pc2UocGFyc2VyKSh2YWx1ZSkuY2F0Y2goKGVycm9yKSA9PiB7XG5cdFx0dGhyb3cgbmV3IFBhcnNlckVycm9yKHsgY2F1c2U6IENhdXNlLnNxdWFzaChlcnJvcltSdW50aW1lLkZpYmVyRmFpbHVyZUNhdXNlSWRdKSB9KTtcblx0fSk7XG5cdGlmIChcIn5zdGFuZGFyZFwiIGluIHBhcnNlcilcbiAvKipcblx0KiBTdGFuZGFyZCBTY2hlbWFcblx0KiBUT0RPIChuZXh0IG1ham9yKTogQ29uc2lkZXIgbW92aW5nIHRoaXMgdG8gdGhlIHRvcCBvZiB0aGUgZnVuY3Rpb25cblx0Ki9cblx0cmV0dXJuIGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBhcnNlcltcIn5zdGFuZGFyZFwiXS52YWxpZGF0ZSh2YWx1ZSk7XG5cdFx0aWYgKHJlc3VsdC5pc3N1ZXMpIHRocm93IG5ldyBQYXJzZXJFcnJvcih7IGNhdXNlOiByZXN1bHQuaXNzdWVzIH0pO1xuXHRcdHJldHVybiByZXN1bHQudmFsdWU7XG5cdH07XG5cdHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFyc2VyXCIpO1xufVxuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL3JvdXRlLWNvbmZpZy50c1xudmFyIEZpbGVTaXplTWlzbWF0Y2ggPSBjbGFzcyBleHRlbmRzIERhdGEuRXJyb3Ige1xuXHRfdGFnID0gXCJGaWxlU2l6ZU1pc21hdGNoXCI7XG5cdG5hbWUgPSBcIkZpbGVTaXplTWlzbWF0Y2hFcnJvclwiO1xuXHRjb25zdHJ1Y3Rvcih0eXBlLCBtYXgsIGFjdHVhbCkge1xuXHRcdGNvbnN0IHJlYXNvbiA9IGBZb3UgdXBsb2FkZWQgYSAke3R5cGV9IGZpbGUgdGhhdCB3YXMgJHtieXRlc1RvRmlsZVNpemUoYWN0dWFsKX0sIGJ1dCB0aGUgbGltaXQgZm9yIHRoYXQgdHlwZSBpcyAke21heH1gO1xuXHRcdHN1cGVyKHsgcmVhc29uIH0pO1xuXHR9XG59O1xudmFyIEZpbGVDb3VudE1pc21hdGNoID0gY2xhc3MgZXh0ZW5kcyBEYXRhLkVycm9yIHtcblx0X3RhZyA9IFwiRmlsZUNvdW50TWlzbWF0Y2hcIjtcblx0bmFtZSA9IFwiRmlsZUNvdW50TWlzbWF0Y2hFcnJvclwiO1xuXHRjb25zdHJ1Y3Rvcih0eXBlLCBib3VuZHR5cGUsIGJvdW5kLCBhY3R1YWwpIHtcblx0XHRjb25zdCByZWFzb24gPSBgWW91IHVwbG9hZGVkICR7YWN0dWFsfSBmaWxlKHMpIG9mIHR5cGUgJyR7dHlwZX0nLCBidXQgdGhlICR7Ym91bmR0eXBlfSBmb3IgdGhhdCB0eXBlIGlzICR7Ym91bmR9YDtcblx0XHRzdXBlcih7IHJlYXNvbiB9KTtcblx0fVxufTtcbmNvbnN0IGFzc2VydEZpbGVzTWVldENvbmZpZyA9IChmaWxlcywgcm91dGVDb25maWcpID0+IEVmZmVjdCQxLmdlbihmdW5jdGlvbiogKCkge1xuXHRjb25zdCBjb3VudHMgPSB7fTtcblx0Zm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG5cdFx0Y29uc3QgdHlwZSA9IHlpZWxkKiBtYXRjaEZpbGVUeXBlKGZpbGUsIG9iamVjdEtleXMocm91dGVDb25maWcpKTtcblx0XHRjb3VudHNbdHlwZV0gPSAoY291bnRzW3R5cGVdID8/IDApICsgMTtcblx0XHRjb25zdCBzaXplTGltaXQgPSByb3V0ZUNvbmZpZ1t0eXBlXT8ubWF4RmlsZVNpemU7XG5cdFx0aWYgKCFzaXplTGltaXQpIHJldHVybiB5aWVsZCogbmV3IEludmFsaWRSb3V0ZUNvbmZpZ0Vycm9yKHR5cGUsIFwibWF4RmlsZVNpemVcIik7XG5cdFx0Y29uc3Qgc2l6ZUxpbWl0Qnl0ZXMgPSB5aWVsZCogZmlsZVNpemVUb0J5dGVzKHNpemVMaW1pdCk7XG5cdFx0aWYgKGZpbGUuc2l6ZSA+IHNpemVMaW1pdEJ5dGVzKSByZXR1cm4geWllbGQqIG5ldyBGaWxlU2l6ZU1pc21hdGNoKHR5cGUsIHNpemVMaW1pdCwgZmlsZS5zaXplKTtcblx0fVxuXHRmb3IgKGNvbnN0IF9rZXkgaW4gY291bnRzKSB7XG5cdFx0Y29uc3Qga2V5ID0gX2tleTtcblx0XHRjb25zdCBjb25maWcgPSByb3V0ZUNvbmZpZ1trZXldO1xuXHRcdGlmICghY29uZmlnKSByZXR1cm4geWllbGQqIG5ldyBJbnZhbGlkUm91dGVDb25maWdFcnJvcihrZXkpO1xuXHRcdGNvbnN0IGNvdW50ID0gY291bnRzW2tleV07XG5cdFx0Y29uc3QgbWluID0gY29uZmlnLm1pbkZpbGVDb3VudDtcblx0XHRjb25zdCBtYXggPSBjb25maWcubWF4RmlsZUNvdW50O1xuXHRcdGlmIChtaW4gPiBtYXgpIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRcdFx0Y29kZTogXCJCQURfUkVRVUVTVFwiLFxuXHRcdFx0bWVzc2FnZTogXCJJbnZhbGlkIGNvbmZpZyBkdXJpbmcgZmlsZSBjb3VudCAtIG1pbkZpbGVDb3VudCA+IG1heEZpbGVDb3VudFwiLFxuXHRcdFx0Y2F1c2U6IGBtaW5GaWxlQ291bnQgbXVzdCBiZSBsZXNzIHRoYW4gbWF4RmlsZUNvdW50IGZvciBrZXkgJHtrZXl9LiBnb3Q6ICR7bWlufSA+ICR7bWF4fWBcblx0XHR9KTtcblx0XHRpZiAoY291bnQgIT0gbnVsbCAmJiBjb3VudCA8IG1pbikgcmV0dXJuIHlpZWxkKiBuZXcgRmlsZUNvdW50TWlzbWF0Y2goa2V5LCBcIm1pbmltdW1cIiwgbWluLCBjb3VudCk7XG5cdFx0aWYgKGNvdW50ICE9IG51bGwgJiYgY291bnQgPiBtYXgpIHJldHVybiB5aWVsZCogbmV3IEZpbGVDb3VudE1pc21hdGNoKGtleSwgXCJtYXhpbXVtXCIsIG1heCwgY291bnQpO1xuXHR9XG5cdHJldHVybiBudWxsO1xufSk7XG5jb25zdCBleHRyYWN0Um91dGVyQ29uZmlnID0gKHJvdXRlcikgPT4gRWZmZWN0JDEuZm9yRWFjaChvYmplY3RLZXlzKHJvdXRlciksIChzbHVnKSA9PiBFZmZlY3QkMS5tYXAoZmlsbElucHV0Um91dGVDb25maWcocm91dGVyW3NsdWddLnJvdXRlckNvbmZpZyksIChjb25maWcpID0+ICh7XG5cdHNsdWcsXG5cdGNvbmZpZ1xufSkpKTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL19pbnRlcm5hbC9ydW50aW1lLnRzXG5jb25zdCBtYWtlUnVudGltZSA9IChmZXRjaCwgY29uZmlnKSA9PiB7XG5cdGNvbnN0IGZldGNoSHR0cENsaWVudCA9IExheWVyLnByb3ZpZGVNZXJnZShGZXRjaEh0dHBDbGllbnQubGF5ZXIsIExheWVyLnN1Y2NlZWQoRmV0Y2hIdHRwQ2xpZW50LkZldGNoLCBmZXRjaCkpO1xuXHRjb25zdCB3aXRoUmVkYWN0ZWRIZWFkZXJzID0gTGF5ZXIuZWZmZWN0RGlzY2FyZChGaWJlclJlZi51cGRhdGUoSGVhZGVycy5jdXJyZW50UmVkYWN0ZWROYW1lcywgKF8pID0+IF8uY29uY2F0KFtcIngtdXBsb2FkdGhpbmctYXBpLWtleVwiXSkpKTtcblx0Y29uc3QgbGF5ZXIgPSBMYXllci5wcm92aWRlKExheWVyLm1lcmdlQWxsKHdpdGhMb2dGb3JtYXQsIHdpdGhNaW5pbWFsTG9nTGV2ZWwsIGZldGNoSHR0cENsaWVudCwgd2l0aFJlZGFjdGVkSGVhZGVycyksIExheWVyLnNldENvbmZpZ1Byb3ZpZGVyKGNvbmZpZ1Byb3ZpZGVyKGNvbmZpZykpKTtcblx0cmV0dXJuIE1hbmFnZWRSdW50aW1lLm1ha2UobGF5ZXIpO1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL19pbnRlcm5hbC90eXBlcy50c1xuLyoqXG4qIE1hcmtlciB1c2VkIHRvIHNlbGVjdCB0aGUgcmVnaW9uIGJhc2VkIG9uIHRoZSBpbmNvbWluZyByZXF1ZXN0XG4qL1xuY29uc3QgVVRSZWdpb24gPSBTeW1ib2woXCJ1cGxvYWR0aGluZy1yZWdpb24tc3ltYm9sXCIpO1xuLyoqXG4qIE1hcmtlciB1c2VkIHRvIGFwcGVuZCBhIGBjdXN0b21JZGAgdG8gdGhlIGluY29taW5nIGZpbGUgZGF0YSBpbiBgLm1pZGRsZXdhcmUoKWBcbiogQGV4YW1wbGVcbiogYGBgdHNcbiogLm1pZGRsZXdhcmUoKG9wdHMpID0+IHtcbiogICByZXR1cm4ge1xuKiAgICAgW1VURmlsZXNdOiBvcHRzLmZpbGVzLm1hcCgoZmlsZSkgPT4gKHtcbiogICAgICAgLi4uZmlsZSxcbiogICAgICAgY3VzdG9tSWQ6IGdlbmVyYXRlSWQoKSxcbiogICAgIH0pKVxuKiAgIH07XG4qIH0pXG4qIGBgYFxuKi9cbmNvbnN0IFVURmlsZXMgPSBTeW1ib2woXCJ1cGxvYWR0aGluZy1jdXN0b20taWQtc3ltYm9sXCIpO1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL2hhbmRsZXIudHNcbnZhciBBZGFwdGVyQXJndW1lbnRzID0gY2xhc3MgZXh0ZW5kcyBDb250ZXh0LlRhZyhcInVwbG9hZHRoaW5nL0FkYXB0ZXJBcmd1bWVudHNcIikoKSB7fTtcbi8qKlxuKiBDcmVhdGUgYSByZXF1ZXN0IGhhbmRsZXIgYWRhcHRlciBmb3IgYW55IGZyYW1ld29yayBvciBzZXJ2ZXIgbGlicmFyeS5cbiogUmVmZXIgdG8gdGhlIGV4aXN0aW5nIGFkYXB0ZXJzIGZvciBleGFtcGxlcyBvbiBob3cgdG8gdXNlIHRoaXMgZnVuY3Rpb24uXG4qIEBwdWJsaWNcbipcbiogQHBhcmFtIG1ha2VBZGFwdGVyQXJncyAtIEZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIGFyZ3MgZnJvbSB5b3VyIGZyYW1ld29yayBhbmQgcmV0dXJucyBhbiBFZmZlY3QgdGhhdCByZXNvbHZlcyB0byB0aGUgYWRhcHRlciBhcmdzLlxuKiBUaGVzZSBhcmdzIGFyZSBwYXNzZWQgdG8gdGhlIGAubWlkZGxld2FyZWAsIGAub25VcGxvYWRDb21wbGV0ZWAsIGFuZCBgLm9uVXBsb2FkRXJyb3JgIGhvb2tzLlxuKiBAcGFyYW0gdG9SZXF1ZXN0IC0gRnVuY3Rpb24gdGhhdCB0YWtlcyB0aGUgYXJncyBmcm9tIHlvdXIgZnJhbWV3b3JrIGFuZCByZXR1cm5zIGFuIEVmZmVjdCB0aGF0IHJlc29sdmVzIHRvIGEgd2ViIFJlcXVlc3Qgb2JqZWN0LlxuKiBAcGFyYW0gb3B0cyAtIFRoZSByb3V0ZXIgY29uZmlnIGFuZCBvdGhlciBvcHRpb25zIHRoYXQgYXJlIG5vcm1hbGx5IHBhc3NlZCB0byBgY3JlYXRlUmVxdWVzdEhhbmRsZXJgIG9mIG9mZmljaWFsIGFkYXB0ZXJzXG4qIEBwYXJhbSBiZUFkYXB0ZXIgLSBbT3B0aW9uYWxdIFRoZSBhZGFwdGVyIG5hbWUgb2YgdGhlIGFkYXB0ZXIsIHVzZWQgZm9yIHRlbGVtZXRyeSBwdXJwb3Nlc1xuKiBAcmV0dXJucyBBIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdGhlIGFyZ3MgZnJvbSB5b3VyIGZyYW1ld29yayBhbmQgcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIFJlc3BvbnNlIG9iamVjdC5cbiovXG5jb25zdCBtYWtlQWRhcHRlckhhbmRsZXIgPSAobWFrZUFkYXB0ZXJBcmdzLCB0b1JlcXVlc3QsIG9wdHMsIGJlQWRhcHRlcikgPT4ge1xuXHRjb25zdCBtYW5hZ2VkID0gbWFrZVJ1bnRpbWUob3B0cy5jb25maWc/LmZldGNoLCBvcHRzLmNvbmZpZyk7XG5cdGNvbnN0IGhhbmRsZSA9IEVmZmVjdC5wcm9taXNlKCgpID0+IG1hbmFnZWQucnVudGltZSgpLnRoZW4oSHR0cEFwcC50b1dlYkhhbmRsZXJSdW50aW1lKSk7XG5cdGNvbnN0IGFwcCA9ICguLi5hcmdzKSA9PiBFZmZlY3QubWFwKEVmZmVjdC5wcm9taXNlKCgpID0+IG1hbmFnZWQucnVuUHJvbWlzZShjcmVhdGVSZXF1ZXN0SGFuZGxlcihvcHRzLCBiZUFkYXB0ZXIgPz8gXCJjdXN0b21cIikpKSwgRWZmZWN0LnByb3ZpZGVTZXJ2aWNlRWZmZWN0KEFkYXB0ZXJBcmd1bWVudHMsIG1ha2VBZGFwdGVyQXJncyguLi5hcmdzKSkpO1xuXHRyZXR1cm4gYXN5bmMgKC4uLmFyZ3MpID0+IHtcblx0XHRjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGUucGlwZShFZmZlY3QuYXAoYXBwKC4uLmFyZ3MpKSwgRWZmZWN0LmFwKHRvUmVxdWVzdCguLi5hcmdzKSksIEVmZmVjdC53aXRoTG9nU3BhbihcInJlcXVlc3RIYW5kbGVyXCIpLCBtYW5hZ2VkLnJ1blByb21pc2UpO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH07XG59O1xuY29uc3QgY3JlYXRlUmVxdWVzdEhhbmRsZXIgPSAob3B0cywgYmVBZGFwdGVyKSA9PiBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdGNvbnN0IGlzRGV2ZWxvcG1lbnQgPSB5aWVsZCogSXNEZXZlbG9wbWVudDtcblx0Y29uc3Qgcm91dGVyQ29uZmlnID0geWllbGQqIGV4dHJhY3RSb3V0ZXJDb25maWcob3B0cy5yb3V0ZXIpO1xuXHRjb25zdCBoYW5kbGVEYWVtb24gPSAoKCkgPT4ge1xuXHRcdGlmIChvcHRzLmNvbmZpZz8uaGFuZGxlRGFlbW9uUHJvbWlzZSkgcmV0dXJuIG9wdHMuY29uZmlnLmhhbmRsZURhZW1vblByb21pc2U7XG5cdFx0cmV0dXJuIGlzRGV2ZWxvcG1lbnQgPyBcInZvaWRcIiA6IFwiYXdhaXRcIjtcblx0fSkoKTtcblx0aWYgKGlzRGV2ZWxvcG1lbnQgJiYgaGFuZGxlRGFlbW9uID09PSBcImF3YWl0XCIpIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRcdGNvZGU6IFwiSU5WQUxJRF9TRVJWRVJfQ09ORklHXCIsXG5cdFx0bWVzc2FnZTogXCJoYW5kbGVEYWVtb25Qcm9taXNlOiBcXFwiYXdhaXRcXFwiIGlzIGZvcmJpZGRlbiBpbiBkZXZlbG9wbWVudC5cIlxuXHR9KTtcblx0Y29uc3QgR0VUID0gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuXHRcdHJldHVybiB5aWVsZCogSHR0cFNlcnZlclJlc3BvbnNlLmpzb24ocm91dGVyQ29uZmlnKTtcblx0fSk7XG5cdGNvbnN0IFBPU1QgPSBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdFx0Y29uc3QgeyBcInVwbG9hZHRoaW5nLWhvb2tcIjogdXBsb2FkdGhpbmdIb29rLCBcIngtdXBsb2FkdGhpbmctcGFja2FnZVwiOiBmZVBhY2thZ2UsIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IGNsaWVudFZlcnNpb24gfSA9IHlpZWxkKiBIdHRwU2VydmVyUmVxdWVzdC5zY2hlbWFIZWFkZXJzKFNjaGVtYSQxLlN0cnVjdCh7XG5cdFx0XHRcInVwbG9hZHRoaW5nLWhvb2tcIjogVXBsb2FkVGhpbmdIb29rLnBpcGUoU2NoZW1hJDEub3B0aW9uYWwpLFxuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLXBhY2thZ2VcIjogU2NoZW1hJDEuU3RyaW5nLnBpcGUoU2NoZW1hJDEub3B0aW9uYWxXaXRoKHsgZGVmYXVsdDogKCkgPT4gXCJ1bmtub3duXCIgfSkpLFxuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogU2NoZW1hJDEuU3RyaW5nLnBpcGUoU2NoZW1hJDEub3B0aW9uYWxXaXRoKHsgZGVmYXVsdDogKCkgPT4gdmVyc2lvbiB9KSlcblx0XHR9KSk7XG5cdFx0aWYgKGNsaWVudFZlcnNpb24gIT09IHZlcnNpb24pIHtcblx0XHRcdGNvbnN0IHNlcnZlclZlcnNpb24gPSB2ZXJzaW9uO1xuXHRcdFx0eWllbGQqIEVmZmVjdC5sb2dXYXJuaW5nKFwiQ2xpZW50IHZlcnNpb24gbWlzbWF0Y2guIFRoaW5ncyBtYXkgbm90IHdvcmsgYXMgZXhwZWN0ZWQsIHBsZWFzZSBzeW5jIHlvdXIgdmVyc2lvbnMgdG8gZW5zdXJlIGNvbXBhdGliaWxpdHkuXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyh7XG5cdFx0XHRcdGNsaWVudFZlcnNpb24sXG5cdFx0XHRcdHNlcnZlclZlcnNpb25cblx0XHRcdH0pKTtcblx0XHR9XG5cdFx0Y29uc3QgeyBzbHVnLCBhY3Rpb25UeXBlIH0gPSB5aWVsZCogSHR0cFJvdXRlci5zY2hlbWFQYXJhbXMoU2NoZW1hJDEuU3RydWN0KHtcblx0XHRcdGFjdGlvblR5cGU6IEFjdGlvblR5cGUucGlwZShTY2hlbWEkMS5vcHRpb25hbCksXG5cdFx0XHRzbHVnOiBTY2hlbWEkMS5TdHJpbmdcblx0XHR9KSk7XG5cdFx0Y29uc3QgdXBsb2FkYWJsZSA9IG9wdHMucm91dGVyW3NsdWddO1xuXHRcdGlmICghdXBsb2FkYWJsZSkge1xuXHRcdFx0Y29uc3QgbXNnID0gYE5vIGZpbGUgcm91dGUgZm91bmQgZm9yIHNsdWcgJHtzbHVnfWA7XG5cdFx0XHR5aWVsZCogRWZmZWN0LmxvZ0Vycm9yKG1zZyk7XG5cdFx0XHRyZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0XHRcdFx0Y29kZTogXCJOT1RfRk9VTkRcIixcblx0XHRcdFx0bWVzc2FnZTogbXNnXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Y29uc3QgeyBib2R5LCBmaWJlciB9ID0geWllbGQqIE1hdGNoLnZhbHVlKHtcblx0XHRcdGFjdGlvblR5cGUsXG5cdFx0XHR1cGxvYWR0aGluZ0hvb2tcblx0XHR9KS5waXBlKE1hdGNoLndoZW4oe1xuXHRcdFx0YWN0aW9uVHlwZTogXCJ1cGxvYWRcIixcblx0XHRcdHVwbG9hZHRoaW5nSG9vazogdm9pZCAwXG5cdFx0fSwgKCkgPT4gaGFuZGxlVXBsb2FkQWN0aW9uKHtcblx0XHRcdHVwbG9hZGFibGUsXG5cdFx0XHRmZVBhY2thZ2UsXG5cdFx0XHRiZUFkYXB0ZXIsXG5cdFx0XHRzbHVnXG5cdFx0fSkpLCBNYXRjaC53aGVuKHtcblx0XHRcdGFjdGlvblR5cGU6IHZvaWQgMCxcblx0XHRcdHVwbG9hZHRoaW5nSG9vazogXCJjYWxsYmFja1wiXG5cdFx0fSwgKCkgPT4gaGFuZGxlQ2FsbGJhY2tSZXF1ZXN0KHtcblx0XHRcdHVwbG9hZGFibGUsXG5cdFx0XHRmZVBhY2thZ2UsXG5cdFx0XHRiZUFkYXB0ZXJcblx0XHR9KSksIE1hdGNoLndoZW4oe1xuXHRcdFx0YWN0aW9uVHlwZTogdm9pZCAwLFxuXHRcdFx0dXBsb2FkdGhpbmdIb29rOiBcImVycm9yXCJcblx0XHR9LCAoKSA9PiBoYW5kbGVFcnJvclJlcXVlc3QoeyB1cGxvYWRhYmxlIH0pKSwgTWF0Y2gub3JFbHNlKCgpID0+IEVmZmVjdC5zdWNjZWVkKHtcblx0XHRcdGJvZHk6IG51bGwsXG5cdFx0XHRmaWJlcjogbnVsbFxuXHRcdH0pKSk7XG5cdFx0aWYgKGZpYmVyKSB7XG5cdFx0XHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiUnVubmluZyBmaWJlciBhcyBkYWVtb25cIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiaGFuZGxlRGFlbW9uXCIsIGhhbmRsZURhZW1vbikpO1xuXHRcdFx0aWYgKGhhbmRsZURhZW1vbiA9PT0gXCJ2b2lkXCIpIHt9IGVsc2UgaWYgKGhhbmRsZURhZW1vbiA9PT0gXCJhd2FpdFwiKSB5aWVsZCogZmliZXIuYXdhaXQ7XG5cdFx0XHRlbHNlIGlmICh0eXBlb2YgaGFuZGxlRGFlbW9uID09PSBcImZ1bmN0aW9uXCIpIGhhbmRsZURhZW1vbihFZmZlY3QucnVuUHJvbWlzZShmaWJlci5hd2FpdCkpO1xuXHRcdH1cblx0XHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiU2VuZGluZyByZXNwb25zZVwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJib2R5XCIsIGJvZHkpKTtcblx0XHRyZXR1cm4geWllbGQqIEh0dHBTZXJ2ZXJSZXNwb25zZS5qc29uKGJvZHkpO1xuXHR9KS5waXBlKEVmZmVjdC5jYXRjaFRhZ3Moe1xuXHRcdFBhcnNlRXJyb3I6IChlKSA9PiBIdHRwU2VydmVyUmVzcG9uc2UuanNvbihmb3JtYXRFcnJvcihuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBcIkludmFsaWQgaW5wdXRcIixcblx0XHRcdGNhdXNlOiBlLm1lc3NhZ2Vcblx0XHR9KSwgb3B0cy5yb3V0ZXIpLCB7IHN0YXR1czogNDAwIH0pLFxuXHRcdFVwbG9hZFRoaW5nRXJyb3I6IChlKSA9PiBIdHRwU2VydmVyUmVzcG9uc2UuanNvbihmb3JtYXRFcnJvcihlLCBvcHRzLnJvdXRlciksIHsgc3RhdHVzOiBnZXRTdGF0dXNDb2RlRnJvbUVycm9yKGUpIH0pXG5cdH0pKTtcblx0Y29uc3QgYXBwZW5kUmVzcG9uc2VIZWFkZXJzID0gRWZmZWN0Lm1hcChIdHRwU2VydmVyUmVzcG9uc2Uuc2V0SGVhZGVyKFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCIsIHZlcnNpb24pKTtcblx0cmV0dXJuIEh0dHBSb3V0ZXIuZW1wdHkucGlwZShIdHRwUm91dGVyLmdldChcIipcIiwgR0VUKSwgSHR0cFJvdXRlci5wb3N0KFwiKlwiLCBQT1NUKSwgSHR0cFJvdXRlci51c2UoYXBwZW5kUmVzcG9uc2VIZWFkZXJzKSk7XG59KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImNyZWF0ZVJlcXVlc3RIYW5kbGVyXCIpKTtcbmNvbnN0IGhhbmRsZUVycm9yUmVxdWVzdCA9IChvcHRzKSA9PiBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdGNvbnN0IHsgdXBsb2FkYWJsZSB9ID0gb3B0cztcblx0Y29uc3QgcmVxdWVzdCA9IHlpZWxkKiBIdHRwU2VydmVyUmVxdWVzdC5IdHRwU2VydmVyUmVxdWVzdDtcblx0Y29uc3QgeyBhcGlLZXkgfSA9IHlpZWxkKiBVVFRva2VuO1xuXHRjb25zdCB2ZXJpZmllZCA9IHlpZWxkKiB2ZXJpZnlTaWduYXR1cmUoeWllbGQqIHJlcXVlc3QudGV4dCwgcmVxdWVzdC5oZWFkZXJzW1wieC11cGxvYWR0aGluZy1zaWduYXR1cmVcIl0gPz8gbnVsbCwgYXBpS2V5KTtcblx0eWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhgU2lnbmF0dXJlIHZlcmlmaWVkOiAke3ZlcmlmaWVkfWApO1xuXHRpZiAoIXZlcmlmaWVkKSB7XG5cdFx0eWllbGQqIEVmZmVjdC5sb2dFcnJvcihcIkludmFsaWQgc2lnbmF0dXJlXCIpO1xuXHRcdHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRcdFx0Y29kZTogXCJCQURfUkVRVUVTVFwiLFxuXHRcdFx0bWVzc2FnZTogXCJJbnZhbGlkIHNpZ25hdHVyZVwiXG5cdFx0fSk7XG5cdH1cblx0Y29uc3QgcmVxdWVzdElucHV0ID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0LnNjaGVtYUJvZHlKc29uKFNjaGVtYSQxLlN0cnVjdCh7XG5cdFx0ZmlsZUtleTogU2NoZW1hJDEuU3RyaW5nLFxuXHRcdGVycm9yOiBTY2hlbWEkMS5TdHJpbmdcblx0fSkpO1xuXHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiSGFuZGxpbmcgZXJyb3IgY2FsbGJhY2sgcmVxdWVzdCB3aXRoIGlucHV0OlwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJqc29uXCIsIHJlcXVlc3RJbnB1dCkpO1xuXHRjb25zdCBhZGFwdGVyQXJncyA9IHlpZWxkKiBBZGFwdGVyQXJndW1lbnRzO1xuXHRjb25zdCBmaWJlciA9IHlpZWxkKiBFZmZlY3QudHJ5UHJvbWlzZSh7XG5cdFx0dHJ5OiBhc3luYyAoKSA9PiB1cGxvYWRhYmxlLm9uVXBsb2FkRXJyb3Ioe1xuXHRcdFx0Li4uYWRhcHRlckFyZ3MsXG5cdFx0XHRlcnJvcjogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRcdFx0XHRjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcblx0XHRcdFx0bWVzc2FnZTogYFVwbG9hZCBmYWlsZWQgZm9yICR7cmVxdWVzdElucHV0LmZpbGVLZXl9OiAke3JlcXVlc3RJbnB1dC5lcnJvcn1gXG5cdFx0XHR9KSxcblx0XHRcdGZpbGVLZXk6IHJlcXVlc3RJbnB1dC5maWxlS2V5XG5cdFx0fSksXG5cdFx0Y2F0Y2g6IChlcnJvcikgPT4gbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRcdFx0Y29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcblx0XHRcdG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJ1biBvblVwbG9hZEVycm9yXCIsXG5cdFx0XHRjYXVzZTogZXJyb3Jcblx0XHR9KVxuXHR9KS5waXBlKEVmZmVjdC50YXBFcnJvcigoZXJyb3IpID0+IEVmZmVjdC5sb2dFcnJvcihcIkZhaWxlZCB0byBydW4gb25VcGxvYWRFcnJvci4gWW91IHByb2JhYmx5IHNob3VsZG4ndCBiZSB0aHJvd2luZyBlcnJvcnMgaGVyZS5cIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiZXJyb3JcIiwgZXJyb3IpKSkpLnBpcGUoRWZmZWN0Lmlnbm9yZUxvZ2dlZCwgRWZmZWN0LmZvcmtEYWVtb24pO1xuXHRyZXR1cm4ge1xuXHRcdGJvZHk6IG51bGwsXG5cdFx0ZmliZXJcblx0fTtcbn0pLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiaGFuZGxlRXJyb3JSZXF1ZXN0XCIpKTtcbmNvbnN0IGhhbmRsZUNhbGxiYWNrUmVxdWVzdCA9IChvcHRzKSA9PiBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdGNvbnN0IHsgdXBsb2FkYWJsZSwgZmVQYWNrYWdlLCBiZUFkYXB0ZXIgfSA9IG9wdHM7XG5cdGNvbnN0IHJlcXVlc3QgPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3QuSHR0cFNlcnZlclJlcXVlc3Q7XG5cdGNvbnN0IHsgYXBpS2V5IH0gPSB5aWVsZCogVVRUb2tlbjtcblx0Y29uc3QgdmVyaWZpZWQgPSB5aWVsZCogdmVyaWZ5U2lnbmF0dXJlKHlpZWxkKiByZXF1ZXN0LnRleHQsIHJlcXVlc3QuaGVhZGVyc1tcIngtdXBsb2FkdGhpbmctc2lnbmF0dXJlXCJdID8/IG51bGwsIGFwaUtleSk7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoYFNpZ25hdHVyZSB2ZXJpZmllZDogJHt2ZXJpZmllZH1gKTtcblx0aWYgKCF2ZXJpZmllZCkge1xuXHRcdHlpZWxkKiBFZmZlY3QubG9nRXJyb3IoXCJJbnZhbGlkIHNpZ25hdHVyZVwiKTtcblx0XHRyZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IFwiSW52YWxpZCBzaWduYXR1cmVcIlxuXHRcdH0pO1xuXHR9XG5cdGNvbnN0IHJlcXVlc3RJbnB1dCA9IHlpZWxkKiBIdHRwU2VydmVyUmVxdWVzdC5zY2hlbWFCb2R5SnNvbihTY2hlbWEkMS5TdHJ1Y3Qoe1xuXHRcdHN0YXR1czogU2NoZW1hJDEuU3RyaW5nLFxuXHRcdGZpbGU6IFVwbG9hZGVkRmlsZURhdGEsXG5cdFx0b3JpZ2luOiBTY2hlbWEkMS5TdHJpbmcsXG5cdFx0bWV0YWRhdGE6IFNjaGVtYSQxLlJlY29yZCh7XG5cdFx0XHRrZXk6IFNjaGVtYSQxLlN0cmluZyxcblx0XHRcdHZhbHVlOiBTY2hlbWEkMS5Vbmtub3duXG5cdFx0fSlcblx0fSkpO1xuXHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiSGFuZGxpbmcgY2FsbGJhY2sgcmVxdWVzdCB3aXRoIGlucHV0OlwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJqc29uXCIsIHJlcXVlc3RJbnB1dCkpO1xuXHQvKipcblx0KiBSdW4gYC5vblVwbG9hZENvbXBsZXRlYCBhcyBhIGRhZW1vbiB0byBwcmV2ZW50IHRoZVxuXHQqIHJlcXVlc3QgZnJvbSBVVCB0byBwb3RlbnRpYWxseSB0aW1lb3V0LlxuXHQqL1xuXHRjb25zdCBmaWJlciA9IHlpZWxkKiBFZmZlY3QuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdFx0Y29uc3QgYWRhcHRlckFyZ3MgPSB5aWVsZCogQWRhcHRlckFyZ3VtZW50cztcblx0XHRjb25zdCBzZXJ2ZXJEYXRhID0geWllbGQqIEVmZmVjdC50cnlQcm9taXNlKHtcblx0XHRcdHRyeTogYXN5bmMgKCkgPT4gdXBsb2FkYWJsZS5vblVwbG9hZENvbXBsZXRlKHtcblx0XHRcdFx0Li4uYWRhcHRlckFyZ3MsXG5cdFx0XHRcdGZpbGU6IHtcblx0XHRcdFx0XHQuLi5yZXF1ZXN0SW5wdXQuZmlsZSxcblx0XHRcdFx0XHRnZXQgdXJsKCkge1xuXHRcdFx0XHRcdFx0bG9nRGVwcmVjYXRpb25XYXJuaW5nKFwiYGZpbGUudXJsYCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBsb2FkdGhpbmcgdjkuIFVzZSBgZmlsZS51ZnNVcmxgIGluc3RlYWQuXCIpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlcXVlc3RJbnB1dC5maWxlLnVybDtcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGdldCBhcHBVcmwoKSB7XG5cdFx0XHRcdFx0XHRsb2dEZXByZWNhdGlvbldhcm5pbmcoXCJgZmlsZS5hcHBVcmxgIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB1cGxvYWR0aGluZyB2OS4gVXNlIGBmaWxlLnVmc1VybGAgaW5zdGVhZC5cIik7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVxdWVzdElucHV0LmZpbGUuYXBwVXJsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0bWV0YWRhdGE6IHJlcXVlc3RJbnB1dC5tZXRhZGF0YVxuXHRcdFx0fSksXG5cdFx0XHRjYXRjaDogKGVycm9yKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0XHRcdGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG5cdFx0XHRcdG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHJ1biBvblVwbG9hZENvbXBsZXRlLiBZb3UgcHJvYmFibHkgc2hvdWxkbid0IGJlIHRocm93aW5nIGVycm9ycyBoZXJlLlwiLFxuXHRcdFx0XHRjYXVzZTogZXJyb3Jcblx0XHRcdH0pXG5cdFx0fSk7XG5cdFx0Y29uc3QgcGF5bG9hZCA9IHtcblx0XHRcdGZpbGVLZXk6IHJlcXVlc3RJbnB1dC5maWxlLmtleSxcblx0XHRcdGNhbGxiYWNrRGF0YTogc2VydmVyRGF0YSA/PyBudWxsXG5cdFx0fTtcblx0XHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiJ29uVXBsb2FkQ29tcGxldGUnIGNhbGxiYWNrIGZpbmlzaGVkLiBTZW5kaW5nIHJlc3BvbnNlIHRvIFVwbG9hZFRoaW5nOlwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJjYWxsYmFja0RhdGFcIiwgcGF5bG9hZCkpO1xuXHRcdGNvbnN0IGh0dHBDbGllbnQgPSAoeWllbGQqIEh0dHBDbGllbnQuSHR0cENsaWVudCkucGlwZShIdHRwQ2xpZW50LmZpbHRlclN0YXR1c09rKTtcblx0XHR5aWVsZCogSHR0cENsaWVudFJlcXVlc3QucG9zdChgL2NhbGxiYWNrLXJlc3VsdGApLnBpcGUoSHR0cENsaWVudFJlcXVlc3QucHJlcGVuZFVybChyZXF1ZXN0SW5wdXQub3JpZ2luKSwgSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVycyh7XG5cdFx0XHRcIngtdXBsb2FkdGhpbmctYXBpLWtleVwiOiBSZWRhY3RlZC52YWx1ZShhcGlLZXkpLFxuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogdmVyc2lvbixcblx0XHRcdFwieC11cGxvYWR0aGluZy1iZS1hZGFwdGVyXCI6IGJlQWRhcHRlcixcblx0XHRcdFwieC11cGxvYWR0aGluZy1mZS1wYWNrYWdlXCI6IGZlUGFja2FnZVxuXHRcdH0pLCBIdHRwQ2xpZW50UmVxdWVzdC5ib2R5SnNvbihwYXlsb2FkKSwgRWZmZWN0LmZsYXRNYXAoaHR0cENsaWVudC5leGVjdXRlKSwgRWZmZWN0LnRhcEVycm9yKGxvZ0h0dHBDbGllbnRFcnJvcihcIkZhaWxlZCB0byByZWdpc3RlciBjYWxsYmFjayByZXN1bHRcIikpLCBFZmZlY3QuZmxhdE1hcChIdHRwQ2xpZW50UmVzcG9uc2Uuc2NoZW1hQm9keUpzb24oQ2FsbGJhY2tSZXN1bHRSZXNwb25zZSkpLCBFZmZlY3QudGFwKEVmZmVjdC5sb2coXCJTZW50IGNhbGxiYWNrIHJlc3VsdCB0byBVcGxvYWRUaGluZ1wiKSksIEVmZmVjdC5zY29wZWQpO1xuXHR9KS5waXBlKEVmZmVjdC5pZ25vcmVMb2dnZWQsIEVmZmVjdC5mb3JrRGFlbW9uKTtcblx0cmV0dXJuIHtcblx0XHRib2R5OiBudWxsLFxuXHRcdGZpYmVyXG5cdH07XG59KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImhhbmRsZUNhbGxiYWNrUmVxdWVzdFwiKSk7XG5jb25zdCBydW5Sb3V0ZU1pZGRsZXdhcmUgPSAob3B0cykgPT4gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuXHRjb25zdCB7IGpzb246IHsgZmlsZXMsIGlucHV0IH0sIHVwbG9hZGFibGUgfSA9IG9wdHM7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJSdW5uaW5nIG1pZGRsZXdhcmVcIik7XG5cdGNvbnN0IGFkYXB0ZXJBcmdzID0geWllbGQqIEFkYXB0ZXJBcmd1bWVudHM7XG5cdGNvbnN0IG1ldGFkYXRhID0geWllbGQqIEVmZmVjdC50cnlQcm9taXNlKHtcblx0XHR0cnk6IGFzeW5jICgpID0+IHVwbG9hZGFibGUubWlkZGxld2FyZSh7XG5cdFx0XHQuLi5hZGFwdGVyQXJncyxcblx0XHRcdGlucHV0LFxuXHRcdFx0ZmlsZXNcblx0XHR9KSxcblx0XHRjYXRjaDogKGVycm9yKSA9PiBlcnJvciBpbnN0YW5jZW9mIFVwbG9hZFRoaW5nRXJyb3IgPyBlcnJvciA6IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0XHRcdGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG5cdFx0XHRtZXNzYWdlOiBcIkZhaWxlZCB0byBydW4gbWlkZGxld2FyZVwiLFxuXHRcdFx0Y2F1c2U6IGVycm9yXG5cdFx0fSlcblx0fSk7XG5cdGlmIChtZXRhZGF0YVtVVEZpbGVzXSAmJiBtZXRhZGF0YVtVVEZpbGVzXS5sZW5ndGggIT09IGZpbGVzLmxlbmd0aCkge1xuXHRcdGNvbnN0IG1zZyA9IGBFeHBlY3RlZCBmaWxlcyBvdmVycmlkZSB0byBoYXZlIHRoZSBzYW1lIGxlbmd0aCBhcyBvcmlnaW5hbCBmaWxlcywgZ290ICR7bWV0YWRhdGFbVVRGaWxlc10ubGVuZ3RofSBidXQgZXhwZWN0ZWQgJHtmaWxlcy5sZW5ndGh9YDtcblx0XHR5aWVsZCogRWZmZWN0LmxvZ0Vycm9yKG1zZyk7XG5cdFx0cmV0dXJuIHlpZWxkKiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBcIkZpbGVzIG92ZXJyaWRlIG11c3QgaGF2ZSB0aGUgc2FtZSBsZW5ndGggYXMgZmlsZXNcIixcblx0XHRcdGNhdXNlOiBtc2dcblx0XHR9KTtcblx0fVxuXHRjb25zdCBmaWxlc1dpdGhDdXN0b21JZHMgPSB5aWVsZCogRWZmZWN0LmZvckVhY2goZmlsZXMsIChmaWxlLCBpZHgpID0+IEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcblx0XHRjb25zdCB0aGVpcnMgPSBtZXRhZGF0YVtVVEZpbGVzXT8uW2lkeF07XG5cdFx0aWYgKHRoZWlycyAmJiB0aGVpcnMuc2l6ZSAhPT0gZmlsZS5zaXplKSB5aWVsZCogRWZmZWN0LmxvZ1dhcm5pbmcoXCJGaWxlIHNpemUgbWlzbWF0Y2guIFJldmVydGluZyB0byBvcmlnaW5hbCBzaXplXCIpO1xuXHRcdHJldHVybiB7XG5cdFx0XHRuYW1lOiB0aGVpcnM/Lm5hbWUgPz8gZmlsZS5uYW1lLFxuXHRcdFx0c2l6ZTogZmlsZS5zaXplLFxuXHRcdFx0dHlwZTogZmlsZS50eXBlLFxuXHRcdFx0Y3VzdG9tSWQ6IHRoZWlycz8uY3VzdG9tSWQsXG5cdFx0XHRsYXN0TW9kaWZpZWQ6IHRoZWlycz8ubGFzdE1vZGlmaWVkID8/IERhdGUubm93KClcblx0XHR9O1xuXHR9KSk7XG5cdHJldHVybiB7XG5cdFx0bWV0YWRhdGEsXG5cdFx0ZmlsZXNXaXRoQ3VzdG9tSWRzLFxuXHRcdHByZWZlcnJlZFJlZ2lvbjogbWV0YWRhdGFbVVRSZWdpb25dXG5cdH07XG59KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcInJ1blJvdXRlTWlkZGxld2FyZVwiKSk7XG5jb25zdCBoYW5kbGVVcGxvYWRBY3Rpb24gPSAob3B0cykgPT4gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuXHRjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50Lkh0dHBDbGllbnQpLnBpcGUoSHR0cENsaWVudC5maWx0ZXJTdGF0dXNPayk7XG5cdGNvbnN0IHsgdXBsb2FkYWJsZSwgZmVQYWNrYWdlLCBiZUFkYXB0ZXIsIHNsdWcgfSA9IG9wdHM7XG5cdGNvbnN0IGpzb24gPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3Quc2NoZW1hQm9keUpzb24oVXBsb2FkQWN0aW9uUGF5bG9hZCk7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJIYW5kbGluZyB1cGxvYWQgcmVxdWVzdFwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJqc29uXCIsIGpzb24pKTtcblx0eWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlBhcnNpbmcgdXNlciBpbnB1dFwiKTtcblx0Y29uc3QgcGFyc2VkSW5wdXQgPSB5aWVsZCogRWZmZWN0LnRyeVByb21pc2Uoe1xuXHRcdHRyeTogKCkgPT4gZ2V0UGFyc2VGbih1cGxvYWRhYmxlLmlucHV0UGFyc2VyKShqc29uLmlucHV0KSxcblx0XHRjYXRjaDogKGVycm9yKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBcIkludmFsaWQgaW5wdXRcIixcblx0XHRcdGNhdXNlOiBlcnJvclxuXHRcdH0pXG5cdH0pO1xuXHR5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiSW5wdXQgcGFyc2VkIHN1Y2Nlc3NmdWxseVwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJpbnB1dFwiLCBwYXJzZWRJbnB1dCkpO1xuXHRjb25zdCB7IG1ldGFkYXRhLCBmaWxlc1dpdGhDdXN0b21JZHMsIHByZWZlcnJlZFJlZ2lvbiB9ID0geWllbGQqIHJ1blJvdXRlTWlkZGxld2FyZSh7XG5cdFx0anNvbjoge1xuXHRcdFx0aW5wdXQ6IHBhcnNlZElucHV0LFxuXHRcdFx0ZmlsZXM6IGpzb24uZmlsZXNcblx0XHR9LFxuXHRcdHVwbG9hZGFibGVcblx0fSk7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJQYXJzaW5nIHJvdXRlIGNvbmZpZ1wiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJyb3V0ZXJDb25maWdcIiwgdXBsb2FkYWJsZS5yb3V0ZXJDb25maWcpKTtcblx0Y29uc3QgcGFyc2VkQ29uZmlnID0geWllbGQqIGZpbGxJbnB1dFJvdXRlQ29uZmlnKHVwbG9hZGFibGUucm91dGVyQ29uZmlnKS5waXBlKEVmZmVjdC5jYXRjaFRhZyhcIkludmFsaWRSb3V0ZUNvbmZpZ1wiLCAoZXJyKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0Y29kZTogXCJCQURfUkVRVUVTVFwiLFxuXHRcdG1lc3NhZ2U6IFwiSW52YWxpZCByb3V0ZSBjb25maWdcIixcblx0XHRjYXVzZTogZXJyXG5cdH0pKSk7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJSb3V0ZSBjb25maWcgcGFyc2VkIHN1Y2Nlc3NmdWxseVwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJyb3V0ZUNvbmZpZ1wiLCBwYXJzZWRDb25maWcpKTtcblx0eWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlZhbGlkYXRpbmcgZmlsZXMgbWVldCB0aGUgY29uZmlnIHJlcXVpcmVtZW50c1wiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJmaWxlc1wiLCBqc29uLmZpbGVzKSk7XG5cdHlpZWxkKiBhc3NlcnRGaWxlc01lZXRDb25maWcoanNvbi5maWxlcywgcGFyc2VkQ29uZmlnKS5waXBlKEVmZmVjdC5tYXBFcnJvcigoZSkgPT4gbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuXHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRtZXNzYWdlOiBgSW52YWxpZCBjb25maWc6ICR7ZS5fdGFnfWAsXG5cdFx0Y2F1c2U6IFwicmVhc29uXCIgaW4gZSA/IGUucmVhc29uIDogZS5tZXNzYWdlXG5cdH0pKSk7XG5cdHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJGaWxlcyB2YWxpZGF0ZWQuXCIpO1xuXHRjb25zdCBmaWxlVXBsb2FkUmVxdWVzdHMgPSB5aWVsZCogRWZmZWN0LmZvckVhY2goZmlsZXNXaXRoQ3VzdG9tSWRzLCAoZmlsZSkgPT4gRWZmZWN0Lm1hcChtYXRjaEZpbGVUeXBlKGZpbGUsIG9iamVjdEtleXMocGFyc2VkQ29uZmlnKSksICh0eXBlKSA9PiAoe1xuXHRcdG5hbWU6IGZpbGUubmFtZSxcblx0XHRzaXplOiBmaWxlLnNpemUsXG5cdFx0dHlwZTogZmlsZS50eXBlIHx8IHR5cGUsXG5cdFx0bGFzdE1vZGlmaWVkOiBmaWxlLmxhc3RNb2RpZmllZCxcblx0XHRjdXN0b21JZDogZmlsZS5jdXN0b21JZCxcblx0XHRjb250ZW50RGlzcG9zaXRpb246IHBhcnNlZENvbmZpZ1t0eXBlXT8uY29udGVudERpc3Bvc2l0aW9uID8/IFwiaW5saW5lXCIsXG5cdFx0YWNsOiBwYXJzZWRDb25maWdbdHlwZV0/LmFjbFxuXHR9KSkpLnBpcGUoRWZmZWN0LmNhdGNoVGFncyh7XG5cdFx0SW52YWxpZEZpbGVUeXBlOiAoZSkgPT4gRWZmZWN0LmRpZShlKSxcblx0XHRVbmtub3duRmlsZVR5cGU6IChlKSA9PiBFZmZlY3QuZGllKGUpXG5cdH0pKTtcblx0Y29uc3Qgcm91dGVPcHRpb25zID0gdXBsb2FkYWJsZS5yb3V0ZU9wdGlvbnM7XG5cdGNvbnN0IHsgYXBpS2V5LCBhcHBJZCB9ID0geWllbGQqIFVUVG9rZW47XG5cdGNvbnN0IGluZ2VzdFVybCA9IHlpZWxkKiBJbmdlc3RVcmwocHJlZmVycmVkUmVnaW9uKTtcblx0Y29uc3QgaXNEZXYgPSB5aWVsZCogSXNEZXZlbG9wbWVudDtcblx0eWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIkdlbmVyYXRpbmcgcHJlc2lnbmVkIFVSTHNcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiZmlsZVVwbG9hZFJlcXVlc3RzXCIsIGZpbGVVcGxvYWRSZXF1ZXN0cyksIEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJpbmdlc3RVcmxcIiwgaW5nZXN0VXJsKSk7XG5cdGNvbnN0IHByZXNpZ25lZFVybHMgPSB5aWVsZCogRWZmZWN0LmZvckVhY2goZmlsZVVwbG9hZFJlcXVlc3RzLCAoZmlsZSkgPT4gRWZmZWN0LmdlbihmdW5jdGlvbiogKCkge1xuXHRcdGNvbnN0IGtleSA9IHlpZWxkKiBnZW5lcmF0ZUtleShmaWxlLCBhcHBJZCwgcm91dGVPcHRpb25zLmdldEZpbGVIYXNoUGFydHMpO1xuXHRcdGNvbnN0IHVybCA9IHlpZWxkKiBnZW5lcmF0ZVNpZ25lZFVSTChgJHtpbmdlc3RVcmx9LyR7a2V5fWAsIGFwaUtleSwge1xuXHRcdFx0dHRsSW5TZWNvbmRzOiByb3V0ZU9wdGlvbnMucHJlc2lnbmVkVVJMVFRMLFxuXHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcIngtdXQtaWRlbnRpZmllclwiOiBhcHBJZCxcblx0XHRcdFx0XCJ4LXV0LWZpbGUtbmFtZVwiOiBmaWxlLm5hbWUsXG5cdFx0XHRcdFwieC11dC1maWxlLXNpemVcIjogZmlsZS5zaXplLFxuXHRcdFx0XHRcIngtdXQtZmlsZS10eXBlXCI6IGZpbGUudHlwZSxcblx0XHRcdFx0XCJ4LXV0LXNsdWdcIjogc2x1Zyxcblx0XHRcdFx0XCJ4LXV0LWN1c3RvbS1pZFwiOiBmaWxlLmN1c3RvbUlkLFxuXHRcdFx0XHRcIngtdXQtY29udGVudC1kaXNwb3NpdGlvblwiOiBmaWxlLmNvbnRlbnREaXNwb3NpdGlvbixcblx0XHRcdFx0XCJ4LXV0LWFjbFwiOiBmaWxlLmFjbFxuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiB7XG5cdFx0XHR1cmwsXG5cdFx0XHRrZXlcblx0XHR9O1xuXHR9KSwgeyBjb25jdXJyZW5jeTogXCJ1bmJvdW5kZWRcIiB9KTtcblx0Y29uc3Qgc2VydmVyUmVxID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0Lkh0dHBTZXJ2ZXJSZXF1ZXN0O1xuXHRjb25zdCByZXF1ZXN0VXJsID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0LnRvVVJMKHNlcnZlclJlcSk7XG5cdGNvbnN0IGRldkhvb2tSZXF1ZXN0ID0geWllbGQqIENvbmZpZy5zdHJpbmcoXCJjYWxsYmFja1VybFwiKS5waXBlKENvbmZpZy53aXRoRGVmYXVsdChyZXF1ZXN0VXJsLm9yaWdpbiArIHJlcXVlc3RVcmwucGF0aG5hbWUpLCBFZmZlY3QubWFwKCh1cmwpID0+IEh0dHBDbGllbnRSZXF1ZXN0LnBvc3QodXJsKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LmFwcGVuZFVybFBhcmFtKFwic2x1Z1wiLCBzbHVnKSkpKTtcblx0Y29uc3QgbWV0YWRhdGFSZXF1ZXN0ID0gSHR0cENsaWVudFJlcXVlc3QucG9zdChcIi9yb3V0ZS1tZXRhZGF0YVwiKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LnByZXBlbmRVcmwoaW5nZXN0VXJsKSwgSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVycyh7XG5cdFx0XCJ4LXVwbG9hZHRoaW5nLWFwaS1rZXlcIjogUmVkYWN0ZWQudmFsdWUoYXBpS2V5KSxcblx0XHRcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiB2ZXJzaW9uLFxuXHRcdFwieC11cGxvYWR0aGluZy1iZS1hZGFwdGVyXCI6IGJlQWRhcHRlcixcblx0XHRcIngtdXBsb2FkdGhpbmctZmUtcGFja2FnZVwiOiBmZVBhY2thZ2Vcblx0fSksIEh0dHBDbGllbnRSZXF1ZXN0LmJvZHlKc29uKHtcblx0XHRmaWxlS2V5czogcHJlc2lnbmVkVXJscy5tYXAoKHsga2V5IH0pID0+IGtleSksXG5cdFx0bWV0YWRhdGEsXG5cdFx0aXNEZXYsXG5cdFx0Y2FsbGJhY2tVcmw6IGRldkhvb2tSZXF1ZXN0LnVybCxcblx0XHRjYWxsYmFja1NsdWc6IHNsdWcsXG5cdFx0YXdhaXRTZXJ2ZXJEYXRhOiByb3V0ZU9wdGlvbnMuYXdhaXRTZXJ2ZXJEYXRhID8/IHRydWVcblx0fSksIEVmZmVjdC5mbGF0TWFwKGh0dHBDbGllbnQuZXhlY3V0ZSkpO1xuXHRjb25zdCBoYW5kbGVEZXZTdHJlYW1FcnJvciA9IEVmZmVjdC5mbihcImhhbmRsZURldlN0cmVhbUVycm9yXCIpKGZ1bmN0aW9uKiAoZXJyLCBjaHVuaykge1xuXHRcdGNvbnN0IHNjaGVtYSA9IFNjaGVtYSQxLnBhcnNlSnNvbihTY2hlbWEkMS5TdHJ1Y3QoeyBmaWxlOiBVcGxvYWRlZEZpbGVEYXRhIH0pKTtcblx0XHRjb25zdCBwYXJzZWRDaHVuayA9IHlpZWxkKiBTY2hlbWEkMS5kZWNvZGVVbmtub3duKHNjaGVtYSkoY2h1bmspO1xuXHRcdGNvbnN0IGtleSA9IHBhcnNlZENodW5rLmZpbGUua2V5O1xuXHRcdHlpZWxkKiBFZmZlY3QubG9nRXJyb3IoXCJGYWlsZWQgdG8gZm9yd2FyZCBjYWxsYmFjayByZXF1ZXN0IGZyb20gZGV2IHN0cmVhbVwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3Moe1xuXHRcdFx0ZmlsZUtleToga2V5LFxuXHRcdFx0ZXJyb3I6IGVyci5tZXNzYWdlXG5cdFx0fSkpO1xuXHRcdGNvbnN0IGh0dHBSZXNwb25zZSA9IHlpZWxkKiBIdHRwQ2xpZW50UmVxdWVzdC5wb3N0KFwiL2NhbGxiYWNrLXJlc3VsdFwiKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LnByZXBlbmRVcmwoaW5nZXN0VXJsKSwgSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVycyh7XG5cdFx0XHRcIngtdXBsb2FkdGhpbmctYXBpLWtleVwiOiBSZWRhY3RlZC52YWx1ZShhcGlLZXkpLFxuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogdmVyc2lvbixcblx0XHRcdFwieC11cGxvYWR0aGluZy1iZS1hZGFwdGVyXCI6IGJlQWRhcHRlcixcblx0XHRcdFwieC11cGxvYWR0aGluZy1mZS1wYWNrYWdlXCI6IGZlUGFja2FnZVxuXHRcdH0pLCBIdHRwQ2xpZW50UmVxdWVzdC5ib2R5SnNvbih7XG5cdFx0XHRmaWxlS2V5OiBrZXksXG5cdFx0XHRlcnJvcjogYEZhaWxlZCB0byBmb3J3YXJkIGNhbGxiYWNrIHJlcXVlc3QgZnJvbSBkZXYgc3RyZWFtOiAke2Vyci5tZXNzYWdlfWBcblx0XHR9KSwgRWZmZWN0LmZsYXRNYXAoaHR0cENsaWVudC5leGVjdXRlKSk7XG5cdFx0eWllbGQqIGxvZ0h0dHBDbGllbnRSZXNwb25zZShcIlJlcG9ydGVkIGNhbGxiYWNrIGVycm9yIHRvIFVwbG9hZFRoaW5nXCIpKGh0dHBSZXNwb25zZSk7XG5cdH0pO1xuXHRjb25zdCBmaWJlciA9IHlpZWxkKiBFZmZlY3QuaWYoaXNEZXYsIHtcblx0XHRvblRydWU6ICgpID0+IG1ldGFkYXRhUmVxdWVzdC5waXBlKEVmZmVjdC50YXBCb3RoKHtcblx0XHRcdG9uU3VjY2VzczogbG9nSHR0cENsaWVudFJlc3BvbnNlKFwiUmVnaXN0ZXJlZCBtZXRhZGF0YVwiLCB7IG1peGluOiBcIk5vbmVcIiB9KSxcblx0XHRcdG9uRmFpbHVyZTogbG9nSHR0cENsaWVudEVycm9yKFwiRmFpbGVkIHRvIHJlZ2lzdGVyIG1ldGFkYXRhXCIpXG5cdFx0fSksIEh0dHBDbGllbnRSZXNwb25zZS5zdHJlYW0sIGhhbmRsZUpzb25MaW5lU3RyZWFtKE1ldGFkYXRhRmV0Y2hTdHJlYW1QYXJ0LCAoY2h1bmspID0+IGRldkhvb2tSZXF1ZXN0LnBpcGUoSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVycyh7XG5cdFx0XHRcInVwbG9hZHRoaW5nLWhvb2tcIjogY2h1bmsuaG9vayxcblx0XHRcdFwieC11cGxvYWR0aGluZy1zaWduYXR1cmVcIjogY2h1bmsuc2lnbmF0dXJlXG5cdFx0fSksIEh0dHBDbGllbnRSZXF1ZXN0LnNldEJvZHkoSHR0cEJvZHkudGV4dChjaHVuay5wYXlsb2FkLCBcImFwcGxpY2F0aW9uL2pzb25cIikpLCBodHRwQ2xpZW50LmV4ZWN1dGUsIEVmZmVjdC50YXAobG9nSHR0cENsaWVudFJlc3BvbnNlKFwiU3VjY2Vzc2Z1bGx5IGZvcndhcmRlZCBjYWxsYmFjayByZXF1ZXN0IGZyb20gZGV2IHN0cmVhbVwiKSksIEVmZmVjdC5jYXRjaFRhZyhcIlJlc3BvbnNlRXJyb3JcIiwgKGVycikgPT4gaGFuZGxlRGV2U3RyZWFtRXJyb3IoZXJyLCBjaHVuay5wYXlsb2FkKSksIEVmZmVjdC5hbm5vdGF0ZUxvZ3MoY2h1bmspLCBFZmZlY3QuYXNWb2lkLCBFZmZlY3QuaWdub3JlTG9nZ2VkLCBFZmZlY3Quc2NvcGVkKSkpLFxuXHRcdG9uRmFsc2U6ICgpID0+IG1ldGFkYXRhUmVxdWVzdC5waXBlKEVmZmVjdC50YXBCb3RoKHtcblx0XHRcdG9uU3VjY2VzczogbG9nSHR0cENsaWVudFJlc3BvbnNlKFwiUmVnaXN0ZXJlZCBtZXRhZGF0YVwiKSxcblx0XHRcdG9uRmFpbHVyZTogbG9nSHR0cENsaWVudEVycm9yKFwiRmFpbGVkIHRvIHJlZ2lzdGVyIG1ldGFkYXRhXCIpXG5cdFx0fSksIEVmZmVjdC5mbGF0TWFwKEh0dHBDbGllbnRSZXNwb25zZS5zY2hlbWFCb2R5SnNvbihNZXRhZGF0YUZldGNoUmVzcG9uc2UpKSwgRWZmZWN0LnNjb3BlZClcblx0fSkucGlwZShFZmZlY3QuZm9ya0RhZW1vbik7XG5cdGNvbnN0IHByZXNpZ25lZHMgPSBwcmVzaWduZWRVcmxzLm1hcCgocCwgaSkgPT4gKHtcblx0XHR1cmw6IHAudXJsLFxuXHRcdGtleTogcC5rZXksXG5cdFx0bmFtZTogZmlsZVVwbG9hZFJlcXVlc3RzW2ldLm5hbWUsXG5cdFx0Y3VzdG9tSWQ6IGZpbGVVcGxvYWRSZXF1ZXN0c1tpXS5jdXN0b21JZCA/PyBudWxsXG5cdH0pKTtcblx0eWllbGQqIEVmZmVjdC5sb2dJbmZvKFwiU2VuZGluZyBwcmVzaWduZWQgVVJMcyB0byBjbGllbnRcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwicHJlc2lnbmVkVXJsc1wiLCBwcmVzaWduZWRzKSk7XG5cdHJldHVybiB7XG5cdFx0Ym9keTogcHJlc2lnbmVkcyxcblx0XHRmaWJlclxuXHR9O1xufSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJoYW5kbGVVcGxvYWRBY3Rpb25cIikpO1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL3VwbG9hZC1idWlsZGVyLnRzXG5mdW5jdGlvbiBpbnRlcm5hbENyZWF0ZUJ1aWxkZXIoaW5pdERlZiA9IHt9KSB7XG5cdGNvbnN0IF9kZWYgPSB7XG5cdFx0JHR5cGVzOiB7fSxcblx0XHRyb3V0ZXJDb25maWc6IHsgaW1hZ2U6IHsgbWF4RmlsZVNpemU6IFwiNE1CXCIgfSB9LFxuXHRcdHJvdXRlT3B0aW9uczogeyBhd2FpdFNlcnZlckRhdGE6IHRydWUgfSxcblx0XHRpbnB1dFBhcnNlcjoge1xuXHRcdFx0cGFyc2VBc3luYzogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHZvaWQgMCksXG5cdFx0XHRfaW5wdXQ6IHZvaWQgMCxcblx0XHRcdF9vdXRwdXQ6IHZvaWQgMFxuXHRcdH0sXG5cdFx0bWlkZGxld2FyZTogKCkgPT4gKHt9KSxcblx0XHRvblVwbG9hZEVycm9yOiAoKSA9PiB7fSxcblx0XHRvblVwbG9hZENvbXBsZXRlOiAoKSA9PiB2b2lkIDAsXG5cdFx0ZXJyb3JGb3JtYXR0ZXI6IGluaXREZWYuZXJyb3JGb3JtYXR0ZXIgPz8gZGVmYXVsdEVycm9yRm9ybWF0dGVyLFxuXHRcdC4uLmluaXREZWZcblx0fTtcblx0cmV0dXJuIHtcblx0XHRpbnB1dCh1c2VyUGFyc2VyKSB7XG5cdFx0XHRyZXR1cm4gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKHtcblx0XHRcdFx0Li4uX2RlZixcblx0XHRcdFx0aW5wdXRQYXJzZXI6IHVzZXJQYXJzZXJcblx0XHRcdH0pO1xuXHRcdH0sXG5cdFx0bWlkZGxld2FyZSh1c2VyTWlkZGxld2FyZSkge1xuXHRcdFx0cmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG5cdFx0XHRcdC4uLl9kZWYsXG5cdFx0XHRcdG1pZGRsZXdhcmU6IHVzZXJNaWRkbGV3YXJlXG5cdFx0XHR9KTtcblx0XHR9LFxuXHRcdG9uVXBsb2FkQ29tcGxldGUodXNlclVwbG9hZENvbXBsZXRlKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHQuLi5fZGVmLFxuXHRcdFx0XHRvblVwbG9hZENvbXBsZXRlOiB1c2VyVXBsb2FkQ29tcGxldGVcblx0XHRcdH07XG5cdFx0fSxcblx0XHRvblVwbG9hZEVycm9yKHVzZXJPblVwbG9hZEVycm9yKSB7XG5cdFx0XHRyZXR1cm4gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKHtcblx0XHRcdFx0Li4uX2RlZixcblx0XHRcdFx0b25VcGxvYWRFcnJvcjogdXNlck9uVXBsb2FkRXJyb3Jcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcbn1cbi8qKlxuKiBDcmVhdGUgYSBidWlsZGVyIGZvciB5b3VyIGJhY2tlbmQgYWRhcHRlci5cbiogUmVmZXIgdG8gdGhlIGV4aXN0aW5nIGFkYXB0ZXJzIGZvciBleGFtcGxlcyBvbiBob3cgdG8gdXNlIHRoaXMgZnVuY3Rpb24uXG4qIEBwdWJsaWNcbipcbiogQHBhcmFtIG9wdHMgLSBPcHRpb25zIGZvciB0aGUgYnVpbGRlclxuKiBAcmV0dXJucyBBIGZpbGUgcm91dGUgYnVpbGRlciBmb3IgbWFraW5nIFVwbG9hZFRoaW5nIGZpbGUgcm91dGVzXG4qL1xuZnVuY3Rpb24gY3JlYXRlQnVpbGRlcihvcHRzKSB7XG5cdHJldHVybiAoaW5wdXQsIGNvbmZpZykgPT4ge1xuXHRcdHJldHVybiBpbnRlcm5hbENyZWF0ZUJ1aWxkZXIoe1xuXHRcdFx0cm91dGVyQ29uZmlnOiBpbnB1dCxcblx0XHRcdHJvdXRlT3B0aW9uczogY29uZmlnID8/IHt9LFxuXHRcdFx0Li4ub3B0c1xuXHRcdH0pO1xuXHR9O1xufVxuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IEFkYXB0ZXJBcmd1bWVudHMsIEFwaVVybCwgSW5nZXN0VXJsLCBVVEZpbGVzIGFzIFVURmlsZXMkMSwgVVRSZWdpb24gYXMgVVRSZWdpb24kMSwgVVRUb2tlbiwgVWZzQXBwSWRMb2NhdGlvbiwgVWZzSG9zdCwgY29uZmlnUHJvdmlkZXIsIGNyZWF0ZUJ1aWxkZXIsIGNyZWF0ZVJlcXVlc3RIYW5kbGVyLCBleHRyYWN0Um91dGVyQ29uZmlnLCBsb2dIdHRwQ2xpZW50RXJyb3IsIGxvZ0h0dHBDbGllbnRSZXNwb25zZSwgbWFrZUFkYXB0ZXJIYW5kbGVyLCBtYWtlUnVudGltZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXBsb2FkLWJ1aWxkZXItZTBfcDlOT1QuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/upload-builder-e0_p9NOT.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/next/index.js":
/*!************************************************!*\
  !*** ./node_modules/uploadthing/next/index.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTFiles: () => (/* reexport safe */ _dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_0__.UTFiles$1),\n/* harmony export */   createRouteHandler: () => (/* binding */ createRouteHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing),\n/* harmony export */   experimental_UTRegion: () => (/* reexport safe */ _dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_0__.UTRegion$1)\n/* harmony export */ });\n/* harmony import */ var _dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/upload-builder-e0_p9NOT.js */ \"(rsc)/./node_modules/uploadthing/dist/upload-builder-e0_p9NOT.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n\n\n\n\n\n\n//#region src/next.ts\nconst createUploadthing = (opts) => (0,_dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_0__.createBuilder)(opts);\nconst createRouteHandler = (opts) => {\n\tconst handler = (0,_dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_0__.makeAdapterHandler)((req) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.succeed({ req }), (req) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.succeed(req), opts, \"nextjs-app\");\n\treturn {\n\t\tPOST: handler,\n\t\tGET: handler\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvbmV4dC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBcUM7QUFDSztBQUNFO0FBQ3lGO0FBQzdGOztBQUV4QztBQUNBLG9DQUFvQywrRUFBYTtBQUNqRDtBQUNBLGlCQUFpQixvRkFBa0IsVUFBVSxrREFBYyxHQUFHLEtBQUssWUFBWSxrREFBYztBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQzZGO0FBQzdGIiwic291cmNlcyI6WyIvVXNlcnMvdXNhbWEvRG9jdW1lbnRzL0dpdEh1Yi9haV9zZWxmaWUvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL25leHQvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwiLi4vZGlzdC9wYWNrYWdlLUJlYi1pYXJFLmpzXCI7XG5pbXBvcnQgXCIuLi9kaXN0L2RlcHJlY2F0aW9ucy1wTG13Nll0ZC5qc1wiO1xuaW1wb3J0IFwiLi4vZGlzdC9zaGFyZWQtc2NoZW1hcy1CSUZEb3FQRi5qc1wiO1xuaW1wb3J0IHsgVVRGaWxlcyQxIGFzIFVURmlsZXMsIFVUUmVnaW9uJDEgYXMgVVRSZWdpb24sIGNyZWF0ZUJ1aWxkZXIsIG1ha2VBZGFwdGVySGFuZGxlciB9IGZyb20gXCIuLi9kaXN0L3VwbG9hZC1idWlsZGVyLWUwX3A5Tk9ULmpzXCI7XG5pbXBvcnQgKiBhcyBFZmZlY3QgZnJvbSBcImVmZmVjdC9FZmZlY3RcIjtcblxuLy8jcmVnaW9uIHNyYy9uZXh0LnRzXG5jb25zdCBjcmVhdGVVcGxvYWR0aGluZyA9IChvcHRzKSA9PiBjcmVhdGVCdWlsZGVyKG9wdHMpO1xuY29uc3QgY3JlYXRlUm91dGVIYW5kbGVyID0gKG9wdHMpID0+IHtcblx0Y29uc3QgaGFuZGxlciA9IG1ha2VBZGFwdGVySGFuZGxlcigocmVxKSA9PiBFZmZlY3Quc3VjY2VlZCh7IHJlcSB9KSwgKHJlcSkgPT4gRWZmZWN0LnN1Y2NlZWQocmVxKSwgb3B0cywgXCJuZXh0anMtYXBwXCIpO1xuXHRyZXR1cm4ge1xuXHRcdFBPU1Q6IGhhbmRsZXIsXG5cdFx0R0VUOiBoYW5kbGVyXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFVURmlsZXMsIGNyZWF0ZVJvdXRlSGFuZGxlciwgY3JlYXRlVXBsb2FkdGhpbmcsIFVUUmVnaW9uIGFzIGV4cGVyaW1lbnRhbF9VVFJlZ2lvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/next/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/server/index.js":
/*!**************************************************!*\
  !*** ./node_modules/uploadthing/server/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTApi: () => (/* binding */ UTApi),\n/* harmony export */   UTFile: () => (/* binding */ UTFile),\n/* harmony export */   UTFiles: () => (/* reexport safe */ _dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.UTFiles$1),\n/* harmony export */   UploadThingError: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError),\n/* harmony export */   createBuilder: () => (/* reexport safe */ _dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.createBuilder),\n/* harmony export */   createRouteHandler: () => (/* binding */ createRouteHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing),\n/* harmony export */   experimental_UTRegion: () => (/* reexport safe */ _dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.UTRegion$1),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig$1),\n/* harmony export */   makeAdapterHandler: () => (/* reexport safe */ _dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.makeAdapterHandler)\n/* harmony export */ });\n/* harmony import */ var _dist_package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../dist/package-Beb-iarE.js */ \"(rsc)/./node_modules/uploadthing/dist/package-Beb-iarE.js\");\n/* harmony import */ var _dist_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../dist/deprecations-pLmw6Ytd.js */ \"(rsc)/./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js\");\n/* harmony import */ var _dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../dist/upload-builder-e0_p9NOT.js */ \"(rsc)/./node_modules/uploadthing/dist/upload-builder-e0_p9NOT.js\");\n/* harmony import */ var effect_Array__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! effect/Array */ \"(rsc)/./node_modules/effect/dist/esm/Array.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var effect_Function__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! effect/Function */ \"(rsc)/./node_modules/effect/dist/esm/Function.js\");\n/* harmony import */ var effect_Predicate__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! effect/Predicate */ \"(rsc)/./node_modules/effect/dist/esm/Predicate.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @effect/platform/HttpClient */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClient.js\");\n/* harmony import */ var _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @effect/platform/HttpClientRequest */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientRequest.js\");\n/* harmony import */ var _effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @effect/platform/HttpClientResponse */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpIncomingMessage.js\");\n/* harmony import */ var effect_Redacted__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! effect/Redacted */ \"(rsc)/./node_modules/effect/dist/esm/Redacted.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var effect_Cause__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! effect/Cause */ \"(rsc)/./node_modules/effect/dist/esm/Cause.js\");\n/* harmony import */ var _uploadthing_mime_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/mime-types */ \"(rsc)/./node_modules/@uploadthing/mime-types/dist/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//#region src/sdk/ut-file.ts\n/**\n* Extension of the Blob class that simplifies setting the `name` and `customId` properties,\n* similar to the built-in File class from Node > 20.\n*/\nvar UTFile = class extends Blob {\n\tname;\n\tlastModified;\n\tcustomId;\n\tconstructor(parts, name, options) {\n\t\tconst optionsWithDefaults = {\n\t\t\t...options,\n\t\t\ttype: options?.type ?? ((0,_uploadthing_mime_types__WEBPACK_IMPORTED_MODULE_0__.lookup)(name) || \"application/octet-stream\"),\n\t\t\tlastModified: options?.lastModified ?? Date.now()\n\t\t};\n\t\tsuper(parts, optionsWithDefaults);\n\t\tthis.name = name;\n\t\tthis.customId = optionsWithDefaults.customId;\n\t\tthis.lastModified = optionsWithDefaults.lastModified;\n\t}\n};\n\n//#endregion\n//#region src/_internal/upload-server.ts\nconst uploadWithoutProgress = (file, presigned) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function* () {\n\tconst formData = new FormData();\n\tformData.append(\"file\", file);\n\tconst httpClient = (yield* _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.HttpClient).pipe(_effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.filterStatusOk);\n\tconst json = yield* _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.put(presigned.url).pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.bodyFormData(formData), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.setHeader(\"Range\", \"bytes=0-\"), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.setHeader(\"x-uploadthing-version\", _dist_package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_4__.version), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_1__.tapError((0,_dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.logHttpClientError)(\"Failed to upload file\")), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.mapError((e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\tcode: \"UPLOAD_FAILED\",\n\t\tmessage: \"Failed to upload file\",\n\t\tcause: e\n\t})), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.andThen((_) => _.json), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.andThen(effect_Function__WEBPACK_IMPORTED_MODULE_7__.unsafeCoerce), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.scoped);\n\tyield* effect_Effect__WEBPACK_IMPORTED_MODULE_1__.logDebug(`File ${file.name} uploaded successfully`).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"json\", json));\n\treturn {\n\t\t...json,\n\t\tget url() {\n\t\t\t(0,_dist_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_8__.logDeprecationWarning)(\"`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n\t\t\treturn json.url;\n\t\t},\n\t\tget appUrl() {\n\t\t\t(0,_dist_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_8__.logDeprecationWarning)(\"`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n\t\t\treturn json.appUrl;\n\t\t}\n\t};\n});\n\n//#endregion\n//#region src/sdk/utils.ts\nfunction guardServerOnly() {\n\tif (typeof window !== \"undefined\") throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\tcode: \"INTERNAL_SERVER_ERROR\",\n\t\tmessage: \"The `utapi` can only be used on the server.\"\n\t});\n}\nconst downloadFile = (_url) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function* () {\n\tlet url = effect_Predicate__WEBPACK_IMPORTED_MODULE_9__.isRecord(_url) ? _url.url : _url;\n\tif (typeof url === \"string\") {\n\t\tif (url.startsWith(\"data:\")) return yield* effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"Please use uploadFiles() for data URLs. uploadFilesFromUrl() is intended for use with remote URLs only.\",\n\t\t\tdata: void 0\n\t\t});\n\t}\n\turl = new URL(url);\n\tconst { name = url.pathname.split(\"/\").pop() ?? \"unknown-filename\", customId = void 0 } = effect_Predicate__WEBPACK_IMPORTED_MODULE_9__.isRecord(_url) ? _url : {};\n\tconst httpClient = (yield* _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.HttpClient).pipe(_effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.filterStatusOk);\n\tconst arrayBuffer = yield* _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.get(url).pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.modify({ headers: {} }), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_1__.flatMap((_) => _.arrayBuffer), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.mapError((cause) => {\n\t\treturn {\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: `Failed to download requested file: ${cause.message}`,\n\t\t\tdata: cause.toJSON()\n\t\t};\n\t}), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.scoped);\n\treturn new UTFile([arrayBuffer], name, {\n\t\tcustomId,\n\t\tlastModified: Date.now()\n\t});\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"downloadFile\"));\nconst generatePresignedUrl = (file, cd, acl) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function* () {\n\tconst { apiKey, appId } = yield* _dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.UTToken;\n\tconst baseUrl = yield* (0,_dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.IngestUrl)(void 0);\n\tconst key = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.generateKey)(file, appId);\n\tconst url = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.generateSignedURL)(`${baseUrl}/${key}`, apiKey, { data: {\n\t\t\"x-ut-identifier\": appId,\n\t\t\"x-ut-file-name\": file.name,\n\t\t\"x-ut-file-size\": file.size,\n\t\t\"x-ut-file-type\": file.type,\n\t\t\"x-ut-custom-id\": file.customId,\n\t\t\"x-ut-content-disposition\": cd,\n\t\t\"x-ut-acl\": acl\n\t} });\n\treturn {\n\t\turl,\n\t\tkey\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"generatePresignedUrl\"));\nconst uploadFile = (file, opts) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function* () {\n\tconst presigned = yield* generatePresignedUrl(file, opts.contentDisposition ?? \"inline\", opts.acl).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"UploadThingError\", (e) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError.toObject(e))), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"ConfigError\", () => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail({\n\t\tcode: \"INVALID_SERVER_CONFIG\",\n\t\tmessage: \"Failed to generate presigned URL\"\n\t})));\n\tconst response = yield* uploadWithoutProgress(file, presigned).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"UploadThingError\", (e) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError.toObject(e))), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"ResponseError\", (e) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.fail({\n\t\tcode: \"UPLOAD_FAILED\",\n\t\tmessage: \"Failed to upload file\",\n\t\tdata: e.toJSON()\n\t})));\n\treturn {\n\t\tkey: presigned.key,\n\t\turl: response.url,\n\t\tappUrl: response.appUrl,\n\t\tufsUrl: response.ufsUrl,\n\t\tlastModified: file.lastModified ?? Date.now(),\n\t\tname: file.name,\n\t\tsize: file.size,\n\t\ttype: file.type,\n\t\tcustomId: file.customId ?? null,\n\t\tfileHash: response.fileHash\n\t};\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"uploadFile\"));\n\n//#endregion\n//#region src/sdk/index.ts\nvar UTApi = class {\n\tfetch;\n\tdefaultKeyType;\n\truntime;\n\topts;\n\tconstructor(options) {\n\t\tguardServerOnly();\n\t\tthis.opts = options ?? {};\n\t\tthis.fetch = this.opts.fetch ?? globalThis.fetch;\n\t\tthis.defaultKeyType = this.opts.defaultKeyType ?? \"fileKey\";\n\t\tthis.runtime = (0,_dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.makeRuntime)(this.fetch, this.opts);\n\t}\n\trequestUploadThing = (pathname, body, responseSchema) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(this, function* () {\n\t\tconst { apiKey } = yield* _dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.UTToken;\n\t\tconst baseUrl = yield* _dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.ApiUrl;\n\t\tconst httpClient = (yield* _effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.HttpClient).pipe(_effect_platform_HttpClient__WEBPACK_IMPORTED_MODULE_2__.filterStatusOk);\n\t\treturn yield* _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.post(pathname).pipe(_effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.prependUrl(baseUrl), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.bodyUnsafeJson(body), _effect_platform_HttpClientRequest__WEBPACK_IMPORTED_MODULE_3__.setHeaders({\n\t\t\t\"x-uploadthing-version\": _dist_package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_4__.version,\n\t\t\t\"x-uploadthing-be-adapter\": \"server-sdk\",\n\t\t\t\"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_10__.value(apiKey)\n\t\t}), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_1__.tapBoth({\n\t\t\tonSuccess: (0,_dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.logHttpClientResponse)(\"UploadThing API Response\"),\n\t\t\tonFailure: (0,_dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.logHttpClientError)(\"Failed to request UploadThing API\")\n\t\t}), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.flatMap(_effect_platform_HttpClientResponse__WEBPACK_IMPORTED_MODULE_11__.schemaBodyJson(responseSchema)), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.scoped);\n\t}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"ConfigError\", (e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\tcode: \"INVALID_SERVER_CONFIG\",\n\t\tmessage: \"There was an error with the server configuration. More info can be found on this error's `cause` property\",\n\t\tcause: e\n\t})), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"utapi.#requestUploadThing\"));\n\texecuteAsync = async (program, signal) => {\n\t\tconst exit = await program.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"utapi.#executeAsync\"), (e) => this.runtime.runPromiseExit(e, signal ? { signal } : void 0));\n\t\tif (exit._tag === \"Failure\") throw effect_Cause__WEBPACK_IMPORTED_MODULE_12__.squash(exit.cause);\n\t\treturn exit.value;\n\t};\n\tuploadFiles(files, opts) {\n\t\tguardServerOnly();\n\t\tconst concurrency = opts?.concurrency ?? 1;\n\t\tif (concurrency < 1 || concurrency > 25) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"concurrency must be a positive integer between 1 and 25\"\n\t\t});\n\t\tconst program = effect_Effect__WEBPACK_IMPORTED_MODULE_1__.forEach(effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(files), (file) => uploadFile(file, opts ?? {}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.match({\n\t\t\tonSuccess: (data) => ({\n\t\t\t\tdata,\n\t\t\t\terror: null\n\t\t\t}),\n\t\t\tonFailure: (error) => ({\n\t\t\t\tdata: null,\n\t\t\t\terror\n\t\t\t})\n\t\t})), { concurrency }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.map((ups) => Array.isArray(files) ? ups : ups[0]), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.tap((res) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.logDebug(\"Finished uploading\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"uploadResult\", res))), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"uploadFiles\"));\n\t\treturn this.executeAsync(program, opts?.signal);\n\t}\n\tuploadFilesFromUrl(urls, opts) {\n\t\tguardServerOnly();\n\t\tconst concurrency = opts?.concurrency ?? 1;\n\t\tif (concurrency < 1 || concurrency > 25) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"concurrency must be a positive integer between 1 and 25\"\n\t\t});\n\t\tconst program = effect_Effect__WEBPACK_IMPORTED_MODULE_1__.forEach(effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(urls), (url) => downloadFile(url).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.flatMap((file) => uploadFile(file, opts ?? {})), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.match({\n\t\t\tonSuccess: (data) => ({\n\t\t\t\tdata,\n\t\t\t\terror: null\n\t\t\t}),\n\t\t\tonFailure: (error) => ({\n\t\t\t\tdata: null,\n\t\t\t\terror\n\t\t\t})\n\t\t})), { concurrency }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.map((ups) => Array.isArray(urls) ? ups : ups[0]), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.tap((res) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.logDebug(\"Finished uploading\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"uploadResult\", res))), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"uploadFiles\")).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"uploadFilesFromUrl\"));\n\t\treturn this.executeAsync(program, opts?.signal);\n\t}\n\t/**\n\t* Request to delete files from UploadThing storage.\n\t* @param {string | string[]} fileKeys\n\t*\n\t* @example\n\t* await deleteFiles(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n\t*\n\t* @example\n\t* await deleteFiles([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n\t*\n\t* @example\n\t* await deleteFiles(\"myCustomIdentifier\", { keyType: \"customId\" })\n\t*/\n\tdeleteFiles = async (keys, opts) => {\n\t\tguardServerOnly();\n\t\tconst { keyType = this.defaultKeyType } = opts ?? {};\n\t\tclass DeleteFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"DeleteFileResponse\")({\n\t\t\tsuccess: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Boolean,\n\t\t\tdeletedCount: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number\n\t\t}) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/deleteFiles\", keyType === \"fileKey\" ? { fileKeys: effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(keys) } : { customIds: effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(keys) }, DeleteFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"deleteFiles\")));\n\t};\n\t/**\n\t* Request file URLs from UploadThing storage.\n\t* @param {string | string[]} fileKeys\n\t*\n\t* @example\n\t* const data = await getFileUrls(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n\t* console.log(data); // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\"}]\n\t*\n\t* @example\n\t* const data = await getFileUrls([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n\t* console.log(data) // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\" },{key: \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\", url: \"https://uploadthing.com/f/1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"}]\n\t*\n\t* @deprecated - See https://docs.uploadthing.com/working-with-files#accessing-files for info how to access files\n\t*/\n\tgetFileUrls = async (keys, opts) => {\n\t\tguardServerOnly();\n\t\tconst { keyType = this.defaultKeyType } = opts ?? {};\n\t\tclass GetFileUrlResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"GetFileUrlResponse\")({ data: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Array(effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Struct({\n\t\t\tkey: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String,\n\t\t\turl: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String\n\t\t})) }) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/getFileUrl\", keyType === \"fileKey\" ? { fileKeys: effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(keys) } : { customIds: effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(keys) }, GetFileUrlResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"getFileUrls\")));\n\t};\n\t/**\n\t* Request file list from UploadThing storage.\n\t* @param {object} opts\n\t* @param {number} opts.limit The maximum number of files to return\n\t* @param {number} opts.offset The number of files to skip\n\t*\n\t* @example\n\t* const data = await listFiles({ limit: 1 });\n\t* console.log(data); // { key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", id: \"2e0fdb64-9957-4262-8e45-f372ba903ac8\" }\n\t*/\n\tlistFiles = async (opts) => {\n\t\tguardServerOnly();\n\t\tclass ListFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"ListFileResponse\")({\n\t\t\thasMore: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Boolean,\n\t\t\tfiles: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Array(effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Struct({\n\t\t\t\tid: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String,\n\t\t\t\tcustomId: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.NullOr(effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String),\n\t\t\t\tkey: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String,\n\t\t\t\tname: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String,\n\t\t\t\tsize: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number,\n\t\t\t\tstatus: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Literal(\"Deletion Pending\", \"Failed\", \"Uploaded\", \"Uploading\"),\n\t\t\t\tuploadedAt: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number\n\t\t\t}))\n\t\t}) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/listFiles\", { ...opts }, ListFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"listFiles\")));\n\t};\n\trenameFiles = async (updates) => {\n\t\tguardServerOnly();\n\t\tclass RenameFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"RenameFileResponse\")({ success: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Boolean }) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/renameFiles\", { updates: effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(updates) }, RenameFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"renameFiles\")));\n\t};\n\tgetUsageInfo = async () => {\n\t\tguardServerOnly();\n\t\tclass GetUsageInfoResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"GetUsageInfoResponse\")({\n\t\t\ttotalBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number,\n\t\t\tappTotalBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number,\n\t\t\tfilesUploaded: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number,\n\t\t\tlimitBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Number\n\t\t}) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/getUsageInfo\", {}, GetUsageInfoResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"getUsageInfo\")));\n\t};\n\t/**\n\t* Generate a presigned url for a private file\n\t* Unlike {@link getSignedURL}, this method does not make a fetch request to the UploadThing API\n\t* and is the recommended way to generate a presigned url for a private file.\n\t**/\n\tgenerateSignedURL = async (key, opts) => {\n\t\tguardServerOnly();\n\t\tconst expiresIn = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.parseTimeToSeconds)(opts?.expiresIn ?? \"5 minutes\");\n\t\tif (opts?.expiresIn && isNaN(expiresIn)) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds.\"\n\t\t});\n\t\tif (expiresIn > 86400 * 7) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"expiresIn must be less than 7 days (604800 seconds).\"\n\t\t});\n\t\tconst program = effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function* () {\n\t\t\tconst { apiKey, appId } = yield* _dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.UTToken;\n\t\t\tconst appIdLocation = yield* _dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.UfsAppIdLocation;\n\t\t\tconst ufsHost = yield* _dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.UfsHost;\n\t\t\tconst proto = ufsHost.includes(\"local\") ? \"http\" : \"https\";\n\t\t\tconst urlBase = appIdLocation === \"subdomain\" ? `${proto}://${appId}.${ufsHost}/f/${key}` : `${proto}://${ufsHost}/a/${appId}/${key}`;\n\t\t\tconst ufsUrl = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.generateSignedURL)(urlBase, apiKey, { ttlInSeconds: expiresIn });\n\t\t\treturn { ufsUrl };\n\t\t});\n\t\treturn await this.executeAsync(program.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.catchTag(\"ConfigError\", (e) => new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"INVALID_SERVER_CONFIG\",\n\t\t\tmessage: \"There was an error with the server configuration. More info can be found on this error's `cause` property\",\n\t\t\tcause: e\n\t\t})), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"generateSignedURL\")));\n\t};\n\t/**\n\t* Request a presigned url for a private file(s)\n\t* @remarks This method is no longer recommended as it makes a fetch\n\t* request to the UploadThing API which incurs redundant latency. It\n\t* will be deprecated in UploadThing v8 and removed in UploadThing v9.\n\t*\n\t* @see {@link generateSignedURL} for a more efficient way to generate a presigned url\n\t**/\n\tgetSignedURL = async (key, opts) => {\n\t\tguardServerOnly();\n\t\tconst expiresIn = opts?.expiresIn ? (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.parseTimeToSeconds)(opts.expiresIn) : void 0;\n\t\tconst { keyType = this.defaultKeyType } = opts ?? {};\n\t\tif (opts?.expiresIn && isNaN(expiresIn)) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds.\"\n\t\t});\n\t\tif (expiresIn && expiresIn > 86400 * 7) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n\t\t\tcode: \"BAD_REQUEST\",\n\t\t\tmessage: \"expiresIn must be less than 7 days (604800 seconds).\"\n\t\t});\n\t\tclass GetSignedUrlResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Class(\"GetSignedUrlResponse\")({\n\t\t\turl: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String,\n\t\t\tufsUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.String\n\t\t}) {}\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/requestFileAccess\", keyType === \"fileKey\" ? {\n\t\t\tfileKey: key,\n\t\t\texpiresIn\n\t\t} : {\n\t\t\tcustomId: key,\n\t\t\texpiresIn\n\t\t}, GetSignedUrlResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"getSignedURL\")));\n\t};\n\t/**\n\t* Update the ACL of a file or set of files.\n\t*\n\t* @example\n\t* // Make a single file public\n\t* await utapi.updateACL(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", \"public-read\");\n\t*\n\t* // Make multiple files private\n\t* await utapi.updateACL(\n\t*   [\n\t*     \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\n\t*     \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\",\n\t*   ],\n\t*   \"private\",\n\t* );\n\t*/\n\tupdateACL = async (keys, acl, opts) => {\n\t\tguardServerOnly();\n\t\tconst { keyType = this.defaultKeyType } = opts ?? {};\n\t\tconst updates = effect_Array__WEBPACK_IMPORTED_MODULE_13__.ensure(keys).map((key) => {\n\t\t\treturn keyType === \"fileKey\" ? {\n\t\t\t\tfileKey: key,\n\t\t\t\tacl\n\t\t\t} : {\n\t\t\t\tcustomId: key,\n\t\t\t\tacl\n\t\t\t};\n\t\t});\n\t\tconst responseSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Struct({ success: effect_Schema__WEBPACK_IMPORTED_MODULE_14__.Boolean });\n\t\treturn await this.executeAsync(this.requestUploadThing(\"/v6/updateACL\", { updates }, responseSchema).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"updateACL\")));\n\t};\n};\n\n//#endregion\n//#region src/server.ts\nconst createUploadthing = (opts) => (0,_dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.createBuilder)(opts);\nconst createRouteHandler = (opts) => {\n\treturn (0,_dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.makeAdapterHandler)((ev) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.succeed({ req: \"request\" in ev ? ev.request : ev }), (ev) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.succeed(\"request\" in ev ? ev.request : ev), opts, \"server\");\n};\nconst extractRouterConfig$1 = (router) => effect_Effect__WEBPACK_IMPORTED_MODULE_1__.runSync((0,_dist_upload_builder_e0_p9NOT_js__WEBPACK_IMPORTED_MODULE_5__.extractRouterConfig)(router));\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvc2VydmVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0Q7QUFDbUI7QUFDN0I7QUFDNk47QUFDck87QUFDK0c7QUFDcEc7QUFDRDtBQUNKO0FBQ0E7QUFDQTtBQUNGO0FBQ29CO0FBQ0E7QUFDRjtBQUNnQjtBQUNBO0FBQ0Y7QUFDRTtBQUM5QjtBQUNUO0FBQ0c7QUFDVzs7QUFFakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLCtEQUFNO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1EQUFtRCw4Q0FBWTtBQUMvRDtBQUNBO0FBQ0EsNEJBQTRCLG1FQUF1QixPQUFPLHVFQUEyQjtBQUNyRixxQkFBcUIsbUVBQXVCLHFCQUFxQiw0RUFBZ0MsWUFBWSx5RUFBNkIsdUJBQXVCLHlFQUE2QiwwQkFBMEIsOERBQU8sdUJBQXVCLG1EQUFpQixDQUFDLG9GQUFrQiw0QkFBNEIsbURBQWlCLFlBQVksaUVBQWtCO0FBQ3JXO0FBQ0E7QUFDQTtBQUNBLEVBQUUsSUFBSSxrREFBZ0IsaUJBQWlCLGtEQUFnQixDQUFDLHlEQUFZLEdBQUcsaURBQWU7QUFDdEYsUUFBUSxtREFBaUIsU0FBUyxXQUFXLDZCQUE2Qix1REFBcUI7QUFDL0Y7QUFDQTtBQUNBO0FBQ0EsR0FBRyxxRkFBcUI7QUFDeEI7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHLHFGQUFxQjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxpRUFBa0I7QUFDaEU7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLCtCQUErQiw4Q0FBWTtBQUMzQyxXQUFXLHNEQUFrQjtBQUM3QjtBQUNBLDZDQUE2QywrQ0FBYTtBQUMxRDtBQUNBO0FB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QUFrQjtBQUN2RTtBQUNBO0FBQ0EsR0FBRztBQUNILG9EQUFvRCxpRUFBa0I7QUFDdEU7QUFDQTtBQUNBLEdBQUc7QUFDSCxxQ0FBcUMsaURBQU87QUFDNUMsUUFBUSxrREFBUTtBQUNoQixXQUFXLGtEQUFRO0FBQ25CLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUcsNkJBQTZCLHNEQUFvQjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZ0NBQWdDO0FBQzFDLGtCQUFrQixpREFBVTtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILHlCQUF5QixrREFBUSxHQUFHLFNBQVMsbURBQVMsRUFBRTtBQUN4RCw0RUFBNEUsU0FBUyx1QkFBdUIsc0RBQW9CO0FBQ2hJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9DQUFvQywrRUFBYTtBQUNqRDtBQUNBLFFBQVEsb0ZBQWtCLFNBQVMsa0RBQWMsR0FBRyx3Q0FBd0MsV0FBVyxrREFBYztBQUNySDtBQUNBLDBDQUEwQyxrREFBYyxDQUFDLHFGQUFtQjs7QUFFNUU7QUFDK007QUFDL00iLCJzb3VyY2VzIjpbIi9Vc2Vycy91c2FtYS9Eb2N1bWVudHMvR2l0SHViL2FpX3NlbGZpZS9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvc2VydmVyL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vZGlzdC9wYWNrYWdlLUJlYi1pYXJFLmpzXCI7XG5pbXBvcnQgeyBsb2dEZXByZWNhdGlvbldhcm5pbmcgfSBmcm9tIFwiLi4vZGlzdC9kZXByZWNhdGlvbnMtcExtdzZZdGQuanNcIjtcbmltcG9ydCBcIi4uL2Rpc3Qvc2hhcmVkLXNjaGVtYXMtQklGRG9xUEYuanNcIjtcbmltcG9ydCB7IEFwaVVybCwgSW5nZXN0VXJsLCBVVEZpbGVzJDEgYXMgVVRGaWxlcywgVVRSZWdpb24kMSBhcyBVVFJlZ2lvbiwgVVRUb2tlbiwgVWZzQXBwSWRMb2NhdGlvbiwgVWZzSG9zdCwgY3JlYXRlQnVpbGRlciwgZXh0cmFjdFJvdXRlckNvbmZpZywgbG9nSHR0cENsaWVudEVycm9yLCBsb2dIdHRwQ2xpZW50UmVzcG9uc2UsIG1ha2VBZGFwdGVySGFuZGxlciwgbWFrZVJ1bnRpbWUgfSBmcm9tIFwiLi4vZGlzdC91cGxvYWQtYnVpbGRlci1lMF9wOU5PVC5qc1wiO1xuaW1wb3J0ICogYXMgQXJyIGZyb20gXCJlZmZlY3QvQXJyYXlcIjtcbmltcG9ydCB7IFVwbG9hZFRoaW5nRXJyb3IsIFVwbG9hZFRoaW5nRXJyb3IgYXMgVXBsb2FkVGhpbmdFcnJvciQxLCBnZW5lcmF0ZUtleSwgZ2VuZXJhdGVTaWduZWRVUkwsIHBhcnNlVGltZVRvU2Vjb25kcyB9IGZyb20gXCJAdXBsb2FkdGhpbmcvc2hhcmVkXCI7XG5pbXBvcnQgeyB1bnNhZmVDb2VyY2UgfSBmcm9tIFwiZWZmZWN0L0Z1bmN0aW9uXCI7XG5pbXBvcnQgKiBhcyBQcmVkaWNhdGUgZnJvbSBcImVmZmVjdC9QcmVkaWNhdGVcIjtcbmltcG9ydCAqIGFzIEVmZmVjdCQzIGZyb20gXCJlZmZlY3QvRWZmZWN0XCI7XG5pbXBvcnQgKiBhcyBFZmZlY3QkMiBmcm9tIFwiZWZmZWN0L0VmZmVjdFwiO1xuaW1wb3J0ICogYXMgRWZmZWN0JDEgZnJvbSBcImVmZmVjdC9FZmZlY3RcIjtcbmltcG9ydCAqIGFzIEVmZmVjdCBmcm9tIFwiZWZmZWN0L0VmZmVjdFwiO1xuaW1wb3J0ICogYXMgSHR0cENsaWVudCQyIGZyb20gXCJAZWZmZWN0L3BsYXRmb3JtL0h0dHBDbGllbnRcIjtcbmltcG9ydCAqIGFzIEh0dHBDbGllbnQkMSBmcm9tIFwiQGVmZmVjdC9wbGF0Zm9ybS9IdHRwQ2xpZW50XCI7XG5pbXBvcnQgKiBhcyBIdHRwQ2xpZW50IGZyb20gXCJAZWZmZWN0L3BsYXRmb3JtL0h0dHBDbGllbnRcIjtcbmltcG9ydCAqIGFzIEh0dHBDbGllbnRSZXF1ZXN0JDIgZnJvbSBcIkBlZmZlY3QvcGxhdGZvcm0vSHR0cENsaWVudFJlcXVlc3RcIjtcbmltcG9ydCAqIGFzIEh0dHBDbGllbnRSZXF1ZXN0JDEgZnJvbSBcIkBlZmZlY3QvcGxhdGZvcm0vSHR0cENsaWVudFJlcXVlc3RcIjtcbmltcG9ydCAqIGFzIEh0dHBDbGllbnRSZXF1ZXN0IGZyb20gXCJAZWZmZWN0L3BsYXRmb3JtL0h0dHBDbGllbnRSZXF1ZXN0XCI7XG5pbXBvcnQgKiBhcyBIdHRwQ2xpZW50UmVzcG9uc2UgZnJvbSBcIkBlZmZlY3QvcGxhdGZvcm0vSHR0cENsaWVudFJlc3BvbnNlXCI7XG5pbXBvcnQgKiBhcyBSZWRhY3RlZCBmcm9tIFwiZWZmZWN0L1JlZGFjdGVkXCI7XG5pbXBvcnQgKiBhcyBTIGZyb20gXCJlZmZlY3QvU2NoZW1hXCI7XG5pbXBvcnQgKiBhcyBDYXVzZSBmcm9tIFwiZWZmZWN0L0NhdXNlXCI7XG5pbXBvcnQgeyBsb29rdXAgfSBmcm9tIFwiQHVwbG9hZHRoaW5nL21pbWUtdHlwZXNcIjtcblxuLy8jcmVnaW9uIHNyYy9zZGsvdXQtZmlsZS50c1xuLyoqXG4qIEV4dGVuc2lvbiBvZiB0aGUgQmxvYiBjbGFzcyB0aGF0IHNpbXBsaWZpZXMgc2V0dGluZyB0aGUgYG5hbWVgIGFuZCBgY3VzdG9tSWRgIHByb3BlcnRpZXMsXG4qIHNpbWlsYXIgdG8gdGhlIGJ1aWx0LWluIEZpbGUgY2xhc3MgZnJvbSBOb2RlID4gMjAuXG4qL1xudmFyIFVURmlsZSA9IGNsYXNzIGV4dGVuZHMgQmxvYiB7XG5cdG5hbWU7XG5cdGxhc3RNb2RpZmllZDtcblx0Y3VzdG9tSWQ7XG5cdGNvbnN0cnVjdG9yKHBhcnRzLCBuYW1lLCBvcHRpb25zKSB7XG5cdFx0Y29uc3Qgb3B0aW9uc1dpdGhEZWZhdWx0cyA9IHtcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHR0eXBlOiBvcHRpb25zPy50eXBlID8/IChsb29rdXAobmFtZSkgfHwgXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIiksXG5cdFx0XHRsYXN0TW9kaWZpZWQ6IG9wdGlvbnM/Lmxhc3RNb2RpZmllZCA/PyBEYXRlLm5vdygpXG5cdFx0fTtcblx0XHRzdXBlcihwYXJ0cywgb3B0aW9uc1dpdGhEZWZhdWx0cyk7XG5cdFx0dGhpcy5uYW1lID0gbmFtZTtcblx0XHR0aGlzLmN1c3RvbUlkID0gb3B0aW9uc1dpdGhEZWZhdWx0cy5jdXN0b21JZDtcblx0XHR0aGlzLmxhc3RNb2RpZmllZCA9IG9wdGlvbnNXaXRoRGVmYXVsdHMubGFzdE1vZGlmaWVkO1xuXHR9XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL3VwbG9hZC1zZXJ2ZXIudHNcbmNvbnN0IHVwbG9hZFdpdGhvdXRQcm9ncmVzcyA9IChmaWxlLCBwcmVzaWduZWQpID0+IEVmZmVjdCQzLmdlbihmdW5jdGlvbiogKCkge1xuXHRjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuXHRmb3JtRGF0YS5hcHBlbmQoXCJmaWxlXCIsIGZpbGUpO1xuXHRjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50JDIuSHR0cENsaWVudCkucGlwZShIdHRwQ2xpZW50JDIuZmlsdGVyU3RhdHVzT2spO1xuXHRjb25zdCBqc29uID0geWllbGQqIEh0dHBDbGllbnRSZXF1ZXN0JDIucHV0KHByZXNpZ25lZC51cmwpLnBpcGUoSHR0cENsaWVudFJlcXVlc3QkMi5ib2R5Rm9ybURhdGEoZm9ybURhdGEpLCBIdHRwQ2xpZW50UmVxdWVzdCQyLnNldEhlYWRlcihcIlJhbmdlXCIsIFwiYnl0ZXM9MC1cIiksIEh0dHBDbGllbnRSZXF1ZXN0JDIuc2V0SGVhZGVyKFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCIsIHZlcnNpb24pLCBodHRwQ2xpZW50LmV4ZWN1dGUsIEVmZmVjdCQzLnRhcEVycm9yKGxvZ0h0dHBDbGllbnRFcnJvcihcIkZhaWxlZCB0byB1cGxvYWQgZmlsZVwiKSksIEVmZmVjdCQzLm1hcEVycm9yKChlKSA9PiBuZXcgVXBsb2FkVGhpbmdFcnJvciQxKHtcblx0XHRjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcblx0XHRtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGxvYWQgZmlsZVwiLFxuXHRcdGNhdXNlOiBlXG5cdH0pKSwgRWZmZWN0JDMuYW5kVGhlbigoXykgPT4gXy5qc29uKSwgRWZmZWN0JDMuYW5kVGhlbih1bnNhZmVDb2VyY2UpLCBFZmZlY3QkMy5zY29wZWQpO1xuXHR5aWVsZCogRWZmZWN0JDMubG9nRGVidWcoYEZpbGUgJHtmaWxlLm5hbWV9IHVwbG9hZGVkIHN1Y2Nlc3NmdWxseWApLnBpcGUoRWZmZWN0JDMuYW5ub3RhdGVMb2dzKFwianNvblwiLCBqc29uKSk7XG5cdHJldHVybiB7XG5cdFx0Li4uanNvbixcblx0XHRnZXQgdXJsKCkge1xuXHRcdFx0bG9nRGVwcmVjYXRpb25XYXJuaW5nKFwiYGZpbGUudXJsYCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBsb2FkdGhpbmcgdjkuIFVzZSBgZmlsZS51ZnNVcmxgIGluc3RlYWQuXCIpO1xuXHRcdFx0cmV0dXJuIGpzb24udXJsO1xuXHRcdH0sXG5cdFx0Z2V0IGFwcFVybCgpIHtcblx0XHRcdGxvZ0RlcHJlY2F0aW9uV2FybmluZyhcImBmaWxlLmFwcFVybGAgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHVwbG9hZHRoaW5nIHY5LiBVc2UgYGZpbGUudWZzVXJsYCBpbnN0ZWFkLlwiKTtcblx0XHRcdHJldHVybiBqc29uLmFwcFVybDtcblx0XHR9XG5cdH07XG59KTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3Nkay91dGlscy50c1xuZnVuY3Rpb24gZ3VhcmRTZXJ2ZXJPbmx5KCkge1xuXHRpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3IkMSh7XG5cdFx0Y29kZTogXCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIixcblx0XHRtZXNzYWdlOiBcIlRoZSBgdXRhcGlgIGNhbiBvbmx5IGJlIHVzZWQgb24gdGhlIHNlcnZlci5cIlxuXHR9KTtcbn1cbmNvbnN0IGRvd25sb2FkRmlsZSA9IChfdXJsKSA9PiBFZmZlY3QkMi5nZW4oZnVuY3Rpb24qICgpIHtcblx0bGV0IHVybCA9IFByZWRpY2F0ZS5pc1JlY29yZChfdXJsKSA/IF91cmwudXJsIDogX3VybDtcblx0aWYgKHR5cGVvZiB1cmwgPT09IFwic3RyaW5nXCIpIHtcblx0XHRpZiAodXJsLnN0YXJ0c1dpdGgoXCJkYXRhOlwiKSkgcmV0dXJuIHlpZWxkKiBFZmZlY3QkMi5mYWlsKHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IFwiUGxlYXNlIHVzZSB1cGxvYWRGaWxlcygpIGZvciBkYXRhIFVSTHMuIHVwbG9hZEZpbGVzRnJvbVVybCgpIGlzIGludGVuZGVkIGZvciB1c2Ugd2l0aCByZW1vdGUgVVJMcyBvbmx5LlwiLFxuXHRcdFx0ZGF0YTogdm9pZCAwXG5cdFx0fSk7XG5cdH1cblx0dXJsID0gbmV3IFVSTCh1cmwpO1xuXHRjb25zdCB7IG5hbWUgPSB1cmwucGF0aG5hbWUuc3BsaXQoXCIvXCIpLnBvcCgpID8/IFwidW5rbm93bi1maWxlbmFtZVwiLCBjdXN0b21JZCA9IHZvaWQgMCB9ID0gUHJlZGljYXRlLmlzUmVjb3JkKF91cmwpID8gX3VybCA6IHt9O1xuXHRjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50JDEuSHR0cENsaWVudCkucGlwZShIdHRwQ2xpZW50JDEuZmlsdGVyU3RhdHVzT2spO1xuXHRjb25zdCBhcnJheUJ1ZmZlciA9IHlpZWxkKiBIdHRwQ2xpZW50UmVxdWVzdCQxLmdldCh1cmwpLnBpcGUoSHR0cENsaWVudFJlcXVlc3QkMS5tb2RpZnkoeyBoZWFkZXJzOiB7fSB9KSwgaHR0cENsaWVudC5leGVjdXRlLCBFZmZlY3QkMi5mbGF0TWFwKChfKSA9PiBfLmFycmF5QnVmZmVyKSwgRWZmZWN0JDIubWFwRXJyb3IoKGNhdXNlKSA9PiB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IGBGYWlsZWQgdG8gZG93bmxvYWQgcmVxdWVzdGVkIGZpbGU6ICR7Y2F1c2UubWVzc2FnZX1gLFxuXHRcdFx0ZGF0YTogY2F1c2UudG9KU09OKClcblx0XHR9O1xuXHR9KSwgRWZmZWN0JDIuc2NvcGVkKTtcblx0cmV0dXJuIG5ldyBVVEZpbGUoW2FycmF5QnVmZmVyXSwgbmFtZSwge1xuXHRcdGN1c3RvbUlkLFxuXHRcdGxhc3RNb2RpZmllZDogRGF0ZS5ub3coKVxuXHR9KTtcbn0pLnBpcGUoRWZmZWN0JDIud2l0aExvZ1NwYW4oXCJkb3dubG9hZEZpbGVcIikpO1xuY29uc3QgZ2VuZXJhdGVQcmVzaWduZWRVcmwgPSAoZmlsZSwgY2QsIGFjbCkgPT4gRWZmZWN0JDIuZ2VuKGZ1bmN0aW9uKiAoKSB7XG5cdGNvbnN0IHsgYXBpS2V5LCBhcHBJZCB9ID0geWllbGQqIFVUVG9rZW47XG5cdGNvbnN0IGJhc2VVcmwgPSB5aWVsZCogSW5nZXN0VXJsKHZvaWQgMCk7XG5cdGNvbnN0IGtleSA9IHlpZWxkKiBnZW5lcmF0ZUtleShmaWxlLCBhcHBJZCk7XG5cdGNvbnN0IHVybCA9IHlpZWxkKiBnZW5lcmF0ZVNpZ25lZFVSTChgJHtiYXNlVXJsfS8ke2tleX1gLCBhcGlLZXksIHsgZGF0YToge1xuXHRcdFwieC11dC1pZGVudGlmaWVyXCI6IGFwcElkLFxuXHRcdFwieC11dC1maWxlLW5hbWVcIjogZmlsZS5uYW1lLFxuXHRcdFwieC11dC1maWxlLXNpemVcIjogZmlsZS5zaXplLFxuXHRcdFwieC11dC1maWxlLXR5cGVcIjogZmlsZS50eXBlLFxuXHRcdFwieC11dC1jdXN0b20taWRcIjogZmlsZS5jdXN0b21JZCxcblx0XHRcIngtdXQtY29udGVudC1kaXNwb3NpdGlvblwiOiBjZCxcblx0XHRcIngtdXQtYWNsXCI6IGFjbFxuXHR9IH0pO1xuXHRyZXR1cm4ge1xuXHRcdHVybCxcblx0XHRrZXlcblx0fTtcbn0pLnBpcGUoRWZmZWN0JDIud2l0aExvZ1NwYW4oXCJnZW5lcmF0ZVByZXNpZ25lZFVybFwiKSk7XG5jb25zdCB1cGxvYWRGaWxlID0gKGZpbGUsIG9wdHMpID0+IEVmZmVjdCQyLmdlbihmdW5jdGlvbiogKCkge1xuXHRjb25zdCBwcmVzaWduZWQgPSB5aWVsZCogZ2VuZXJhdGVQcmVzaWduZWRVcmwoZmlsZSwgb3B0cy5jb250ZW50RGlzcG9zaXRpb24gPz8gXCJpbmxpbmVcIiwgb3B0cy5hY2wpLnBpcGUoRWZmZWN0JDIuY2F0Y2hUYWcoXCJVcGxvYWRUaGluZ0Vycm9yXCIsIChlKSA9PiBFZmZlY3QkMi5mYWlsKFVwbG9hZFRoaW5nRXJyb3IkMS50b09iamVjdChlKSkpLCBFZmZlY3QkMi5jYXRjaFRhZyhcIkNvbmZpZ0Vycm9yXCIsICgpID0+IEVmZmVjdCQyLmZhaWwoe1xuXHRcdGNvZGU6IFwiSU5WQUxJRF9TRVJWRVJfQ09ORklHXCIsXG5cdFx0bWVzc2FnZTogXCJGYWlsZWQgdG8gZ2VuZXJhdGUgcHJlc2lnbmVkIFVSTFwiXG5cdH0pKSk7XG5cdGNvbnN0IHJlc3BvbnNlID0geWllbGQqIHVwbG9hZFdpdGhvdXRQcm9ncmVzcyhmaWxlLCBwcmVzaWduZWQpLnBpcGUoRWZmZWN0JDIuY2F0Y2hUYWcoXCJVcGxvYWRUaGluZ0Vycm9yXCIsIChlKSA9PiBFZmZlY3QkMi5mYWlsKFVwbG9hZFRoaW5nRXJyb3IkMS50b09iamVjdChlKSkpLCBFZmZlY3QkMi5jYXRjaFRhZyhcIlJlc3BvbnNlRXJyb3JcIiwgKGUpID0+IEVmZmVjdCQyLmZhaWwoe1xuXHRcdGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuXHRcdG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHVwbG9hZCBmaWxlXCIsXG5cdFx0ZGF0YTogZS50b0pTT04oKVxuXHR9KSkpO1xuXHRyZXR1cm4ge1xuXHRcdGtleTogcHJlc2lnbmVkLmtleSxcblx0XHR1cmw6IHJlc3BvbnNlLnVybCxcblx0XHRhcHBVcmw6IHJlc3BvbnNlLmFwcFVybCxcblx0XHR1ZnNVcmw6IHJlc3BvbnNlLnVmc1VybCxcblx0XHRsYXN0TW9kaWZpZWQ6IGZpbGUubGFzdE1vZGlmaWVkID8/IERhdGUubm93KCksXG5cdFx0bmFtZTogZmlsZS5uYW1lLFxuXHRcdHNpemU6IGZpbGUuc2l6ZSxcblx0XHR0eXBlOiBmaWxlLnR5cGUsXG5cdFx0Y3VzdG9tSWQ6IGZpbGUuY3VzdG9tSWQgPz8gbnVsbCxcblx0XHRmaWxlSGFzaDogcmVzcG9uc2UuZmlsZUhhc2hcblx0fTtcbn0pLnBpcGUoRWZmZWN0JDIud2l0aExvZ1NwYW4oXCJ1cGxvYWRGaWxlXCIpKTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL3Nkay9pbmRleC50c1xudmFyIFVUQXBpID0gY2xhc3Mge1xuXHRmZXRjaDtcblx0ZGVmYXVsdEtleVR5cGU7XG5cdHJ1bnRpbWU7XG5cdG9wdHM7XG5cdGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHR0aGlzLm9wdHMgPSBvcHRpb25zID8/IHt9O1xuXHRcdHRoaXMuZmV0Y2ggPSB0aGlzLm9wdHMuZmV0Y2ggPz8gZ2xvYmFsVGhpcy5mZXRjaDtcblx0XHR0aGlzLmRlZmF1bHRLZXlUeXBlID0gdGhpcy5vcHRzLmRlZmF1bHRLZXlUeXBlID8/IFwiZmlsZUtleVwiO1xuXHRcdHRoaXMucnVudGltZSA9IG1ha2VSdW50aW1lKHRoaXMuZmV0Y2gsIHRoaXMub3B0cyk7XG5cdH1cblx0cmVxdWVzdFVwbG9hZFRoaW5nID0gKHBhdGhuYW1lLCBib2R5LCByZXNwb25zZVNjaGVtYSkgPT4gRWZmZWN0JDEuZ2VuKHRoaXMsIGZ1bmN0aW9uKiAoKSB7XG5cdFx0Y29uc3QgeyBhcGlLZXkgfSA9IHlpZWxkKiBVVFRva2VuO1xuXHRcdGNvbnN0IGJhc2VVcmwgPSB5aWVsZCogQXBpVXJsO1xuXHRcdGNvbnN0IGh0dHBDbGllbnQgPSAoeWllbGQqIEh0dHBDbGllbnQuSHR0cENsaWVudCkucGlwZShIdHRwQ2xpZW50LmZpbHRlclN0YXR1c09rKTtcblx0XHRyZXR1cm4geWllbGQqIEh0dHBDbGllbnRSZXF1ZXN0LnBvc3QocGF0aG5hbWUpLnBpcGUoSHR0cENsaWVudFJlcXVlc3QucHJlcGVuZFVybChiYXNlVXJsKSwgSHR0cENsaWVudFJlcXVlc3QuYm9keVVuc2FmZUpzb24oYm9keSksIEh0dHBDbGllbnRSZXF1ZXN0LnNldEhlYWRlcnMoe1xuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogdmVyc2lvbixcblx0XHRcdFwieC11cGxvYWR0aGluZy1iZS1hZGFwdGVyXCI6IFwic2VydmVyLXNka1wiLFxuXHRcdFx0XCJ4LXVwbG9hZHRoaW5nLWFwaS1rZXlcIjogUmVkYWN0ZWQudmFsdWUoYXBpS2V5KVxuXHRcdH0pLCBodHRwQ2xpZW50LmV4ZWN1dGUsIEVmZmVjdCQxLnRhcEJvdGgoe1xuXHRcdFx0b25TdWNjZXNzOiBsb2dIdHRwQ2xpZW50UmVzcG9uc2UoXCJVcGxvYWRUaGluZyBBUEkgUmVzcG9uc2VcIiksXG5cdFx0XHRvbkZhaWx1cmU6IGxvZ0h0dHBDbGllbnRFcnJvcihcIkZhaWxlZCB0byByZXF1ZXN0IFVwbG9hZFRoaW5nIEFQSVwiKVxuXHRcdH0pLCBFZmZlY3QkMS5mbGF0TWFwKEh0dHBDbGllbnRSZXNwb25zZS5zY2hlbWFCb2R5SnNvbihyZXNwb25zZVNjaGVtYSkpLCBFZmZlY3QkMS5zY29wZWQpO1xuXHR9KS5waXBlKEVmZmVjdCQxLmNhdGNoVGFnKFwiQ29uZmlnRXJyb3JcIiwgKGUpID0+IG5ldyBVcGxvYWRUaGluZ0Vycm9yJDEoe1xuXHRcdGNvZGU6IFwiSU5WQUxJRF9TRVJWRVJfQ09ORklHXCIsXG5cdFx0bWVzc2FnZTogXCJUaGVyZSB3YXMgYW4gZXJyb3Igd2l0aCB0aGUgc2VydmVyIGNvbmZpZ3VyYXRpb24uIE1vcmUgaW5mbyBjYW4gYmUgZm91bmQgb24gdGhpcyBlcnJvcidzIGBjYXVzZWAgcHJvcGVydHlcIixcblx0XHRjYXVzZTogZVxuXHR9KSksIEVmZmVjdCQxLndpdGhMb2dTcGFuKFwidXRhcGkuI3JlcXVlc3RVcGxvYWRUaGluZ1wiKSk7XG5cdGV4ZWN1dGVBc3luYyA9IGFzeW5jIChwcm9ncmFtLCBzaWduYWwpID0+IHtcblx0XHRjb25zdCBleGl0ID0gYXdhaXQgcHJvZ3JhbS5waXBlKEVmZmVjdCQxLndpdGhMb2dTcGFuKFwidXRhcGkuI2V4ZWN1dGVBc3luY1wiKSwgKGUpID0+IHRoaXMucnVudGltZS5ydW5Qcm9taXNlRXhpdChlLCBzaWduYWwgPyB7IHNpZ25hbCB9IDogdm9pZCAwKSk7XG5cdFx0aWYgKGV4aXQuX3RhZyA9PT0gXCJGYWlsdXJlXCIpIHRocm93IENhdXNlLnNxdWFzaChleGl0LmNhdXNlKTtcblx0XHRyZXR1cm4gZXhpdC52YWx1ZTtcblx0fTtcblx0dXBsb2FkRmlsZXMoZmlsZXMsIG9wdHMpIHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHRjb25zdCBjb25jdXJyZW5jeSA9IG9wdHM/LmNvbmN1cnJlbmN5ID8/IDE7XG5cdFx0aWYgKGNvbmN1cnJlbmN5IDwgMSB8fCBjb25jdXJyZW5jeSA+IDI1KSB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvciQxKHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IFwiY29uY3VycmVuY3kgbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXIgYmV0d2VlbiAxIGFuZCAyNVwiXG5cdFx0fSk7XG5cdFx0Y29uc3QgcHJvZ3JhbSA9IEVmZmVjdCQxLmZvckVhY2goQXJyLmVuc3VyZShmaWxlcyksIChmaWxlKSA9PiB1cGxvYWRGaWxlKGZpbGUsIG9wdHMgPz8ge30pLnBpcGUoRWZmZWN0JDEubWF0Y2goe1xuXHRcdFx0b25TdWNjZXNzOiAoZGF0YSkgPT4gKHtcblx0XHRcdFx0ZGF0YSxcblx0XHRcdFx0ZXJyb3I6IG51bGxcblx0XHRcdH0pLFxuXHRcdFx0b25GYWlsdXJlOiAoZXJyb3IpID0+ICh7XG5cdFx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHRcdGVycm9yXG5cdFx0XHR9KVxuXHRcdH0pKSwgeyBjb25jdXJyZW5jeSB9KS5waXBlKEVmZmVjdCQxLm1hcCgodXBzKSA9PiBBcnJheS5pc0FycmF5KGZpbGVzKSA/IHVwcyA6IHVwc1swXSksIEVmZmVjdCQxLnRhcCgocmVzKSA9PiBFZmZlY3QkMS5sb2dEZWJ1ZyhcIkZpbmlzaGVkIHVwbG9hZGluZ1wiKS5waXBlKEVmZmVjdCQxLmFubm90YXRlTG9ncyhcInVwbG9hZFJlc3VsdFwiLCByZXMpKSksIEVmZmVjdCQxLndpdGhMb2dTcGFuKFwidXBsb2FkRmlsZXNcIikpO1xuXHRcdHJldHVybiB0aGlzLmV4ZWN1dGVBc3luYyhwcm9ncmFtLCBvcHRzPy5zaWduYWwpO1xuXHR9XG5cdHVwbG9hZEZpbGVzRnJvbVVybCh1cmxzLCBvcHRzKSB7XG5cdFx0Z3VhcmRTZXJ2ZXJPbmx5KCk7XG5cdFx0Y29uc3QgY29uY3VycmVuY3kgPSBvcHRzPy5jb25jdXJyZW5jeSA/PyAxO1xuXHRcdGlmIChjb25jdXJyZW5jeSA8IDEgfHwgY29uY3VycmVuY3kgPiAyNSkgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3IkMSh7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBcImNvbmN1cnJlbmN5IG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyIGJldHdlZW4gMSBhbmQgMjVcIlxuXHRcdH0pO1xuXHRcdGNvbnN0IHByb2dyYW0gPSBFZmZlY3QkMS5mb3JFYWNoKEFyci5lbnN1cmUodXJscyksICh1cmwpID0+IGRvd25sb2FkRmlsZSh1cmwpLnBpcGUoRWZmZWN0JDEuZmxhdE1hcCgoZmlsZSkgPT4gdXBsb2FkRmlsZShmaWxlLCBvcHRzID8/IHt9KSksIEVmZmVjdCQxLm1hdGNoKHtcblx0XHRcdG9uU3VjY2VzczogKGRhdGEpID0+ICh7XG5cdFx0XHRcdGRhdGEsXG5cdFx0XHRcdGVycm9yOiBudWxsXG5cdFx0XHR9KSxcblx0XHRcdG9uRmFpbHVyZTogKGVycm9yKSA9PiAoe1xuXHRcdFx0XHRkYXRhOiBudWxsLFxuXHRcdFx0XHRlcnJvclxuXHRcdFx0fSlcblx0XHR9KSksIHsgY29uY3VycmVuY3kgfSkucGlwZShFZmZlY3QkMS5tYXAoKHVwcykgPT4gQXJyYXkuaXNBcnJheSh1cmxzKSA/IHVwcyA6IHVwc1swXSksIEVmZmVjdCQxLnRhcCgocmVzKSA9PiBFZmZlY3QkMS5sb2dEZWJ1ZyhcIkZpbmlzaGVkIHVwbG9hZGluZ1wiKS5waXBlKEVmZmVjdCQxLmFubm90YXRlTG9ncyhcInVwbG9hZFJlc3VsdFwiLCByZXMpKSksIEVmZmVjdCQxLndpdGhMb2dTcGFuKFwidXBsb2FkRmlsZXNcIikpLnBpcGUoRWZmZWN0JDEud2l0aExvZ1NwYW4oXCJ1cGxvYWRGaWxlc0Zyb21VcmxcIikpO1xuXHRcdHJldHVybiB0aGlzLmV4ZWN1dGVBc3luYyhwcm9ncmFtLCBvcHRzPy5zaWduYWwpO1xuXHR9XG5cdC8qKlxuXHQqIFJlcXVlc3QgdG8gZGVsZXRlIGZpbGVzIGZyb20gVXBsb2FkVGhpbmcgc3RvcmFnZS5cblx0KiBAcGFyYW0ge3N0cmluZyB8IHN0cmluZ1tdfSBmaWxlS2V5c1xuXHQqXG5cdCogQGV4YW1wbGVcblx0KiBhd2FpdCBkZWxldGVGaWxlcyhcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIik7XG5cdCpcblx0KiBAZXhhbXBsZVxuXHQqIGF3YWl0IGRlbGV0ZUZpbGVzKFtcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIixcIjE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCJdKVxuXHQqXG5cdCogQGV4YW1wbGVcblx0KiBhd2FpdCBkZWxldGVGaWxlcyhcIm15Q3VzdG9tSWRlbnRpZmllclwiLCB7IGtleVR5cGU6IFwiY3VzdG9tSWRcIiB9KVxuXHQqL1xuXHRkZWxldGVGaWxlcyA9IGFzeW5jIChrZXlzLCBvcHRzKSA9PiB7XG5cdFx0Z3VhcmRTZXJ2ZXJPbmx5KCk7XG5cdFx0Y29uc3QgeyBrZXlUeXBlID0gdGhpcy5kZWZhdWx0S2V5VHlwZSB9ID0gb3B0cyA/PyB7fTtcblx0XHRjbGFzcyBEZWxldGVGaWxlUmVzcG9uc2UgZXh0ZW5kcyBTLkNsYXNzKFwiRGVsZXRlRmlsZVJlc3BvbnNlXCIpKHtcblx0XHRcdHN1Y2Nlc3M6IFMuQm9vbGVhbixcblx0XHRcdGRlbGV0ZWRDb3VudDogUy5OdW1iZXJcblx0XHR9KSB7fVxuXHRcdHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9kZWxldGVGaWxlc1wiLCBrZXlUeXBlID09PSBcImZpbGVLZXlcIiA/IHsgZmlsZUtleXM6IEFyci5lbnN1cmUoa2V5cykgfSA6IHsgY3VzdG9tSWRzOiBBcnIuZW5zdXJlKGtleXMpIH0sIERlbGV0ZUZpbGVSZXNwb25zZSkucGlwZShFZmZlY3QkMS53aXRoTG9nU3BhbihcImRlbGV0ZUZpbGVzXCIpKSk7XG5cdH07XG5cdC8qKlxuXHQqIFJlcXVlc3QgZmlsZSBVUkxzIGZyb20gVXBsb2FkVGhpbmcgc3RvcmFnZS5cblx0KiBAcGFyYW0ge3N0cmluZyB8IHN0cmluZ1tdfSBmaWxlS2V5c1xuXHQqXG5cdCogQGV4YW1wbGVcblx0KiBjb25zdCBkYXRhID0gYXdhaXQgZ2V0RmlsZVVybHMoXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIpO1xuXHQqIGNvbnNvbGUubG9nKGRhdGEpOyAvLyBbe2tleTogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIHVybDogXCJodHRwczovL3VwbG9hZHRoaW5nLmNvbS9mLzJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIn1dXG5cdCpcblx0KiBAZXhhbXBsZVxuXHQqIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRGaWxlVXJscyhbXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsXCIxNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wiXSlcblx0KiBjb25zb2xlLmxvZyhkYXRhKSAvLyBbe2tleTogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIHVybDogXCJodHRwczovL3VwbG9hZHRoaW5nLmNvbS9mLzJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIiB9LHtrZXk6IFwiMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIiwgdXJsOiBcImh0dHBzOi8vdXBsb2FkdGhpbmcuY29tL2YvMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIn1dXG5cdCpcblx0KiBAZGVwcmVjYXRlZCAtIFNlZSBodHRwczovL2RvY3MudXBsb2FkdGhpbmcuY29tL3dvcmtpbmctd2l0aC1maWxlcyNhY2Nlc3NpbmctZmlsZXMgZm9yIGluZm8gaG93IHRvIGFjY2VzcyBmaWxlc1xuXHQqL1xuXHRnZXRGaWxlVXJscyA9IGFzeW5jIChrZXlzLCBvcHRzKSA9PiB7XG5cdFx0Z3VhcmRTZXJ2ZXJPbmx5KCk7XG5cdFx0Y29uc3QgeyBrZXlUeXBlID0gdGhpcy5kZWZhdWx0S2V5VHlwZSB9ID0gb3B0cyA/PyB7fTtcblx0XHRjbGFzcyBHZXRGaWxlVXJsUmVzcG9uc2UgZXh0ZW5kcyBTLkNsYXNzKFwiR2V0RmlsZVVybFJlc3BvbnNlXCIpKHsgZGF0YTogUy5BcnJheShTLlN0cnVjdCh7XG5cdFx0XHRrZXk6IFMuU3RyaW5nLFxuXHRcdFx0dXJsOiBTLlN0cmluZ1xuXHRcdH0pKSB9KSB7fVxuXHRcdHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9nZXRGaWxlVXJsXCIsIGtleVR5cGUgPT09IFwiZmlsZUtleVwiID8geyBmaWxlS2V5czogQXJyLmVuc3VyZShrZXlzKSB9IDogeyBjdXN0b21JZHM6IEFyci5lbnN1cmUoa2V5cykgfSwgR2V0RmlsZVVybFJlc3BvbnNlKS5waXBlKEVmZmVjdCQxLndpdGhMb2dTcGFuKFwiZ2V0RmlsZVVybHNcIikpKTtcblx0fTtcblx0LyoqXG5cdCogUmVxdWVzdCBmaWxlIGxpc3QgZnJvbSBVcGxvYWRUaGluZyBzdG9yYWdlLlxuXHQqIEBwYXJhbSB7b2JqZWN0fSBvcHRzXG5cdCogQHBhcmFtIHtudW1iZXJ9IG9wdHMubGltaXQgVGhlIG1heGltdW0gbnVtYmVyIG9mIGZpbGVzIHRvIHJldHVyblxuXHQqIEBwYXJhbSB7bnVtYmVyfSBvcHRzLm9mZnNldCBUaGUgbnVtYmVyIG9mIGZpbGVzIHRvIHNraXBcblx0KlxuXHQqIEBleGFtcGxlXG5cdCogY29uc3QgZGF0YSA9IGF3YWl0IGxpc3RGaWxlcyh7IGxpbWl0OiAxIH0pO1xuXHQqIGNvbnNvbGUubG9nKGRhdGEpOyAvLyB7IGtleTogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIGlkOiBcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOFwiIH1cblx0Ki9cblx0bGlzdEZpbGVzID0gYXN5bmMgKG9wdHMpID0+IHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHRjbGFzcyBMaXN0RmlsZVJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkxpc3RGaWxlUmVzcG9uc2VcIikoe1xuXHRcdFx0aGFzTW9yZTogUy5Cb29sZWFuLFxuXHRcdFx0ZmlsZXM6IFMuQXJyYXkoUy5TdHJ1Y3Qoe1xuXHRcdFx0XHRpZDogUy5TdHJpbmcsXG5cdFx0XHRcdGN1c3RvbUlkOiBTLk51bGxPcihTLlN0cmluZyksXG5cdFx0XHRcdGtleTogUy5TdHJpbmcsXG5cdFx0XHRcdG5hbWU6IFMuU3RyaW5nLFxuXHRcdFx0XHRzaXplOiBTLk51bWJlcixcblx0XHRcdFx0c3RhdHVzOiBTLkxpdGVyYWwoXCJEZWxldGlvbiBQZW5kaW5nXCIsIFwiRmFpbGVkXCIsIFwiVXBsb2FkZWRcIiwgXCJVcGxvYWRpbmdcIiksXG5cdFx0XHRcdHVwbG9hZGVkQXQ6IFMuTnVtYmVyXG5cdFx0XHR9KSlcblx0XHR9KSB7fVxuXHRcdHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9saXN0RmlsZXNcIiwgeyAuLi5vcHRzIH0sIExpc3RGaWxlUmVzcG9uc2UpLnBpcGUoRWZmZWN0JDEud2l0aExvZ1NwYW4oXCJsaXN0RmlsZXNcIikpKTtcblx0fTtcblx0cmVuYW1lRmlsZXMgPSBhc3luYyAodXBkYXRlcykgPT4ge1xuXHRcdGd1YXJkU2VydmVyT25seSgpO1xuXHRcdGNsYXNzIFJlbmFtZUZpbGVSZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJSZW5hbWVGaWxlUmVzcG9uc2VcIikoeyBzdWNjZXNzOiBTLkJvb2xlYW4gfSkge31cblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmModGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvdjYvcmVuYW1lRmlsZXNcIiwgeyB1cGRhdGVzOiBBcnIuZW5zdXJlKHVwZGF0ZXMpIH0sIFJlbmFtZUZpbGVSZXNwb25zZSkucGlwZShFZmZlY3QkMS53aXRoTG9nU3BhbihcInJlbmFtZUZpbGVzXCIpKSk7XG5cdH07XG5cdGdldFVzYWdlSW5mbyA9IGFzeW5jICgpID0+IHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHRjbGFzcyBHZXRVc2FnZUluZm9SZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJHZXRVc2FnZUluZm9SZXNwb25zZVwiKSh7XG5cdFx0XHR0b3RhbEJ5dGVzOiBTLk51bWJlcixcblx0XHRcdGFwcFRvdGFsQnl0ZXM6IFMuTnVtYmVyLFxuXHRcdFx0ZmlsZXNVcGxvYWRlZDogUy5OdW1iZXIsXG5cdFx0XHRsaW1pdEJ5dGVzOiBTLk51bWJlclxuXHRcdH0pIHt9XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFwiL3Y2L2dldFVzYWdlSW5mb1wiLCB7fSwgR2V0VXNhZ2VJbmZvUmVzcG9uc2UpLnBpcGUoRWZmZWN0JDEud2l0aExvZ1NwYW4oXCJnZXRVc2FnZUluZm9cIikpKTtcblx0fTtcblx0LyoqXG5cdCogR2VuZXJhdGUgYSBwcmVzaWduZWQgdXJsIGZvciBhIHByaXZhdGUgZmlsZVxuXHQqIFVubGlrZSB7QGxpbmsgZ2V0U2lnbmVkVVJMfSwgdGhpcyBtZXRob2QgZG9lcyBub3QgbWFrZSBhIGZldGNoIHJlcXVlc3QgdG8gdGhlIFVwbG9hZFRoaW5nIEFQSVxuXHQqIGFuZCBpcyB0aGUgcmVjb21tZW5kZWQgd2F5IHRvIGdlbmVyYXRlIGEgcHJlc2lnbmVkIHVybCBmb3IgYSBwcml2YXRlIGZpbGUuXG5cdCoqL1xuXHRnZW5lcmF0ZVNpZ25lZFVSTCA9IGFzeW5jIChrZXksIG9wdHMpID0+IHtcblx0XHRndWFyZFNlcnZlck9ubHkoKTtcblx0XHRjb25zdCBleHBpcmVzSW4gPSBwYXJzZVRpbWVUb1NlY29uZHMob3B0cz8uZXhwaXJlc0luID8/IFwiNSBtaW51dGVzXCIpO1xuXHRcdGlmIChvcHRzPy5leHBpcmVzSW4gJiYgaXNOYU4oZXhwaXJlc0luKSkgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3IkMSh7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBcImV4cGlyZXNJbiBtdXN0IGJlIGEgdmFsaWQgdGltZSBzdHJpbmcsIGZvciBleGFtcGxlICcxZCcsICcyIGRheXMnLCBvciBhIG51bWJlciBvZiBzZWNvbmRzLlwiXG5cdFx0fSk7XG5cdFx0aWYgKGV4cGlyZXNJbiA+IDg2NDAwICogNykgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3IkMSh7XG5cdFx0XHRjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG5cdFx0XHRtZXNzYWdlOiBcImV4cGlyZXNJbiBtdXN0IGJlIGxlc3MgdGhhbiA3IGRheXMgKDYwNDgwMCBzZWNvbmRzKS5cIlxuXHRcdH0pO1xuXHRcdGNvbnN0IHByb2dyYW0gPSBFZmZlY3QkMS5nZW4oZnVuY3Rpb24qICgpIHtcblx0XHRcdGNvbnN0IHsgYXBpS2V5LCBhcHBJZCB9ID0geWllbGQqIFVUVG9rZW47XG5cdFx0XHRjb25zdCBhcHBJZExvY2F0aW9uID0geWllbGQqIFVmc0FwcElkTG9jYXRpb247XG5cdFx0XHRjb25zdCB1ZnNIb3N0ID0geWllbGQqIFVmc0hvc3Q7XG5cdFx0XHRjb25zdCBwcm90byA9IHVmc0hvc3QuaW5jbHVkZXMoXCJsb2NhbFwiKSA/IFwiaHR0cFwiIDogXCJodHRwc1wiO1xuXHRcdFx0Y29uc3QgdXJsQmFzZSA9IGFwcElkTG9jYXRpb24gPT09IFwic3ViZG9tYWluXCIgPyBgJHtwcm90b306Ly8ke2FwcElkfS4ke3Vmc0hvc3R9L2YvJHtrZXl9YCA6IGAke3Byb3RvfTovLyR7dWZzSG9zdH0vYS8ke2FwcElkfS8ke2tleX1gO1xuXHRcdFx0Y29uc3QgdWZzVXJsID0geWllbGQqIGdlbmVyYXRlU2lnbmVkVVJMKHVybEJhc2UsIGFwaUtleSwgeyB0dGxJblNlY29uZHM6IGV4cGlyZXNJbiB9KTtcblx0XHRcdHJldHVybiB7IHVmc1VybCB9O1xuXHRcdH0pO1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyhwcm9ncmFtLnBpcGUoRWZmZWN0JDEuY2F0Y2hUYWcoXCJDb25maWdFcnJvclwiLCAoZSkgPT4gbmV3IFVwbG9hZFRoaW5nRXJyb3IkMSh7XG5cdFx0XHRjb2RlOiBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiLFxuXHRcdFx0bWVzc2FnZTogXCJUaGVyZSB3YXMgYW4gZXJyb3Igd2l0aCB0aGUgc2VydmVyIGNvbmZpZ3VyYXRpb24uIE1vcmUgaW5mbyBjYW4gYmUgZm91bmQgb24gdGhpcyBlcnJvcidzIGBjYXVzZWAgcHJvcGVydHlcIixcblx0XHRcdGNhdXNlOiBlXG5cdFx0fSkpLCBFZmZlY3QkMS53aXRoTG9nU3BhbihcImdlbmVyYXRlU2lnbmVkVVJMXCIpKSk7XG5cdH07XG5cdC8qKlxuXHQqIFJlcXVlc3QgYSBwcmVzaWduZWQgdXJsIGZvciBhIHByaXZhdGUgZmlsZShzKVxuXHQqIEByZW1hcmtzIFRoaXMgbWV0aG9kIGlzIG5vIGxvbmdlciByZWNvbW1lbmRlZCBhcyBpdCBtYWtlcyBhIGZldGNoXG5cdCogcmVxdWVzdCB0byB0aGUgVXBsb2FkVGhpbmcgQVBJIHdoaWNoIGluY3VycyByZWR1bmRhbnQgbGF0ZW5jeS4gSXRcblx0KiB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gVXBsb2FkVGhpbmcgdjggYW5kIHJlbW92ZWQgaW4gVXBsb2FkVGhpbmcgdjkuXG5cdCpcblx0KiBAc2VlIHtAbGluayBnZW5lcmF0ZVNpZ25lZFVSTH0gZm9yIGEgbW9yZSBlZmZpY2llbnQgd2F5IHRvIGdlbmVyYXRlIGEgcHJlc2lnbmVkIHVybFxuXHQqKi9cblx0Z2V0U2lnbmVkVVJMID0gYXN5bmMgKGtleSwgb3B0cykgPT4ge1xuXHRcdGd1YXJkU2VydmVyT25seSgpO1xuXHRcdGNvbnN0IGV4cGlyZXNJbiA9IG9wdHM/LmV4cGlyZXNJbiA/IHBhcnNlVGltZVRvU2Vjb25kcyhvcHRzLmV4cGlyZXNJbikgOiB2b2lkIDA7XG5cdFx0Y29uc3QgeyBrZXlUeXBlID0gdGhpcy5kZWZhdWx0S2V5VHlwZSB9ID0gb3B0cyA/PyB7fTtcblx0XHRpZiAob3B0cz8uZXhwaXJlc0luICYmIGlzTmFOKGV4cGlyZXNJbikpIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yJDEoe1xuXHRcdFx0Y29kZTogXCJCQURfUkVRVUVTVFwiLFxuXHRcdFx0bWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBhIHZhbGlkIHRpbWUgc3RyaW5nLCBmb3IgZXhhbXBsZSAnMWQnLCAnMiBkYXlzJywgb3IgYSBudW1iZXIgb2Ygc2Vjb25kcy5cIlxuXHRcdH0pO1xuXHRcdGlmIChleHBpcmVzSW4gJiYgZXhwaXJlc0luID4gODY0MDAgKiA3KSB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvciQxKHtcblx0XHRcdGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcblx0XHRcdG1lc3NhZ2U6IFwiZXhwaXJlc0luIG11c3QgYmUgbGVzcyB0aGFuIDcgZGF5cyAoNjA0ODAwIHNlY29uZHMpLlwiXG5cdFx0fSk7XG5cdFx0Y2xhc3MgR2V0U2lnbmVkVXJsUmVzcG9uc2UgZXh0ZW5kcyBTLkNsYXNzKFwiR2V0U2lnbmVkVXJsUmVzcG9uc2VcIikoe1xuXHRcdFx0dXJsOiBTLlN0cmluZyxcblx0XHRcdHVmc1VybDogUy5TdHJpbmdcblx0XHR9KSB7fVxuXHRcdHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9yZXF1ZXN0RmlsZUFjY2Vzc1wiLCBrZXlUeXBlID09PSBcImZpbGVLZXlcIiA/IHtcblx0XHRcdGZpbGVLZXk6IGtleSxcblx0XHRcdGV4cGlyZXNJblxuXHRcdH0gOiB7XG5cdFx0XHRjdXN0b21JZDoga2V5LFxuXHRcdFx0ZXhwaXJlc0luXG5cdFx0fSwgR2V0U2lnbmVkVXJsUmVzcG9uc2UpLnBpcGUoRWZmZWN0JDEud2l0aExvZ1NwYW4oXCJnZXRTaWduZWRVUkxcIikpKTtcblx0fTtcblx0LyoqXG5cdCogVXBkYXRlIHRoZSBBQ0wgb2YgYSBmaWxlIG9yIHNldCBvZiBmaWxlcy5cblx0KlxuXHQqIEBleGFtcGxlXG5cdCogLy8gTWFrZSBhIHNpbmdsZSBmaWxlIHB1YmxpY1xuXHQqIGF3YWl0IHV0YXBpLnVwZGF0ZUFDTChcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIiwgXCJwdWJsaWMtcmVhZFwiKTtcblx0KlxuXHQqIC8vIE1ha2UgbXVsdGlwbGUgZmlsZXMgcHJpdmF0ZVxuXHQqIGF3YWl0IHV0YXBpLnVwZGF0ZUFDTChcblx0KiAgIFtcblx0KiAgICAgXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsXG5cdCogICAgIFwiMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIixcblx0KiAgIF0sXG5cdCogICBcInByaXZhdGVcIixcblx0KiApO1xuXHQqL1xuXHR1cGRhdGVBQ0wgPSBhc3luYyAoa2V5cywgYWNsLCBvcHRzKSA9PiB7XG5cdFx0Z3VhcmRTZXJ2ZXJPbmx5KCk7XG5cdFx0Y29uc3QgeyBrZXlUeXBlID0gdGhpcy5kZWZhdWx0S2V5VHlwZSB9ID0gb3B0cyA/PyB7fTtcblx0XHRjb25zdCB1cGRhdGVzID0gQXJyLmVuc3VyZShrZXlzKS5tYXAoKGtleSkgPT4ge1xuXHRcdFx0cmV0dXJuIGtleVR5cGUgPT09IFwiZmlsZUtleVwiID8ge1xuXHRcdFx0XHRmaWxlS2V5OiBrZXksXG5cdFx0XHRcdGFjbFxuXHRcdFx0fSA6IHtcblx0XHRcdFx0Y3VzdG9tSWQ6IGtleSxcblx0XHRcdFx0YWNsXG5cdFx0XHR9O1xuXHRcdH0pO1xuXHRcdGNvbnN0IHJlc3BvbnNlU2NoZW1hID0gUy5TdHJ1Y3QoeyBzdWNjZXNzOiBTLkJvb2xlYW4gfSk7XG5cdFx0cmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFwiL3Y2L3VwZGF0ZUFDTFwiLCB7IHVwZGF0ZXMgfSwgcmVzcG9uc2VTY2hlbWEpLnBpcGUoRWZmZWN0JDEud2l0aExvZ1NwYW4oXCJ1cGRhdGVBQ0xcIikpKTtcblx0fTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9zZXJ2ZXIudHNcbmNvbnN0IGNyZWF0ZVVwbG9hZHRoaW5nID0gKG9wdHMpID0+IGNyZWF0ZUJ1aWxkZXIob3B0cyk7XG5jb25zdCBjcmVhdGVSb3V0ZUhhbmRsZXIgPSAob3B0cykgPT4ge1xuXHRyZXR1cm4gbWFrZUFkYXB0ZXJIYW5kbGVyKChldikgPT4gRWZmZWN0LnN1Y2NlZWQoeyByZXE6IFwicmVxdWVzdFwiIGluIGV2ID8gZXYucmVxdWVzdCA6IGV2IH0pLCAoZXYpID0+IEVmZmVjdC5zdWNjZWVkKFwicmVxdWVzdFwiIGluIGV2ID8gZXYucmVxdWVzdCA6IGV2KSwgb3B0cywgXCJzZXJ2ZXJcIik7XG59O1xuY29uc3QgZXh0cmFjdFJvdXRlckNvbmZpZyQxID0gKHJvdXRlcikgPT4gRWZmZWN0LnJ1blN5bmMoZXh0cmFjdFJvdXRlckNvbmZpZyhyb3V0ZXIpKTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBVVEFwaSwgVVRGaWxlLCBVVEZpbGVzLCBVcGxvYWRUaGluZ0Vycm9yLCBjcmVhdGVCdWlsZGVyLCBjcmVhdGVSb3V0ZUhhbmRsZXIsIGNyZWF0ZVVwbG9hZHRoaW5nLCBVVFJlZ2lvbiBhcyBleHBlcmltZW50YWxfVVRSZWdpb24sIGV4dHJhY3RSb3V0ZXJDb25maWckMSBhcyBleHRyYWN0Um91dGVyQ29uZmlnLCBtYWtlQWRhcHRlckhhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/server/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/uploadthing/client/index.js":
/*!**************************************************!*\
  !*** ./node_modules/uploadthing/client/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UploadAbortedError: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadAbortedError),\n/* harmony export */   UploadPausedError: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadPausedError),\n/* harmony export */   allowedContentTextLabelGenerator: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.allowedContentTextLabelGenerator),\n/* harmony export */   bytesToFileSize: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.bytesToFileSize),\n/* harmony export */   genUploader: () => (/* binding */ genUploader),\n/* harmony export */   generateClientDropzoneAccept: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.generateClientDropzoneAccept),\n/* harmony export */   generateMimeTypes: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.generateMimeTypes),\n/* harmony export */   generatePermittedFileTypes: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.generatePermittedFileTypes),\n/* harmony export */   isValidFileSize: () => (/* binding */ isValidFileSize),\n/* harmony export */   isValidFileType: () => (/* binding */ isValidFileType),\n/* harmony export */   version: () => (/* binding */ version$1)\n/* harmony export */ });\n/* harmony import */ var _dist_package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dist/package-Beb-iarE.js */ \"(ssr)/./node_modules/uploadthing/dist/package-Beb-iarE.js\");\n/* harmony import */ var _dist_ut_reporter_C8446w_v_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../dist/ut-reporter-C8446w-v.js */ \"(ssr)/./node_modules/uploadthing/dist/ut-reporter-C8446w-v.js\");\n/* harmony import */ var _dist_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../dist/deprecations-pLmw6Ytd.js */ \"(ssr)/./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js\");\n/* harmony import */ var effect_Array__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! effect/Array */ \"(ssr)/./node_modules/effect/dist/esm/Array.js\");\n/* harmony import */ var effect_Micro__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Micro */ \"(ssr)/./node_modules/effect/dist/esm/Micro.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @uploadthing/shared */ \"(ssr)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var effect_Function__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! effect/Function */ \"(ssr)/./node_modules/effect/dist/esm/Function.js\");\n/* harmony import */ var effect_Predicate__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Predicate */ \"(ssr)/./node_modules/effect/dist/esm/Predicate.js\");\n\n\n\n\n\n\n\n\n\n\n//#region src/_internal/upload-browser.ts\nconst uploadWithProgress = (file, rangeStart, presigned, opts) => effect_Micro__WEBPACK_IMPORTED_MODULE_0__.async((resume) => {\n\tconst xhr = new XMLHttpRequest();\n\txhr.open(\"PUT\", presigned.url, true);\n\txhr.setRequestHeader(\"Range\", `bytes=${rangeStart}-`);\n\txhr.setRequestHeader(\"x-uploadthing-version\", _dist_package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_1__.version);\n\txhr.setRequestHeader(\"b3\", opts.traceHeaders.b3);\n\txhr.setRequestHeader(\"traceparent\", opts.traceHeaders.traceparent);\n\txhr.responseType = \"json\";\n\tlet previousLoaded = 0;\n\txhr.upload.addEventListener(\"progress\", ({ loaded }) => {\n\t\tconst delta = loaded - previousLoaded;\n\t\topts.onUploadProgress?.({\n\t\t\tloaded,\n\t\t\tdelta\n\t\t});\n\t\tpreviousLoaded = loaded;\n\t});\n\txhr.addEventListener(\"load\", () => {\n\t\tif (xhr.status >= 200 && xhr.status < 300 && (0,effect_Predicate__WEBPACK_IMPORTED_MODULE_2__.isRecord)(xhr.response)) if ((0,effect_Predicate__WEBPACK_IMPORTED_MODULE_2__.hasProperty)(xhr.response, \"error\")) resume(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n\t\t\tcode: \"UPLOAD_FAILED\",\n\t\t\tmessage: String(xhr.response.error),\n\t\t\tdata: xhr.response\n\t\t}));\n\t\telse resume(effect_Micro__WEBPACK_IMPORTED_MODULE_0__.succeed(xhr.response));\n\t\telse resume(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({\n\t\t\tcode: \"UPLOAD_FAILED\",\n\t\t\tmessage: `XHR failed ${xhr.status} ${xhr.statusText}`,\n\t\t\tdata: xhr.response\n\t\t}));\n\t});\n\txhr.addEventListener(\"error\", () => {\n\t\tresume(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadThingError({ code: \"UPLOAD_FAILED\" }));\n\t});\n\tconst formData = new FormData();\n\t/**\n\t* iOS/React Native FormData handling requires special attention:\n\t*\n\t* Issue: In React Native, iOS crashes with \"attempt to insert nil object\" when appending File directly\n\t* to FormData. This happens because iOS tries to create NSDictionary from the file object and expects\n\t* specific structure {uri, type, name}.\n\t*\n\t*\n\t* Note: Don't try to use Blob or modify File object - iOS specifically needs plain object\n\t* with these properties to create valid NSDictionary.\n\t*/\n\tif (\"uri\" in file) formData.append(\"file\", {\n\t\turi: file.uri,\n\t\ttype: file.type,\n\t\tname: file.name,\n\t\t...rangeStart > 0 && { range: rangeStart }\n\t});\n\telse formData.append(\"file\", rangeStart > 0 ? file.slice(rangeStart) : file);\n\txhr.send(formData);\n\treturn effect_Micro__WEBPACK_IMPORTED_MODULE_0__.sync(() => xhr.abort());\n});\nconst uploadFile = (file, presigned, opts) => (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.fetchEff)(presigned.url, {\n\tmethod: \"HEAD\",\n\theaders: opts.traceHeaders\n}).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_0__.map(({ headers }) => parseInt(headers.get(\"x-ut-range-start\") ?? \"0\", 10)), effect_Micro__WEBPACK_IMPORTED_MODULE_0__.tap((start) => opts.onUploadProgress?.({\n\tdelta: start,\n\tloaded: start\n})), effect_Micro__WEBPACK_IMPORTED_MODULE_0__.flatMap((start) => uploadWithProgress(file, start, presigned, {\n\ttraceHeaders: opts.traceHeaders,\n\tonUploadProgress: (progressEvent) => opts.onUploadProgress?.({\n\t\tdelta: progressEvent.delta,\n\t\tloaded: progressEvent.loaded + start\n\t})\n})), effect_Micro__WEBPACK_IMPORTED_MODULE_0__.map(effect_Function__WEBPACK_IMPORTED_MODULE_4__.unsafeCoerce), effect_Micro__WEBPACK_IMPORTED_MODULE_0__.map((uploadResponse) => ({\n\tname: file.name,\n\tsize: file.size,\n\tkey: presigned.key,\n\tlastModified: file.lastModified,\n\tserverData: uploadResponse.serverData,\n\tget url() {\n\t\t(0,_dist_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_5__.logDeprecationWarning)(\"`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n\t\treturn uploadResponse.url;\n\t},\n\tget appUrl() {\n\t\t(0,_dist_deprecations_pLmw6Ytd_js__WEBPACK_IMPORTED_MODULE_5__.logDeprecationWarning)(\"`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n\t\treturn uploadResponse.appUrl;\n\t},\n\tufsUrl: uploadResponse.ufsUrl,\n\tcustomId: presigned.customId,\n\ttype: file.type,\n\tfileHash: uploadResponse.fileHash\n})));\nconst uploadFilesInternal = (endpoint, opts) => {\n\tconst traceHeaders = (0,_dist_ut_reporter_C8446w_v_js__WEBPACK_IMPORTED_MODULE_6__.generateTraceHeaders)();\n\tconst reportEventToUT = (0,_dist_ut_reporter_C8446w_v_js__WEBPACK_IMPORTED_MODULE_6__.createUTReporter)({\n\t\tendpoint: String(endpoint),\n\t\tpackage: opts.package,\n\t\turl: opts.url,\n\t\theaders: opts.headers,\n\t\ttraceHeaders\n\t});\n\tconst totalSize = opts.files.reduce((acc, f) => acc + f.size, 0);\n\tlet totalLoaded = 0;\n\treturn effect_Micro__WEBPACK_IMPORTED_MODULE_0__.flatMap(reportEventToUT(\"upload\", {\n\t\tinput: \"input\" in opts ? opts.input : null,\n\t\tfiles: opts.files.map((f) => ({\n\t\t\tname: f.name,\n\t\t\tsize: f.size,\n\t\t\ttype: f.type,\n\t\t\tlastModified: f.lastModified\n\t\t}))\n\t}), (presigneds) => effect_Micro__WEBPACK_IMPORTED_MODULE_0__.forEach(presigneds, (presigned, i) => effect_Micro__WEBPACK_IMPORTED_MODULE_0__.flatMap(effect_Micro__WEBPACK_IMPORTED_MODULE_0__.sync(() => opts.onUploadBegin?.({ file: opts.files[i].name })), () => uploadFile(opts.files[i], presigned, {\n\t\ttraceHeaders,\n\t\tonUploadProgress: (ev) => {\n\t\t\ttotalLoaded += ev.delta;\n\t\t\topts.onUploadProgress?.({\n\t\t\t\tfile: opts.files[i],\n\t\t\t\tprogress: ev.loaded / opts.files[i].size * 100,\n\t\t\t\tloaded: ev.loaded,\n\t\t\t\tdelta: ev.delta,\n\t\t\t\ttotalLoaded,\n\t\t\t\ttotalProgress: totalLoaded / totalSize\n\t\t\t});\n\t\t}\n\t})), { concurrency: 6 }));\n};\n\n//#endregion\n//#region src/client.ts\nconst version$1 = _dist_package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_1__.version;\n/**\n* Validate that a file is of a valid type given a route config\n* @public\n*/\nconst isValidFileType = (file, routeConfig) => effect_Micro__WEBPACK_IMPORTED_MODULE_0__.runSync((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.objectKeys)(routeConfig)).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_0__.map((type) => file.type.includes(type)), effect_Micro__WEBPACK_IMPORTED_MODULE_0__.orElseSucceed(() => false)));\n/**\n* Validate that a file is of a valid size given a route config\n* @public\n*/\nconst isValidFileSize = (file, routeConfig) => effect_Micro__WEBPACK_IMPORTED_MODULE_0__.runSync((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.objectKeys)(routeConfig)).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_0__.flatMap((type) => (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.fileSizeToBytes)(routeConfig[type].maxFileSize)), effect_Micro__WEBPACK_IMPORTED_MODULE_0__.map((maxFileSize) => file.size <= maxFileSize), effect_Micro__WEBPACK_IMPORTED_MODULE_0__.orElseSucceed(() => false)));\n/**\n* Generate a typed uploader for a given FileRouter\n* @public\n*/\nconst genUploader = (initOpts) => {\n\tconst routeRegistry = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.createIdentityProxy)();\n\tconst controllableUpload = async (slug, opts) => {\n\t\tconst uploads = new Map();\n\t\tconst endpoint = typeof slug === \"function\" ? slug(routeRegistry) : slug;\n\t\tconst traceHeaders = (0,_dist_ut_reporter_C8446w_v_js__WEBPACK_IMPORTED_MODULE_6__.generateTraceHeaders)();\n\t\tconst utReporter = (0,_dist_ut_reporter_C8446w_v_js__WEBPACK_IMPORTED_MODULE_6__.createUTReporter)({\n\t\t\tendpoint: String(endpoint),\n\t\t\tpackage: initOpts?.package ?? \"uploadthing/client\",\n\t\t\turl: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.resolveMaybeUrlArg)(initOpts?.url),\n\t\t\theaders: opts.headers,\n\t\t\ttraceHeaders\n\t\t});\n\t\tconst fetchFn = initOpts?.fetch ?? window.fetch;\n\t\tconst presigneds = await effect_Micro__WEBPACK_IMPORTED_MODULE_0__.runPromise(utReporter(\"upload\", {\n\t\t\tinput: \"input\" in opts ? opts.input : null,\n\t\t\tfiles: opts.files.map((f) => ({\n\t\t\t\tname: f.name,\n\t\t\t\tsize: f.size,\n\t\t\t\ttype: f.type,\n\t\t\t\tlastModified: f.lastModified\n\t\t\t}))\n\t\t}).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_0__.provideService(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.FetchContext, fetchFn)));\n\t\tconst totalSize = opts.files.reduce((acc, f) => acc + f.size, 0);\n\t\tlet totalLoaded = 0;\n\t\tconst uploadEffect = (file, presigned) => uploadFile(file, presigned, {\n\t\t\ttraceHeaders,\n\t\t\tonUploadProgress: (progressEvent) => {\n\t\t\t\ttotalLoaded += progressEvent.delta;\n\t\t\t\topts.onUploadProgress?.({\n\t\t\t\t\t...progressEvent,\n\t\t\t\t\tfile,\n\t\t\t\t\tprogress: Math.round(progressEvent.loaded / file.size * 100),\n\t\t\t\t\ttotalLoaded,\n\t\t\t\t\ttotalProgress: Math.round(totalLoaded / totalSize * 100)\n\t\t\t\t});\n\t\t\t}\n\t\t}).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_0__.provideService(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.FetchContext, fetchFn));\n\t\tfor (const [i, p] of presigneds.entries()) {\n\t\t\tconst file = opts.files[i];\n\t\t\tif (!file) continue;\n\t\t\tconst deferred = (0,_dist_ut_reporter_C8446w_v_js__WEBPACK_IMPORTED_MODULE_6__.createDeferred)();\n\t\t\tuploads.set(file, {\n\t\t\t\tdeferred,\n\t\t\t\tpresigned: p\n\t\t\t});\n\t\t\teffect_Micro__WEBPACK_IMPORTED_MODULE_0__.runPromiseExit(uploadEffect(file, p), { signal: deferred.ac.signal }).then((result) => {\n\t\t\t\tif (result._tag === \"Success\") return deferred.resolve(result.value);\n\t\t\t\telse if (result.cause._tag === \"Interrupt\") throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadPausedError();\n\t\t\t\tthrow effect_Micro__WEBPACK_IMPORTED_MODULE_0__.causeSquash(result.cause);\n\t\t\t}).catch((err) => {\n\t\t\t\tif (err instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadPausedError) return;\n\t\t\t\tdeferred.reject(err);\n\t\t\t});\n\t\t}\n\t\t/**\n\t\t* Pause an ongoing upload\n\t\t* @param file The file upload you want to pause. Can be omitted to pause all files\n\t\t*/\n\t\tconst pauseUpload = (file) => {\n\t\t\tconst files = effect_Array__WEBPACK_IMPORTED_MODULE_7__.ensure(file ?? opts.files);\n\t\t\tfor (const file$1 of files) {\n\t\t\t\tconst upload = uploads.get(file$1);\n\t\t\t\tif (!upload) return;\n\t\t\t\tif (upload.deferred.ac.signal.aborted) throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadAbortedError();\n\t\t\t\tupload.deferred.ac.abort();\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t* Resume a paused upload\n\t\t* @param file The file upload you want to resume. Can be omitted to resume all files\n\t\t*/\n\t\tconst resumeUpload = (file) => {\n\t\t\tconst files = effect_Array__WEBPACK_IMPORTED_MODULE_7__.ensure(file ?? opts.files);\n\t\t\tfor (const file$1 of files) {\n\t\t\t\tconst upload = uploads.get(file$1);\n\t\t\t\tif (!upload) throw \"No upload found\";\n\t\t\t\tupload.deferred.ac = new AbortController();\n\t\t\t\teffect_Micro__WEBPACK_IMPORTED_MODULE_0__.runPromiseExit(uploadEffect(file$1, upload.presigned), { signal: upload.deferred.ac.signal }).then((result) => {\n\t\t\t\t\tif (result._tag === \"Success\") return upload.deferred.resolve(result.value);\n\t\t\t\t\telse if (result.cause._tag === \"Interrupt\") throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadPausedError();\n\t\t\t\t\tthrow effect_Micro__WEBPACK_IMPORTED_MODULE_0__.causeSquash(result.cause);\n\t\t\t\t}).catch((err) => {\n\t\t\t\t\tif (err instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadPausedError) return;\n\t\t\t\t\tupload.deferred.reject(err);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t* Wait for an upload to complete\n\t\t* @param file The file upload you want to wait for. Can be omitted to wait for all files\n\t\t*/\n\t\tconst done = async (file) => {\n\t\t\tconst promises = [];\n\t\t\tconst files = effect_Array__WEBPACK_IMPORTED_MODULE_7__.ensure(file ?? opts.files);\n\t\t\tfor (const file$1 of files) {\n\t\t\t\tconst upload = uploads.get(file$1);\n\t\t\t\tif (!upload) throw \"No upload found\";\n\t\t\t\tpromises.push(upload.deferred.promise);\n\t\t\t}\n\t\t\tconst results = await Promise.all(promises);\n\t\t\treturn file ? results[0] : results;\n\t\t};\n\t\treturn {\n\t\t\tpauseUpload,\n\t\t\tresumeUpload,\n\t\t\tdone\n\t\t};\n\t};\n\t/**\n\t* One step upload function that both requests presigned URLs\n\t* and then uploads the files to UploadThing\n\t*/\n\tconst typedUploadFiles = (slug, opts) => {\n\t\tconst endpoint = typeof slug === \"function\" ? slug(routeRegistry) : slug;\n\t\tconst fetchFn = initOpts?.fetch ?? window.fetch;\n\t\treturn uploadFilesInternal(endpoint, {\n\t\t\t...opts,\n\t\t\tskipPolling: {},\n\t\t\turl: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.resolveMaybeUrlArg)(initOpts?.url),\n\t\t\tpackage: initOpts?.package ?? \"uploadthing/client\",\n\t\t\tinput: opts.input\n\t\t}).pipe(effect_Micro__WEBPACK_IMPORTED_MODULE_0__.provideService(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.FetchContext, fetchFn), (effect) => effect_Micro__WEBPACK_IMPORTED_MODULE_0__.runPromiseExit(effect, opts.signal && { signal: opts.signal })).then((exit) => {\n\t\t\tif (exit._tag === \"Success\") return exit.value;\n\t\t\telse if (exit.cause._tag === \"Interrupt\") throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_3__.UploadAbortedError();\n\t\t\tthrow effect_Micro__WEBPACK_IMPORTED_MODULE_0__.causeSquash(exit.cause);\n\t\t});\n\t};\n\treturn {\n\t\tuploadFiles: typedUploadFiles,\n\t\tcreateUpload: controllableUpload,\n\t\trouteRegistry\n\t};\n};\n\n//#endregion\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvY2xpZW50L2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0Q7QUFDbUQ7QUFDaEM7QUFDckM7QUFDSTtBQUNGO0FBQzJYO0FBQ2xYO0FBQ1U7O0FBRXpEO0FBQ0Esa0VBQWtFLCtDQUFhO0FBQy9FO0FBQ0E7QUFDQSx3Q0FBd0MsV0FBVztBQUNuRCwrQ0FBK0MsOERBQU87QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsUUFBUTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7QUFDRjtBQUNBLCtDQUErQywwREFBUSxvQkFBb0IsNkRBQVcsb0NBQW9DLGlFQUFnQjtBQUMxSTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsY0FBYyxpREFBZTtBQUM3QixrQkFBa0IsaUVBQWdCO0FBQ2xDO0FBQ0EsMEJBQTBCLFlBQVksRUFBRSxlQUFlO0FBQ3ZEO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjtBQUNBLGFBQWEsaUVBQWdCLEdBQUcsdUJBQXVCO0FBQ3ZELEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0JBQWdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixFQUFFO0FBQ0Y7QUFDQTtBQUNBLFFBQVEsOENBQVk7QUFDcEIsQ0FBQztBQUNELDhDQUE4Qyw2REFBUTtBQUN0RDtBQUNBO0FBQ0EsQ0FBQyxPQUFPLDZDQUFXLElBQUksU0FBUyw0REFBNEQsNkNBQVc7QUFDdkc7QUFDQTtBQUNBLENBQUMsSUFBSSxpREFBZTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDLElBQUksNkNBQVcsQ0FBQyx5REFBWSxHQUFHLDZDQUFXO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUscUZBQXFCO0FBQ3ZCO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsRUFBRSxxRkFBcUI7QUFDdkI7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQSxzQkFBc0IsbUZBQW9CO0FBQzFDLHlCQUF5QiwrRUFBZ0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsUUFBUSxpREFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRSxtQkFBbUIsaURBQWUsK0JBQStCLGlEQUFlLENBQUMsOENBQVksOEJBQThCLDBCQUEwQjtBQUN2SjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUUsTUFBTSxnQkFBZ0I7QUFDeEI7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQiw4REFBTztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxpREFBYSxDQUFDLGtFQUFhLE9BQU8sK0RBQVUsb0JBQW9CLDZDQUFTLHNDQUFzQyx1REFBbUI7QUFDakw7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsaURBQWEsQ0FBQyxrRUFBYSxPQUFPLCtEQUFVLG9CQUFvQixpREFBYSxXQUFXLG9FQUFlLGtDQUFrQyw2Q0FBUyw2Q0FBNkMsdURBQW1CO0FBQ2pRO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0VBQW1CO0FBQzFDO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixtRkFBb0I7QUFDM0MscUJBQXFCLCtFQUFnQjtBQUNyQztBQUNBO0FBQ0EsUUFBUSx1RUFBa0I7QUFDMUI7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLDJCQUEyQixvREFBZ0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUcsT0FBTyx3REFBb0IsQ0FBQyw2REFBWTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHLE9BQU8sd0RBQW9CLENBQUMsNkRBQVk7QUFDM0M7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLDZFQUFjO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHLHdEQUFvQiwwQkFBMEIsNEJBQTRCO0FBQzdFO0FBQ0EsMERBQTBELGtFQUFtQjtBQUM3RSxVQUFVLHFEQUFpQjtBQUMzQixJQUFJO0FBQ0osdUJBQXVCLGtFQUFtQjtBQUMxQztBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsZ0RBQVU7QUFDM0I7QUFDQTtBQUNBO0FBQ0EscURBQXFELG1FQUFvQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGdEQUFVO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSSx3REFBb0IsMkNBQTJDLG1DQUFtQztBQUN0RztBQUNBLDJEQUEyRCxrRUFBbUI7QUFDOUUsV0FBVyxxREFBaUI7QUFDNUIsS0FBSztBQUNMLHdCQUF3QixrRUFBbUI7QUFDM0M7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixnREFBVTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLFFBQVEsdUVBQWtCO0FBQzFCO0FBQ0E7QUFDQSxHQUFHLE9BQU8sd0RBQW9CLENBQUMsNkRBQVksd0JBQXdCLHdEQUFvQiwwQkFBMEIscUJBQXFCO0FBQ3RJO0FBQ0EsdURBQXVELG1FQUFvQjtBQUMzRSxTQUFTLHFEQUFpQjtBQUMxQixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDc1A7QUFDdFAiLCJzb3VyY2VzIjpbIi9Vc2Vycy91c2FtYS9Eb2N1bWVudHMvR2l0SHViL2FpX3NlbGZpZS9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvY2xpZW50L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi4vZGlzdC9wYWNrYWdlLUJlYi1pYXJFLmpzXCI7XG5pbXBvcnQgeyBjcmVhdGVEZWZlcnJlZCwgY3JlYXRlVVRSZXBvcnRlciwgZ2VuZXJhdGVUcmFjZUhlYWRlcnMgfSBmcm9tIFwiLi4vZGlzdC91dC1yZXBvcnRlci1DODQ0Nnctdi5qc1wiO1xuaW1wb3J0IHsgbG9nRGVwcmVjYXRpb25XYXJuaW5nIH0gZnJvbSBcIi4uL2Rpc3QvZGVwcmVjYXRpb25zLXBMbXc2WXRkLmpzXCI7XG5pbXBvcnQgKiBhcyBBcnIgZnJvbSBcImVmZmVjdC9BcnJheVwiO1xuaW1wb3J0ICogYXMgTWljcm8kMSBmcm9tIFwiZWZmZWN0L01pY3JvXCI7XG5pbXBvcnQgKiBhcyBNaWNybyBmcm9tIFwiZWZmZWN0L01pY3JvXCI7XG5pbXBvcnQgeyBGZXRjaENvbnRleHQsIFVwbG9hZEFib3J0ZWRFcnJvciwgVXBsb2FkQWJvcnRlZEVycm9yIGFzIFVwbG9hZEFib3J0ZWRFcnJvciQxLCBVcGxvYWRQYXVzZWRFcnJvciwgVXBsb2FkUGF1c2VkRXJyb3IgYXMgVXBsb2FkUGF1c2VkRXJyb3IkMSwgVXBsb2FkVGhpbmdFcnJvciwgYWxsb3dlZENvbnRlbnRUZXh0TGFiZWxHZW5lcmF0b3IsIGJ5dGVzVG9GaWxlU2l6ZSwgY3JlYXRlSWRlbnRpdHlQcm94eSwgZmV0Y2hFZmYsIGZpbGVTaXplVG9CeXRlcywgZ2VuZXJhdGVDbGllbnREcm9wem9uZUFjY2VwdCwgZ2VuZXJhdGVNaW1lVHlwZXMsIGdlbmVyYXRlUGVybWl0dGVkRmlsZVR5cGVzLCBtYXRjaEZpbGVUeXBlLCBvYmplY3RLZXlzLCByZXNvbHZlTWF5YmVVcmxBcmcgfSBmcm9tIFwiQHVwbG9hZHRoaW5nL3NoYXJlZFwiO1xuaW1wb3J0IHsgdW5zYWZlQ29lcmNlIH0gZnJvbSBcImVmZmVjdC9GdW5jdGlvblwiO1xuaW1wb3J0IHsgaGFzUHJvcGVydHksIGlzUmVjb3JkIH0gZnJvbSBcImVmZmVjdC9QcmVkaWNhdGVcIjtcblxuLy8jcmVnaW9uIHNyYy9faW50ZXJuYWwvdXBsb2FkLWJyb3dzZXIudHNcbmNvbnN0IHVwbG9hZFdpdGhQcm9ncmVzcyA9IChmaWxlLCByYW5nZVN0YXJ0LCBwcmVzaWduZWQsIG9wdHMpID0+IE1pY3JvJDEuYXN5bmMoKHJlc3VtZSkgPT4ge1xuXHRjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0eGhyLm9wZW4oXCJQVVRcIiwgcHJlc2lnbmVkLnVybCwgdHJ1ZSk7XG5cdHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwiUmFuZ2VcIiwgYGJ5dGVzPSR7cmFuZ2VTdGFydH0tYCk7XG5cdHhoci5zZXRSZXF1ZXN0SGVhZGVyKFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCIsIHZlcnNpb24pO1xuXHR4aHIuc2V0UmVxdWVzdEhlYWRlcihcImIzXCIsIG9wdHMudHJhY2VIZWFkZXJzLmIzKTtcblx0eGhyLnNldFJlcXVlc3RIZWFkZXIoXCJ0cmFjZXBhcmVudFwiLCBvcHRzLnRyYWNlSGVhZGVycy50cmFjZXBhcmVudCk7XG5cdHhoci5yZXNwb25zZVR5cGUgPSBcImpzb25cIjtcblx0bGV0IHByZXZpb3VzTG9hZGVkID0gMDtcblx0eGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKFwicHJvZ3Jlc3NcIiwgKHsgbG9hZGVkIH0pID0+IHtcblx0XHRjb25zdCBkZWx0YSA9IGxvYWRlZCAtIHByZXZpb3VzTG9hZGVkO1xuXHRcdG9wdHMub25VcGxvYWRQcm9ncmVzcz8uKHtcblx0XHRcdGxvYWRlZCxcblx0XHRcdGRlbHRhXG5cdFx0fSk7XG5cdFx0cHJldmlvdXNMb2FkZWQgPSBsb2FkZWQ7XG5cdH0pO1xuXHR4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xuXHRcdGlmICh4aHIuc3RhdHVzID49IDIwMCAmJiB4aHIuc3RhdHVzIDwgMzAwICYmIGlzUmVjb3JkKHhoci5yZXNwb25zZSkpIGlmIChoYXNQcm9wZXJ0eSh4aHIucmVzcG9uc2UsIFwiZXJyb3JcIikpIHJlc3VtZShuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0XHRjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcblx0XHRcdG1lc3NhZ2U6IFN0cmluZyh4aHIucmVzcG9uc2UuZXJyb3IpLFxuXHRcdFx0ZGF0YTogeGhyLnJlc3BvbnNlXG5cdFx0fSkpO1xuXHRcdGVsc2UgcmVzdW1lKE1pY3JvJDEuc3VjY2VlZCh4aHIucmVzcG9uc2UpKTtcblx0XHRlbHNlIHJlc3VtZShuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0XHRjb2RlOiBcIlVQTE9BRF9GQUlMRURcIixcblx0XHRcdG1lc3NhZ2U6IGBYSFIgZmFpbGVkICR7eGhyLnN0YXR1c30gJHt4aHIuc3RhdHVzVGV4dH1gLFxuXHRcdFx0ZGF0YTogeGhyLnJlc3BvbnNlXG5cdFx0fSkpO1xuXHR9KTtcblx0eGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLCAoKSA9PiB7XG5cdFx0cmVzdW1lKG5ldyBVcGxvYWRUaGluZ0Vycm9yKHsgY29kZTogXCJVUExPQURfRkFJTEVEXCIgfSkpO1xuXHR9KTtcblx0Y29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcblx0LyoqXG5cdCogaU9TL1JlYWN0IE5hdGl2ZSBGb3JtRGF0YSBoYW5kbGluZyByZXF1aXJlcyBzcGVjaWFsIGF0dGVudGlvbjpcblx0KlxuXHQqIElzc3VlOiBJbiBSZWFjdCBOYXRpdmUsIGlPUyBjcmFzaGVzIHdpdGggXCJhdHRlbXB0IHRvIGluc2VydCBuaWwgb2JqZWN0XCIgd2hlbiBhcHBlbmRpbmcgRmlsZSBkaXJlY3RseVxuXHQqIHRvIEZvcm1EYXRhLiBUaGlzIGhhcHBlbnMgYmVjYXVzZSBpT1MgdHJpZXMgdG8gY3JlYXRlIE5TRGljdGlvbmFyeSBmcm9tIHRoZSBmaWxlIG9iamVjdCBhbmQgZXhwZWN0c1xuXHQqIHNwZWNpZmljIHN0cnVjdHVyZSB7dXJpLCB0eXBlLCBuYW1lfS5cblx0KlxuXHQqXG5cdCogTm90ZTogRG9uJ3QgdHJ5IHRvIHVzZSBCbG9iIG9yIG1vZGlmeSBGaWxlIG9iamVjdCAtIGlPUyBzcGVjaWZpY2FsbHkgbmVlZHMgcGxhaW4gb2JqZWN0XG5cdCogd2l0aCB0aGVzZSBwcm9wZXJ0aWVzIHRvIGNyZWF0ZSB2YWxpZCBOU0RpY3Rpb25hcnkuXG5cdCovXG5cdGlmIChcInVyaVwiIGluIGZpbGUpIGZvcm1EYXRhLmFwcGVuZChcImZpbGVcIiwge1xuXHRcdHVyaTogZmlsZS51cmksXG5cdFx0dHlwZTogZmlsZS50eXBlLFxuXHRcdG5hbWU6IGZpbGUubmFtZSxcblx0XHQuLi5yYW5nZVN0YXJ0ID4gMCAmJiB7IHJhbmdlOiByYW5nZVN0YXJ0IH1cblx0fSk7XG5cdGVsc2UgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCByYW5nZVN0YXJ0ID4gMCA/IGZpbGUuc2xpY2UocmFuZ2VTdGFydCkgOiBmaWxlKTtcblx0eGhyLnNlbmQoZm9ybURhdGEpO1xuXHRyZXR1cm4gTWljcm8kMS5zeW5jKCgpID0+IHhoci5hYm9ydCgpKTtcbn0pO1xuY29uc3QgdXBsb2FkRmlsZSA9IChmaWxlLCBwcmVzaWduZWQsIG9wdHMpID0+IGZldGNoRWZmKHByZXNpZ25lZC51cmwsIHtcblx0bWV0aG9kOiBcIkhFQURcIixcblx0aGVhZGVyczogb3B0cy50cmFjZUhlYWRlcnNcbn0pLnBpcGUoTWljcm8kMS5tYXAoKHsgaGVhZGVycyB9KSA9PiBwYXJzZUludChoZWFkZXJzLmdldChcIngtdXQtcmFuZ2Utc3RhcnRcIikgPz8gXCIwXCIsIDEwKSksIE1pY3JvJDEudGFwKChzdGFydCkgPT4gb3B0cy5vblVwbG9hZFByb2dyZXNzPy4oe1xuXHRkZWx0YTogc3RhcnQsXG5cdGxvYWRlZDogc3RhcnRcbn0pKSwgTWljcm8kMS5mbGF0TWFwKChzdGFydCkgPT4gdXBsb2FkV2l0aFByb2dyZXNzKGZpbGUsIHN0YXJ0LCBwcmVzaWduZWQsIHtcblx0dHJhY2VIZWFkZXJzOiBvcHRzLnRyYWNlSGVhZGVycyxcblx0b25VcGxvYWRQcm9ncmVzczogKHByb2dyZXNzRXZlbnQpID0+IG9wdHMub25VcGxvYWRQcm9ncmVzcz8uKHtcblx0XHRkZWx0YTogcHJvZ3Jlc3NFdmVudC5kZWx0YSxcblx0XHRsb2FkZWQ6IHByb2dyZXNzRXZlbnQubG9hZGVkICsgc3RhcnRcblx0fSlcbn0pKSwgTWljcm8kMS5tYXAodW5zYWZlQ29lcmNlKSwgTWljcm8kMS5tYXAoKHVwbG9hZFJlc3BvbnNlKSA9PiAoe1xuXHRuYW1lOiBmaWxlLm5hbWUsXG5cdHNpemU6IGZpbGUuc2l6ZSxcblx0a2V5OiBwcmVzaWduZWQua2V5LFxuXHRsYXN0TW9kaWZpZWQ6IGZpbGUubGFzdE1vZGlmaWVkLFxuXHRzZXJ2ZXJEYXRhOiB1cGxvYWRSZXNwb25zZS5zZXJ2ZXJEYXRhLFxuXHRnZXQgdXJsKCkge1xuXHRcdGxvZ0RlcHJlY2F0aW9uV2FybmluZyhcImBmaWxlLnVybGAgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHVwbG9hZHRoaW5nIHY5LiBVc2UgYGZpbGUudWZzVXJsYCBpbnN0ZWFkLlwiKTtcblx0XHRyZXR1cm4gdXBsb2FkUmVzcG9uc2UudXJsO1xuXHR9LFxuXHRnZXQgYXBwVXJsKCkge1xuXHRcdGxvZ0RlcHJlY2F0aW9uV2FybmluZyhcImBmaWxlLmFwcFVybGAgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHVwbG9hZHRoaW5nIHY5LiBVc2UgYGZpbGUudWZzVXJsYCBpbnN0ZWFkLlwiKTtcblx0XHRyZXR1cm4gdXBsb2FkUmVzcG9uc2UuYXBwVXJsO1xuXHR9LFxuXHR1ZnNVcmw6IHVwbG9hZFJlc3BvbnNlLnVmc1VybCxcblx0Y3VzdG9tSWQ6IHByZXNpZ25lZC5jdXN0b21JZCxcblx0dHlwZTogZmlsZS50eXBlLFxuXHRmaWxlSGFzaDogdXBsb2FkUmVzcG9uc2UuZmlsZUhhc2hcbn0pKSk7XG5jb25zdCB1cGxvYWRGaWxlc0ludGVybmFsID0gKGVuZHBvaW50LCBvcHRzKSA9PiB7XG5cdGNvbnN0IHRyYWNlSGVhZGVycyA9IGdlbmVyYXRlVHJhY2VIZWFkZXJzKCk7XG5cdGNvbnN0IHJlcG9ydEV2ZW50VG9VVCA9IGNyZWF0ZVVUUmVwb3J0ZXIoe1xuXHRcdGVuZHBvaW50OiBTdHJpbmcoZW5kcG9pbnQpLFxuXHRcdHBhY2thZ2U6IG9wdHMucGFja2FnZSxcblx0XHR1cmw6IG9wdHMudXJsLFxuXHRcdGhlYWRlcnM6IG9wdHMuaGVhZGVycyxcblx0XHR0cmFjZUhlYWRlcnNcblx0fSk7XG5cdGNvbnN0IHRvdGFsU2l6ZSA9IG9wdHMuZmlsZXMucmVkdWNlKChhY2MsIGYpID0+IGFjYyArIGYuc2l6ZSwgMCk7XG5cdGxldCB0b3RhbExvYWRlZCA9IDA7XG5cdHJldHVybiBNaWNybyQxLmZsYXRNYXAocmVwb3J0RXZlbnRUb1VUKFwidXBsb2FkXCIsIHtcblx0XHRpbnB1dDogXCJpbnB1dFwiIGluIG9wdHMgPyBvcHRzLmlucHV0IDogbnVsbCxcblx0XHRmaWxlczogb3B0cy5maWxlcy5tYXAoKGYpID0+ICh7XG5cdFx0XHRuYW1lOiBmLm5hbWUsXG5cdFx0XHRzaXplOiBmLnNpemUsXG5cdFx0XHR0eXBlOiBmLnR5cGUsXG5cdFx0XHRsYXN0TW9kaWZpZWQ6IGYubGFzdE1vZGlmaWVkXG5cdFx0fSkpXG5cdH0pLCAocHJlc2lnbmVkcykgPT4gTWljcm8kMS5mb3JFYWNoKHByZXNpZ25lZHMsIChwcmVzaWduZWQsIGkpID0+IE1pY3JvJDEuZmxhdE1hcChNaWNybyQxLnN5bmMoKCkgPT4gb3B0cy5vblVwbG9hZEJlZ2luPy4oeyBmaWxlOiBvcHRzLmZpbGVzW2ldLm5hbWUgfSkpLCAoKSA9PiB1cGxvYWRGaWxlKG9wdHMuZmlsZXNbaV0sIHByZXNpZ25lZCwge1xuXHRcdHRyYWNlSGVhZGVycyxcblx0XHRvblVwbG9hZFByb2dyZXNzOiAoZXYpID0+IHtcblx0XHRcdHRvdGFsTG9hZGVkICs9IGV2LmRlbHRhO1xuXHRcdFx0b3B0cy5vblVwbG9hZFByb2dyZXNzPy4oe1xuXHRcdFx0XHRmaWxlOiBvcHRzLmZpbGVzW2ldLFxuXHRcdFx0XHRwcm9ncmVzczogZXYubG9hZGVkIC8gb3B0cy5maWxlc1tpXS5zaXplICogMTAwLFxuXHRcdFx0XHRsb2FkZWQ6IGV2LmxvYWRlZCxcblx0XHRcdFx0ZGVsdGE6IGV2LmRlbHRhLFxuXHRcdFx0XHR0b3RhbExvYWRlZCxcblx0XHRcdFx0dG90YWxQcm9ncmVzczogdG90YWxMb2FkZWQgLyB0b3RhbFNpemVcblx0XHRcdH0pO1xuXHRcdH1cblx0fSkpLCB7IGNvbmN1cnJlbmN5OiA2IH0pKTtcbn07XG5cbi8vI2VuZHJlZ2lvblxuLy8jcmVnaW9uIHNyYy9jbGllbnQudHNcbmNvbnN0IHZlcnNpb24kMSA9IHZlcnNpb247XG4vKipcbiogVmFsaWRhdGUgdGhhdCBhIGZpbGUgaXMgb2YgYSB2YWxpZCB0eXBlIGdpdmVuIGEgcm91dGUgY29uZmlnXG4qIEBwdWJsaWNcbiovXG5jb25zdCBpc1ZhbGlkRmlsZVR5cGUgPSAoZmlsZSwgcm91dGVDb25maWcpID0+IE1pY3JvLnJ1blN5bmMobWF0Y2hGaWxlVHlwZShmaWxlLCBvYmplY3RLZXlzKHJvdXRlQ29uZmlnKSkucGlwZShNaWNyby5tYXAoKHR5cGUpID0+IGZpbGUudHlwZS5pbmNsdWRlcyh0eXBlKSksIE1pY3JvLm9yRWxzZVN1Y2NlZWQoKCkgPT4gZmFsc2UpKSk7XG4vKipcbiogVmFsaWRhdGUgdGhhdCBhIGZpbGUgaXMgb2YgYSB2YWxpZCBzaXplIGdpdmVuIGEgcm91dGUgY29uZmlnXG4qIEBwdWJsaWNcbiovXG5jb25zdCBpc1ZhbGlkRmlsZVNpemUgPSAoZmlsZSwgcm91dGVDb25maWcpID0+IE1pY3JvLnJ1blN5bmMobWF0Y2hGaWxlVHlwZShmaWxlLCBvYmplY3RLZXlzKHJvdXRlQ29uZmlnKSkucGlwZShNaWNyby5mbGF0TWFwKCh0eXBlKSA9PiBmaWxlU2l6ZVRvQnl0ZXMocm91dGVDb25maWdbdHlwZV0ubWF4RmlsZVNpemUpKSwgTWljcm8ubWFwKChtYXhGaWxlU2l6ZSkgPT4gZmlsZS5zaXplIDw9IG1heEZpbGVTaXplKSwgTWljcm8ub3JFbHNlU3VjY2VlZCgoKSA9PiBmYWxzZSkpKTtcbi8qKlxuKiBHZW5lcmF0ZSBhIHR5cGVkIHVwbG9hZGVyIGZvciBhIGdpdmVuIEZpbGVSb3V0ZXJcbiogQHB1YmxpY1xuKi9cbmNvbnN0IGdlblVwbG9hZGVyID0gKGluaXRPcHRzKSA9PiB7XG5cdGNvbnN0IHJvdXRlUmVnaXN0cnkgPSBjcmVhdGVJZGVudGl0eVByb3h5KCk7XG5cdGNvbnN0IGNvbnRyb2xsYWJsZVVwbG9hZCA9IGFzeW5jIChzbHVnLCBvcHRzKSA9PiB7XG5cdFx0Y29uc3QgdXBsb2FkcyA9IG5ldyBNYXAoKTtcblx0XHRjb25zdCBlbmRwb2ludCA9IHR5cGVvZiBzbHVnID09PSBcImZ1bmN0aW9uXCIgPyBzbHVnKHJvdXRlUmVnaXN0cnkpIDogc2x1Zztcblx0XHRjb25zdCB0cmFjZUhlYWRlcnMgPSBnZW5lcmF0ZVRyYWNlSGVhZGVycygpO1xuXHRcdGNvbnN0IHV0UmVwb3J0ZXIgPSBjcmVhdGVVVFJlcG9ydGVyKHtcblx0XHRcdGVuZHBvaW50OiBTdHJpbmcoZW5kcG9pbnQpLFxuXHRcdFx0cGFja2FnZTogaW5pdE9wdHM/LnBhY2thZ2UgPz8gXCJ1cGxvYWR0aGluZy9jbGllbnRcIixcblx0XHRcdHVybDogcmVzb2x2ZU1heWJlVXJsQXJnKGluaXRPcHRzPy51cmwpLFxuXHRcdFx0aGVhZGVyczogb3B0cy5oZWFkZXJzLFxuXHRcdFx0dHJhY2VIZWFkZXJzXG5cdFx0fSk7XG5cdFx0Y29uc3QgZmV0Y2hGbiA9IGluaXRPcHRzPy5mZXRjaCA/PyB3aW5kb3cuZmV0Y2g7XG5cdFx0Y29uc3QgcHJlc2lnbmVkcyA9IGF3YWl0IE1pY3JvLnJ1blByb21pc2UodXRSZXBvcnRlcihcInVwbG9hZFwiLCB7XG5cdFx0XHRpbnB1dDogXCJpbnB1dFwiIGluIG9wdHMgPyBvcHRzLmlucHV0IDogbnVsbCxcblx0XHRcdGZpbGVzOiBvcHRzLmZpbGVzLm1hcCgoZikgPT4gKHtcblx0XHRcdFx0bmFtZTogZi5uYW1lLFxuXHRcdFx0XHRzaXplOiBmLnNpemUsXG5cdFx0XHRcdHR5cGU6IGYudHlwZSxcblx0XHRcdFx0bGFzdE1vZGlmaWVkOiBmLmxhc3RNb2RpZmllZFxuXHRcdFx0fSkpXG5cdFx0fSkucGlwZShNaWNyby5wcm92aWRlU2VydmljZShGZXRjaENvbnRleHQsIGZldGNoRm4pKSk7XG5cdFx0Y29uc3QgdG90YWxTaXplID0gb3B0cy5maWxlcy5yZWR1Y2UoKGFjYywgZikgPT4gYWNjICsgZi5zaXplLCAwKTtcblx0XHRsZXQgdG90YWxMb2FkZWQgPSAwO1xuXHRcdGNvbnN0IHVwbG9hZEVmZmVjdCA9IChmaWxlLCBwcmVzaWduZWQpID0+IHVwbG9hZEZpbGUoZmlsZSwgcHJlc2lnbmVkLCB7XG5cdFx0XHR0cmFjZUhlYWRlcnMsXG5cdFx0XHRvblVwbG9hZFByb2dyZXNzOiAocHJvZ3Jlc3NFdmVudCkgPT4ge1xuXHRcdFx0XHR0b3RhbExvYWRlZCArPSBwcm9ncmVzc0V2ZW50LmRlbHRhO1xuXHRcdFx0XHRvcHRzLm9uVXBsb2FkUHJvZ3Jlc3M/Lih7XG5cdFx0XHRcdFx0Li4ucHJvZ3Jlc3NFdmVudCxcblx0XHRcdFx0XHRmaWxlLFxuXHRcdFx0XHRcdHByb2dyZXNzOiBNYXRoLnJvdW5kKHByb2dyZXNzRXZlbnQubG9hZGVkIC8gZmlsZS5zaXplICogMTAwKSxcblx0XHRcdFx0XHR0b3RhbExvYWRlZCxcblx0XHRcdFx0XHR0b3RhbFByb2dyZXNzOiBNYXRoLnJvdW5kKHRvdGFsTG9hZGVkIC8gdG90YWxTaXplICogMTAwKVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KS5waXBlKE1pY3JvLnByb3ZpZGVTZXJ2aWNlKEZldGNoQ29udGV4dCwgZmV0Y2hGbikpO1xuXHRcdGZvciAoY29uc3QgW2ksIHBdIG9mIHByZXNpZ25lZHMuZW50cmllcygpKSB7XG5cdFx0XHRjb25zdCBmaWxlID0gb3B0cy5maWxlc1tpXTtcblx0XHRcdGlmICghZmlsZSkgY29udGludWU7XG5cdFx0XHRjb25zdCBkZWZlcnJlZCA9IGNyZWF0ZURlZmVycmVkKCk7XG5cdFx0XHR1cGxvYWRzLnNldChmaWxlLCB7XG5cdFx0XHRcdGRlZmVycmVkLFxuXHRcdFx0XHRwcmVzaWduZWQ6IHBcblx0XHRcdH0pO1xuXHRcdFx0TWljcm8ucnVuUHJvbWlzZUV4aXQodXBsb2FkRWZmZWN0KGZpbGUsIHApLCB7IHNpZ25hbDogZGVmZXJyZWQuYWMuc2lnbmFsIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuXHRcdFx0XHRpZiAocmVzdWx0Ll90YWcgPT09IFwiU3VjY2Vzc1wiKSByZXR1cm4gZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQudmFsdWUpO1xuXHRcdFx0XHRlbHNlIGlmIChyZXN1bHQuY2F1c2UuX3RhZyA9PT0gXCJJbnRlcnJ1cHRcIikgdGhyb3cgbmV3IFVwbG9hZFBhdXNlZEVycm9yJDEoKTtcblx0XHRcdFx0dGhyb3cgTWljcm8uY2F1c2VTcXVhc2gocmVzdWx0LmNhdXNlKTtcblx0XHRcdH0pLmNhdGNoKChlcnIpID0+IHtcblx0XHRcdFx0aWYgKGVyciBpbnN0YW5jZW9mIFVwbG9hZFBhdXNlZEVycm9yJDEpIHJldHVybjtcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KGVycik7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0LyoqXG5cdFx0KiBQYXVzZSBhbiBvbmdvaW5nIHVwbG9hZFxuXHRcdCogQHBhcmFtIGZpbGUgVGhlIGZpbGUgdXBsb2FkIHlvdSB3YW50IHRvIHBhdXNlLiBDYW4gYmUgb21pdHRlZCB0byBwYXVzZSBhbGwgZmlsZXNcblx0XHQqL1xuXHRcdGNvbnN0IHBhdXNlVXBsb2FkID0gKGZpbGUpID0+IHtcblx0XHRcdGNvbnN0IGZpbGVzID0gQXJyLmVuc3VyZShmaWxlID8/IG9wdHMuZmlsZXMpO1xuXHRcdFx0Zm9yIChjb25zdCBmaWxlJDEgb2YgZmlsZXMpIHtcblx0XHRcdFx0Y29uc3QgdXBsb2FkID0gdXBsb2Fkcy5nZXQoZmlsZSQxKTtcblx0XHRcdFx0aWYgKCF1cGxvYWQpIHJldHVybjtcblx0XHRcdFx0aWYgKHVwbG9hZC5kZWZlcnJlZC5hYy5zaWduYWwuYWJvcnRlZCkgdGhyb3cgbmV3IFVwbG9hZEFib3J0ZWRFcnJvciQxKCk7XG5cdFx0XHRcdHVwbG9hZC5kZWZlcnJlZC5hYy5hYm9ydCgpO1xuXHRcdFx0fVxuXHRcdH07XG5cdFx0LyoqXG5cdFx0KiBSZXN1bWUgYSBwYXVzZWQgdXBsb2FkXG5cdFx0KiBAcGFyYW0gZmlsZSBUaGUgZmlsZSB1cGxvYWQgeW91IHdhbnQgdG8gcmVzdW1lLiBDYW4gYmUgb21pdHRlZCB0byByZXN1bWUgYWxsIGZpbGVzXG5cdFx0Ki9cblx0XHRjb25zdCByZXN1bWVVcGxvYWQgPSAoZmlsZSkgPT4ge1xuXHRcdFx0Y29uc3QgZmlsZXMgPSBBcnIuZW5zdXJlKGZpbGUgPz8gb3B0cy5maWxlcyk7XG5cdFx0XHRmb3IgKGNvbnN0IGZpbGUkMSBvZiBmaWxlcykge1xuXHRcdFx0XHRjb25zdCB1cGxvYWQgPSB1cGxvYWRzLmdldChmaWxlJDEpO1xuXHRcdFx0XHRpZiAoIXVwbG9hZCkgdGhyb3cgXCJObyB1cGxvYWQgZm91bmRcIjtcblx0XHRcdFx0dXBsb2FkLmRlZmVycmVkLmFjID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXHRcdFx0XHRNaWNyby5ydW5Qcm9taXNlRXhpdCh1cGxvYWRFZmZlY3QoZmlsZSQxLCB1cGxvYWQucHJlc2lnbmVkKSwgeyBzaWduYWw6IHVwbG9hZC5kZWZlcnJlZC5hYy5zaWduYWwgfSkudGhlbigocmVzdWx0KSA9PiB7XG5cdFx0XHRcdFx0aWYgKHJlc3VsdC5fdGFnID09PSBcIlN1Y2Nlc3NcIikgcmV0dXJuIHVwbG9hZC5kZWZlcnJlZC5yZXNvbHZlKHJlc3VsdC52YWx1ZSk7XG5cdFx0XHRcdFx0ZWxzZSBpZiAocmVzdWx0LmNhdXNlLl90YWcgPT09IFwiSW50ZXJydXB0XCIpIHRocm93IG5ldyBVcGxvYWRQYXVzZWRFcnJvciQxKCk7XG5cdFx0XHRcdFx0dGhyb3cgTWljcm8uY2F1c2VTcXVhc2gocmVzdWx0LmNhdXNlKTtcblx0XHRcdFx0fSkuY2F0Y2goKGVycikgPT4ge1xuXHRcdFx0XHRcdGlmIChlcnIgaW5zdGFuY2VvZiBVcGxvYWRQYXVzZWRFcnJvciQxKSByZXR1cm47XG5cdFx0XHRcdFx0dXBsb2FkLmRlZmVycmVkLnJlamVjdChlcnIpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdC8qKlxuXHRcdCogV2FpdCBmb3IgYW4gdXBsb2FkIHRvIGNvbXBsZXRlXG5cdFx0KiBAcGFyYW0gZmlsZSBUaGUgZmlsZSB1cGxvYWQgeW91IHdhbnQgdG8gd2FpdCBmb3IuIENhbiBiZSBvbWl0dGVkIHRvIHdhaXQgZm9yIGFsbCBmaWxlc1xuXHRcdCovXG5cdFx0Y29uc3QgZG9uZSA9IGFzeW5jIChmaWxlKSA9PiB7XG5cdFx0XHRjb25zdCBwcm9taXNlcyA9IFtdO1xuXHRcdFx0Y29uc3QgZmlsZXMgPSBBcnIuZW5zdXJlKGZpbGUgPz8gb3B0cy5maWxlcyk7XG5cdFx0XHRmb3IgKGNvbnN0IGZpbGUkMSBvZiBmaWxlcykge1xuXHRcdFx0XHRjb25zdCB1cGxvYWQgPSB1cGxvYWRzLmdldChmaWxlJDEpO1xuXHRcdFx0XHRpZiAoIXVwbG9hZCkgdGhyb3cgXCJObyB1cGxvYWQgZm91bmRcIjtcblx0XHRcdFx0cHJvbWlzZXMucHVzaCh1cGxvYWQuZGVmZXJyZWQucHJvbWlzZSk7XG5cdFx0XHR9XG5cdFx0XHRjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuXHRcdFx0cmV0dXJuIGZpbGUgPyByZXN1bHRzWzBdIDogcmVzdWx0cztcblx0XHR9O1xuXHRcdHJldHVybiB7XG5cdFx0XHRwYXVzZVVwbG9hZCxcblx0XHRcdHJlc3VtZVVwbG9hZCxcblx0XHRcdGRvbmVcblx0XHR9O1xuXHR9O1xuXHQvKipcblx0KiBPbmUgc3RlcCB1cGxvYWQgZnVuY3Rpb24gdGhhdCBib3RoIHJlcXVlc3RzIHByZXNpZ25lZCBVUkxzXG5cdCogYW5kIHRoZW4gdXBsb2FkcyB0aGUgZmlsZXMgdG8gVXBsb2FkVGhpbmdcblx0Ki9cblx0Y29uc3QgdHlwZWRVcGxvYWRGaWxlcyA9IChzbHVnLCBvcHRzKSA9PiB7XG5cdFx0Y29uc3QgZW5kcG9pbnQgPSB0eXBlb2Ygc2x1ZyA9PT0gXCJmdW5jdGlvblwiID8gc2x1Zyhyb3V0ZVJlZ2lzdHJ5KSA6IHNsdWc7XG5cdFx0Y29uc3QgZmV0Y2hGbiA9IGluaXRPcHRzPy5mZXRjaCA/PyB3aW5kb3cuZmV0Y2g7XG5cdFx0cmV0dXJuIHVwbG9hZEZpbGVzSW50ZXJuYWwoZW5kcG9pbnQsIHtcblx0XHRcdC4uLm9wdHMsXG5cdFx0XHRza2lwUG9sbGluZzoge30sXG5cdFx0XHR1cmw6IHJlc29sdmVNYXliZVVybEFyZyhpbml0T3B0cz8udXJsKSxcblx0XHRcdHBhY2thZ2U6IGluaXRPcHRzPy5wYWNrYWdlID8/IFwidXBsb2FkdGhpbmcvY2xpZW50XCIsXG5cdFx0XHRpbnB1dDogb3B0cy5pbnB1dFxuXHRcdH0pLnBpcGUoTWljcm8ucHJvdmlkZVNlcnZpY2UoRmV0Y2hDb250ZXh0LCBmZXRjaEZuKSwgKGVmZmVjdCkgPT4gTWljcm8ucnVuUHJvbWlzZUV4aXQoZWZmZWN0LCBvcHRzLnNpZ25hbCAmJiB7IHNpZ25hbDogb3B0cy5zaWduYWwgfSkpLnRoZW4oKGV4aXQpID0+IHtcblx0XHRcdGlmIChleGl0Ll90YWcgPT09IFwiU3VjY2Vzc1wiKSByZXR1cm4gZXhpdC52YWx1ZTtcblx0XHRcdGVsc2UgaWYgKGV4aXQuY2F1c2UuX3RhZyA9PT0gXCJJbnRlcnJ1cHRcIikgdGhyb3cgbmV3IFVwbG9hZEFib3J0ZWRFcnJvciQxKCk7XG5cdFx0XHR0aHJvdyBNaWNyby5jYXVzZVNxdWFzaChleGl0LmNhdXNlKTtcblx0XHR9KTtcblx0fTtcblx0cmV0dXJuIHtcblx0XHR1cGxvYWRGaWxlczogdHlwZWRVcGxvYWRGaWxlcyxcblx0XHRjcmVhdGVVcGxvYWQ6IGNvbnRyb2xsYWJsZVVwbG9hZCxcblx0XHRyb3V0ZVJlZ2lzdHJ5XG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbmV4cG9ydCB7IFVwbG9hZEFib3J0ZWRFcnJvciwgVXBsb2FkUGF1c2VkRXJyb3IsIGFsbG93ZWRDb250ZW50VGV4dExhYmVsR2VuZXJhdG9yLCBieXRlc1RvRmlsZVNpemUsIGdlblVwbG9hZGVyLCBnZW5lcmF0ZUNsaWVudERyb3B6b25lQWNjZXB0LCBnZW5lcmF0ZU1pbWVUeXBlcywgZ2VuZXJhdGVQZXJtaXR0ZWRGaWxlVHlwZXMsIGlzVmFsaWRGaWxlU2l6ZSwgaXNWYWxpZEZpbGVUeXBlLCB2ZXJzaW9uJDEgYXMgdmVyc2lvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/client/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js":
/*!****************************************************************!*\
  !*** ./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logDeprecationWarning: () => (/* binding */ logDeprecationWarning)\n/* harmony export */ });\n//#region src/_internal/deprecations.ts\nconst logDeprecationWarning = (message) => {\n\tconsole.warn(`⚠️ [uploadthing][deprecated] ${message}`);\n};\n\n//#endregion\n\n//# sourceMappingURL=deprecations-pLmw6Ytd.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9kZXByZWNhdGlvbnMtcExtdzZZdGQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQSw4Q0FBOEMsUUFBUTtBQUN0RDs7QUFFQTtBQUNpQztBQUNqQyIsInNvdXJjZXMiOlsiL1VzZXJzL3VzYW1hL0RvY3VtZW50cy9HaXRIdWIvYWlfc2VsZmllL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L2RlcHJlY2F0aW9ucy1wTG13Nll0ZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gc3JjL19pbnRlcm5hbC9kZXByZWNhdGlvbnMudHNcbmNvbnN0IGxvZ0RlcHJlY2F0aW9uV2FybmluZyA9IChtZXNzYWdlKSA9PiB7XG5cdGNvbnNvbGUud2Fybihg4pqg77iPIFt1cGxvYWR0aGluZ11bZGVwcmVjYXRlZF0gJHttZXNzYWdlfWApO1xufTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBsb2dEZXByZWNhdGlvbldhcm5pbmcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlcHJlY2F0aW9ucy1wTG13Nll0ZC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/deprecations-pLmw6Ytd.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/uploadthing/dist/package-Beb-iarE.js":
/*!***********************************************************!*\
  !*** ./node_modules/uploadthing/dist/package-Beb-iarE.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n//#region package.json\nvar version = \"7.7.3\";\n\n//#endregion\n\n//# sourceMappingURL=package-Beb-iarE.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9wYWNrYWdlLUJlYi1pYXJFLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBOztBQUVBO0FBQ21CO0FBQ25CIiwic291cmNlcyI6WyIvVXNlcnMvdXNhbWEvRG9jdW1lbnRzL0dpdEh1Yi9haV9zZWxmaWUvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvcGFja2FnZS1CZWItaWFyRS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyNyZWdpb24gcGFja2FnZS5qc29uXG52YXIgdmVyc2lvbiA9IFwiNy43LjNcIjtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyB2ZXJzaW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWNrYWdlLUJlYi1pYXJFLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/package-Beb-iarE.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/uploadthing/dist/ut-reporter-C8446w-v.js":
/*!***************************************************************!*\
  !*** ./node_modules/uploadthing/dist/ut-reporter-C8446w-v.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDeferred: () => (/* binding */ createDeferred),\n/* harmony export */   createUTReporter: () => (/* binding */ createUTReporter),\n/* harmony export */   generateTraceHeaders: () => (/* binding */ generateTraceHeaders)\n/* harmony export */ });\n/* harmony import */ var _package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./package-Beb-iarE.js */ \"(ssr)/./node_modules/uploadthing/dist/package-Beb-iarE.js\");\n/* harmony import */ var effect_Micro__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Micro */ \"(ssr)/./node_modules/effect/dist/esm/Micro.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @uploadthing/shared */ \"(ssr)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var effect_Function__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Function */ \"(ssr)/./node_modules/effect/dist/esm/Function.js\");\n\n\n\n\n\n//#region src/_internal/deferred.ts\nconst createDeferred = () => {\n\tlet resolve;\n\tlet reject;\n\tconst ac = new AbortController();\n\tconst promise = new Promise((res, rej) => {\n\t\tresolve = res;\n\t\treject = rej;\n\t});\n\treturn {\n\t\tpromise,\n\t\tac,\n\t\tresolve,\n\t\treject\n\t};\n};\n\n//#endregion\n//#region src/_internal/random-hex.ts\nconst randomHexString = function() {\n\tconst characters = \"abcdef0123456789\";\n\tconst charactersLength = characters.length;\n\treturn function(length) {\n\t\tlet result = \"\";\n\t\tfor (let i = 0; i < length; i++) result += characters.charAt(Math.floor(Math.random() * charactersLength));\n\t\treturn result;\n\t};\n}();\nconst generateTraceHeaders = () => {\n\tconst traceId = randomHexString(32);\n\tconst spanId = randomHexString(16);\n\tconst sampled = \"01\";\n\treturn {\n\t\tb3: `${traceId}-${spanId}-${sampled}`,\n\t\ttraceparent: `00-${traceId}-${spanId}-${sampled}`\n\t};\n};\n\n//#endregion\n//#region src/_internal/ut-reporter.ts\nconst createAPIRequestUrl = (config) => {\n\tconst url = new URL(config.url);\n\tconst queryParams = new URLSearchParams(url.search);\n\tqueryParams.set(\"actionType\", config.actionType);\n\tqueryParams.set(\"slug\", config.slug);\n\turl.search = queryParams.toString();\n\treturn url;\n};\n/**\n* Creates a \"client\" for reporting events to the UploadThing server via the user's API endpoint.\n* Events are handled in \"./handler.ts starting at L112\"\n*/\nconst createUTReporter = (cfg) => (type, payload) => effect_Micro__WEBPACK_IMPORTED_MODULE_0__.gen(function* () {\n\tconst url = createAPIRequestUrl({\n\t\turl: cfg.url,\n\t\tslug: cfg.endpoint,\n\t\tactionType: type\n\t});\n\tconst headers = new Headers(yield* effect_Micro__WEBPACK_IMPORTED_MODULE_0__.promise(async () => typeof cfg.headers === \"function\" ? await cfg.headers() : cfg.headers));\n\tif (cfg.package) headers.set(\"x-uploadthing-package\", cfg.package);\n\theaders.set(\"x-uploadthing-version\", _package_Beb_iarE_js__WEBPACK_IMPORTED_MODULE_1__.version);\n\theaders.set(\"Content-Type\", \"application/json\");\n\theaders.set(\"b3\", cfg.traceHeaders.b3);\n\theaders.set(\"traceparent\", cfg.traceHeaders.traceparent);\n\tconst response = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.fetchEff)(url, {\n\t\tmethod: \"POST\",\n\t\tbody: JSON.stringify(payload),\n\t\theaders\n\t}).pipe(\n\t\teffect_Micro__WEBPACK_IMPORTED_MODULE_0__.andThen(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.parseResponseJson),\n\t\t/**\n\t\t* We don't _need_ to validate the response here, just cast it for now.\n\t\t* As of now, @effect/schema includes quite a few bytes we cut out by this...\n\t\t* We have \"strong typing\" on the backend that ensures the shape should match.\n\t\t*/\n\t\teffect_Micro__WEBPACK_IMPORTED_MODULE_0__.map(effect_Function__WEBPACK_IMPORTED_MODULE_3__.unsafeCoerce),\n\t\teffect_Micro__WEBPACK_IMPORTED_MODULE_0__.catchTag(\"FetchError\", (e) => effect_Micro__WEBPACK_IMPORTED_MODULE_0__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n\t\t\tcode: \"INTERNAL_CLIENT_ERROR\",\n\t\t\tmessage: `Failed to report event \"${type}\" to UploadThing server`,\n\t\t\tcause: e\n\t\t}))),\n\t\teffect_Micro__WEBPACK_IMPORTED_MODULE_0__.catchTag(\"BadRequestError\", (e) => effect_Micro__WEBPACK_IMPORTED_MODULE_0__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n\t\t\tcode: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.getErrorTypeFromStatusCode)(e.status),\n\t\t\tmessage: e.getMessage(),\n\t\t\tcause: e.json\n\t\t}))),\n\t\teffect_Micro__WEBPACK_IMPORTED_MODULE_0__.catchTag(\"InvalidJson\", (e) => effect_Micro__WEBPACK_IMPORTED_MODULE_0__.fail(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_2__.UploadThingError({\n\t\t\tcode: \"INTERNAL_CLIENT_ERROR\",\n\t\t\tmessage: \"Failed to parse response from UploadThing server\",\n\t\t\tcause: e\n\t\t})))\n\t);\n\treturn response;\n});\n\n//#endregion\n\n//# sourceMappingURL=ut-reporter-C8446w-v.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC91dC1yZXBvcnRlci1DODQ0Nnctdi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWdEO0FBQ1Y7QUFDMEU7QUFDakU7O0FBRS9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsWUFBWTtBQUM5QjtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLFFBQVEsR0FBRyxPQUFPLEdBQUcsUUFBUTtBQUN0QyxxQkFBcUIsUUFBUSxHQUFHLE9BQU8sR0FBRyxRQUFRO0FBQ2xEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCw2Q0FBUztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixvQ0FBb0MsaURBQWE7QUFDakQ7QUFDQSxzQ0FBc0MseURBQU87QUFDN0M7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDZEQUFRO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixFQUFFLGlEQUFhLENBQUMsa0VBQWlCO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFLDZDQUFTLENBQUMseURBQVk7QUFDeEIsRUFBRSxrREFBYyxzQkFBc0IsOENBQVUsS0FBSyxpRUFBZ0I7QUFDckU7QUFDQSx1Q0FBdUMsS0FBSztBQUM1QztBQUNBLEdBQUc7QUFDSCxFQUFFLGtEQUFjLDJCQUEyQiw4Q0FBVSxLQUFLLGlFQUFnQjtBQUMxRSxTQUFTLCtFQUEwQjtBQUNuQztBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUUsa0RBQWMsdUJBQXVCLDhDQUFVLEtBQUssaUVBQWdCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNrRTtBQUNsRSIsInNvdXJjZXMiOlsiL1VzZXJzL3VzYW1hL0RvY3VtZW50cy9HaXRIdWIvYWlfc2VsZmllL25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L3V0LXJlcG9ydGVyLUM4NDQ2dy12LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHZlcnNpb24gfSBmcm9tIFwiLi9wYWNrYWdlLUJlYi1pYXJFLmpzXCI7XG5pbXBvcnQgKiBhcyBNaWNybyBmcm9tIFwiZWZmZWN0L01pY3JvXCI7XG5pbXBvcnQgeyBVcGxvYWRUaGluZ0Vycm9yLCBmZXRjaEVmZiwgZ2V0RXJyb3JUeXBlRnJvbVN0YXR1c0NvZGUsIHBhcnNlUmVzcG9uc2VKc29uIH0gZnJvbSBcIkB1cGxvYWR0aGluZy9zaGFyZWRcIjtcbmltcG9ydCB7IHVuc2FmZUNvZXJjZSB9IGZyb20gXCJlZmZlY3QvRnVuY3Rpb25cIjtcblxuLy8jcmVnaW9uIHNyYy9faW50ZXJuYWwvZGVmZXJyZWQudHNcbmNvbnN0IGNyZWF0ZURlZmVycmVkID0gKCkgPT4ge1xuXHRsZXQgcmVzb2x2ZTtcblx0bGV0IHJlamVjdDtcblx0Y29uc3QgYWMgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cdGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcblx0XHRyZXNvbHZlID0gcmVzO1xuXHRcdHJlamVjdCA9IHJlajtcblx0fSk7XG5cdHJldHVybiB7XG5cdFx0cHJvbWlzZSxcblx0XHRhYyxcblx0XHRyZXNvbHZlLFxuXHRcdHJlamVjdFxuXHR9O1xufTtcblxuLy8jZW5kcmVnaW9uXG4vLyNyZWdpb24gc3JjL19pbnRlcm5hbC9yYW5kb20taGV4LnRzXG5jb25zdCByYW5kb21IZXhTdHJpbmcgPSBmdW5jdGlvbigpIHtcblx0Y29uc3QgY2hhcmFjdGVycyA9IFwiYWJjZGVmMDEyMzQ1Njc4OVwiO1xuXHRjb25zdCBjaGFyYWN0ZXJzTGVuZ3RoID0gY2hhcmFjdGVycy5sZW5ndGg7XG5cdHJldHVybiBmdW5jdGlvbihsZW5ndGgpIHtcblx0XHRsZXQgcmVzdWx0ID0gXCJcIjtcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSByZXN1bHQgKz0gY2hhcmFjdGVycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcmFjdGVyc0xlbmd0aCkpO1xuXHRcdHJldHVybiByZXN1bHQ7XG5cdH07XG59KCk7XG5jb25zdCBnZW5lcmF0ZVRyYWNlSGVhZGVycyA9ICgpID0+IHtcblx0Y29uc3QgdHJhY2VJZCA9IHJhbmRvbUhleFN0cmluZygzMik7XG5cdGNvbnN0IHNwYW5JZCA9IHJhbmRvbUhleFN0cmluZygxNik7XG5cdGNvbnN0IHNhbXBsZWQgPSBcIjAxXCI7XG5cdHJldHVybiB7XG5cdFx0YjM6IGAke3RyYWNlSWR9LSR7c3BhbklkfS0ke3NhbXBsZWR9YCxcblx0XHR0cmFjZXBhcmVudDogYDAwLSR7dHJhY2VJZH0tJHtzcGFuSWR9LSR7c2FtcGxlZH1gXG5cdH07XG59O1xuXG4vLyNlbmRyZWdpb25cbi8vI3JlZ2lvbiBzcmMvX2ludGVybmFsL3V0LXJlcG9ydGVyLnRzXG5jb25zdCBjcmVhdGVBUElSZXF1ZXN0VXJsID0gKGNvbmZpZykgPT4ge1xuXHRjb25zdCB1cmwgPSBuZXcgVVJMKGNvbmZpZy51cmwpO1xuXHRjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXModXJsLnNlYXJjaCk7XG5cdHF1ZXJ5UGFyYW1zLnNldChcImFjdGlvblR5cGVcIiwgY29uZmlnLmFjdGlvblR5cGUpO1xuXHRxdWVyeVBhcmFtcy5zZXQoXCJzbHVnXCIsIGNvbmZpZy5zbHVnKTtcblx0dXJsLnNlYXJjaCA9IHF1ZXJ5UGFyYW1zLnRvU3RyaW5nKCk7XG5cdHJldHVybiB1cmw7XG59O1xuLyoqXG4qIENyZWF0ZXMgYSBcImNsaWVudFwiIGZvciByZXBvcnRpbmcgZXZlbnRzIHRvIHRoZSBVcGxvYWRUaGluZyBzZXJ2ZXIgdmlhIHRoZSB1c2VyJ3MgQVBJIGVuZHBvaW50LlxuKiBFdmVudHMgYXJlIGhhbmRsZWQgaW4gXCIuL2hhbmRsZXIudHMgc3RhcnRpbmcgYXQgTDExMlwiXG4qL1xuY29uc3QgY3JlYXRlVVRSZXBvcnRlciA9IChjZmcpID0+ICh0eXBlLCBwYXlsb2FkKSA9PiBNaWNyby5nZW4oZnVuY3Rpb24qICgpIHtcblx0Y29uc3QgdXJsID0gY3JlYXRlQVBJUmVxdWVzdFVybCh7XG5cdFx0dXJsOiBjZmcudXJsLFxuXHRcdHNsdWc6IGNmZy5lbmRwb2ludCxcblx0XHRhY3Rpb25UeXBlOiB0eXBlXG5cdH0pO1xuXHRjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoeWllbGQqIE1pY3JvLnByb21pc2UoYXN5bmMgKCkgPT4gdHlwZW9mIGNmZy5oZWFkZXJzID09PSBcImZ1bmN0aW9uXCIgPyBhd2FpdCBjZmcuaGVhZGVycygpIDogY2ZnLmhlYWRlcnMpKTtcblx0aWYgKGNmZy5wYWNrYWdlKSBoZWFkZXJzLnNldChcIngtdXBsb2FkdGhpbmctcGFja2FnZVwiLCBjZmcucGFja2FnZSk7XG5cdGhlYWRlcnMuc2V0KFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCIsIHZlcnNpb24pO1xuXHRoZWFkZXJzLnNldChcIkNvbnRlbnQtVHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG5cdGhlYWRlcnMuc2V0KFwiYjNcIiwgY2ZnLnRyYWNlSGVhZGVycy5iMyk7XG5cdGhlYWRlcnMuc2V0KFwidHJhY2VwYXJlbnRcIiwgY2ZnLnRyYWNlSGVhZGVycy50cmFjZXBhcmVudCk7XG5cdGNvbnN0IHJlc3BvbnNlID0geWllbGQqIGZldGNoRWZmKHVybCwge1xuXHRcdG1ldGhvZDogXCJQT1NUXCIsXG5cdFx0Ym9keTogSlNPTi5zdHJpbmdpZnkocGF5bG9hZCksXG5cdFx0aGVhZGVyc1xuXHR9KS5waXBlKFxuXHRcdE1pY3JvLmFuZFRoZW4ocGFyc2VSZXNwb25zZUpzb24pLFxuXHRcdC8qKlxuXHRcdCogV2UgZG9uJ3QgX25lZWRfIHRvIHZhbGlkYXRlIHRoZSByZXNwb25zZSBoZXJlLCBqdXN0IGNhc3QgaXQgZm9yIG5vdy5cblx0XHQqIEFzIG9mIG5vdywgQGVmZmVjdC9zY2hlbWEgaW5jbHVkZXMgcXVpdGUgYSBmZXcgYnl0ZXMgd2UgY3V0IG91dCBieSB0aGlzLi4uXG5cdFx0KiBXZSBoYXZlIFwic3Ryb25nIHR5cGluZ1wiIG9uIHRoZSBiYWNrZW5kIHRoYXQgZW5zdXJlcyB0aGUgc2hhcGUgc2hvdWxkIG1hdGNoLlxuXHRcdCovXG5cdFx0TWljcm8ubWFwKHVuc2FmZUNvZXJjZSksXG5cdFx0TWljcm8uY2F0Y2hUYWcoXCJGZXRjaEVycm9yXCIsIChlKSA9PiBNaWNyby5mYWlsKG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0XHRcdGNvZGU6IFwiSU5URVJOQUxfQ0xJRU5UX0VSUk9SXCIsXG5cdFx0XHRtZXNzYWdlOiBgRmFpbGVkIHRvIHJlcG9ydCBldmVudCBcIiR7dHlwZX1cIiB0byBVcGxvYWRUaGluZyBzZXJ2ZXJgLFxuXHRcdFx0Y2F1c2U6IGVcblx0XHR9KSkpLFxuXHRcdE1pY3JvLmNhdGNoVGFnKFwiQmFkUmVxdWVzdEVycm9yXCIsIChlKSA9PiBNaWNyby5mYWlsKG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcblx0XHRcdGNvZGU6IGdldEVycm9yVHlwZUZyb21TdGF0dXNDb2RlKGUuc3RhdHVzKSxcblx0XHRcdG1lc3NhZ2U6IGUuZ2V0TWVzc2FnZSgpLFxuXHRcdFx0Y2F1c2U6IGUuanNvblxuXHRcdH0pKSksXG5cdFx0TWljcm8uY2F0Y2hUYWcoXCJJbnZhbGlkSnNvblwiLCAoZSkgPT4gTWljcm8uZmFpbChuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG5cdFx0XHRjb2RlOiBcIklOVEVSTkFMX0NMSUVOVF9FUlJPUlwiLFxuXHRcdFx0bWVzc2FnZTogXCJGYWlsZWQgdG8gcGFyc2UgcmVzcG9uc2UgZnJvbSBVcGxvYWRUaGluZyBzZXJ2ZXJcIixcblx0XHRcdGNhdXNlOiBlXG5cdFx0fSkpKVxuXHQpO1xuXHRyZXR1cm4gcmVzcG9uc2U7XG59KTtcblxuLy8jZW5kcmVnaW9uXG5leHBvcnQgeyBjcmVhdGVEZWZlcnJlZCwgY3JlYXRlVVRSZXBvcnRlciwgZ2VuZXJhdGVUcmFjZUhlYWRlcnMgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV0LXJlcG9ydGVyLUM4NDQ2dy12LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/uploadthing/dist/ut-reporter-C8446w-v.js\n");

/***/ })

};
;